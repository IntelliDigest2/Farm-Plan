(this.webpackJsonpplatform=this.webpackJsonpplatform||[]).push([[0],{191:function(e,t,a){},232:function(e,t,a){},245:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},38:function(e,t,a){},415:function(e,t,a){},417:function(e,t,a){},448:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){},520:function(e){e.exports=JSON.parse('{"categories":{"Grains":[{"crop":"Winter wheat","phosphorus":50,"potassium":125,"nitrogen":280,"pests":["barley thrips","barley yellow dwarf","bird cherry-oat aphid","black point","black rust","blackberry-cereal aphid","brown foot rot","brown rust","bunt","cereal cyst nematode","cereal leaf aphid","cereal root-knot nematode","click beetles","common rustic moth","corn leaf aphid","crane flies","daddy longlegs","ear blight","ergot","eyespot","fescue aphid (subspecies)","field slug","frit fly","garden slugs","glume blotch","gout fly","grain aphid","hare, brown","keeled slugs","late season diseases","leaf spot","leatherjackets","loose smut","oat thrips","pigeon","powdery mildew","rabbit","rat, brown","rose-grain aphid","saddle gall midge","seedling blight","sharp eyespot","slugs","snow mould","snow rot","sooty moulds","stem rust","take-all","thrips","wheat blossom midge, orange","wheat blossom midge, yellow","wheat bulb fly","wheat flea beetle","wheat shoot beetle","wheat soil-borne mosaic","white-soled slugs","wireworms","wood pigeon","yellow cereal fly","yellow rust"]},{"crop":"Maize","pests":["barley yellow dwarf","bird cherry-oat aphid","cereal leaf aphid","click beetles","corn leaf aphid","fescue aphid (subspecies)","field slug","frit fly","garden slugs","grain aphid","hare, brown","keeled slugs","rabbit","rat, brown","rose-grain aphid","slugs","smut","stalk rot","white-soled slugs","wireworms"]},{"crop":"Winter barley","phosphorus":50,"potassium":125,"nitrogen":220,"pests":["barley mosaic","barley thrips","barley yellow dwarf","bird cherry-oat aphid","blackberry-cereal aphid","brown foot rot","brown rust","cereal cyst nematode","cereal leaf aphid","cereal root-knot nematode","common rustic moth","corn leaf aphid","crane flies","daddy longlegs","ear blight","ergot","eyespot","fescue aphid (subspecies)","field slug","frit fly","garden slugs","glume blotch","gout fly","grain aphid","halo spot","hare, brown","keeled slugs","late season diseases","leaf blotch","leaf spot","leaf stripe","leatherjackets","loose smut","net blotch","oat thrips","pigeon","powdery mildew","rabbit","rat, brown","rose-grain aphid","saddle gall midge","seedling blight","sharp eyespot","slugs","snow mould","snow rot","sooty moulds","take-all","thrips","wheat blossom midge, orange","wheat blossom midge, yellow","wheat bulb fly","wheat flea beetle","white-soled slugs","wood pigeon","yellow cereal fly","yellow rust"]},{"crop":"Winter oats","phosphorus":50,"potassium":125,"nitrogen":190,"pests":["barley thrips","barley yellow dwarf","bird cherry-oat aphid","blackberry-cereal aphid","brown foot rot","cereal cyst nematode","cereal leaf aphid","click beetles","common rustic moth","corn leaf aphid","crane flies","crown rust","daddy longlegs","ear blight","eyespot","fescue aphid (subspecies)","field slug","frit fly","garden slugs","grain aphid","hare, brown","keeled slugs","leatherjackets","loose smut","oat golden stripe","oat mosaic","oat thrips","powdery mildew","rabbit","rat, brown","rose-grain aphid","saddle gall midge","seedling blight","slugs","sooty moulds","stem nematode","thrips","wheat flea beetle","wheat shoot beetle","white-soled slugs","wireworms"]},{"crop":"Spring wheat","phosphorus":50,"potassium":125,"nitrogen":220,"pests":["barley thrips","barley yellow dwarf","bird cherry-oat aphid","black point","black rust","blackberry-cereal aphid","brown foot rot","brown rust","bunt","cereal cyst nematode","cereal leaf aphid","cereal root-knot nematode","click beetles","common rustic moth","corn leaf aphid","crane flies","daddy longlegs","ear blight","ergot","eyespot","fescue aphid (subspecies)","field slug","frit fly","garden slugs","glume blotch","gout fly","grain aphid","hare, brown","keeled slugs","late season diseases","leaf spot","leatherjackets","loose smut","oat thrips","pigeon","powdery mildew","rabbit","rat, brown","rose-grain aphid","saddle gall midge","seedling blight","sharp eyespot","slugs","snow mould","snow rot","sooty moulds","stem rust","take-all","thrips","wheat blossom midge, orange","wheat blossom midge, yellow","wheat bulb fly","wheat flea beetle","wheat shoot beetle","wheat soil-borne mosaic","white-soled slugs","wireworms","wood pigeon","yellow cereal fly","yellow rust"]},{"crop":"Spring barley","phosphorus":50,"potassium":125,"nitrogen":160,"pests":["barley mosaic","barley thrips","barley yellow dwarf","bird cherry-oat aphid","blackberry-cereal aphid","brown foot rot","brown rust","cereal cyst nematode","cereal leaf aphid","cereal root-knot nematode","common rustic moth","corn leaf aphid","crane flies","daddy longlegs","ear blight","ergot","eyespot","fescue aphid (subspecies)","field slug","frit fly","garden slugs","glume blotch","gout fly","grain aphid","halo spot","hare, brown","keeled slugs","late season diseases","leaf blotch","leaf spot","leaf stripe","leatherjackets","loose smut","net blotch","oat thrips","pigeon","powdery mildew","rabbit","rat, brown","rose-grain aphid","saddle gall midge","seedling blight","sharp eyespot","slugs","snow mould","snow rot","sooty moulds","take-all","thrips","wheat blossom midge, orange","wheat blossom midge, yellow","wheat bulb fly","wheat flea beetle","white-soled slugs","wood pigeon","yellow cereal fly","yellow rust"]},{"crop":"Spring oats","phosphorus":50,"potassium":125,"nitrogen":130,"pests":["barley thrips","barley yellow dwarf","bird cherry-oat aphid","blackberry-cereal aphid","brown foot rot","cereal cyst nematode","cereal leaf aphid","click beetles","common rustic moth","corn leaf aphid","crane flies","crown rust","daddy longlegs","ear blight","eyespot","fescue aphid (subspecies)","field slug","frit fly","garden slugs","grain aphid","hare, brown","keeled slugs","leatherjackets","loose smut","oat golden stripe","oat mosaic","oat thrips","powdery mildew","rabbit","rat, brown","rose-grain aphid","saddle gall midge","seedling blight","slugs","sooty moulds","stem nematode","thrips","wheat flea beetle","wheat shoot beetle","white-soled slugs","wireworms"]},{"crop":"Rye","phosphorus":50,"potassium":125,"nitrogen":150,"pests":["barley thrips","bird cherry-oat aphid","blackberry-cereal aphid","crane flies","daddy longlegs","ergot","field slug","frit fly","garden slugs","gout fly","grain aphid","hare, brown","keeled slugs","leatherjackets","oat thrips","rabbit","rat, brown","rose-grain aphid","saddle gall midge","slugs","stem nematode","thrips","wheat blossom midge, orange","wheat blossom midge, yellow","wheat bulb fly","white-soled slugs","yellow cereal fly"],"nutrients":{"crop":"Rye","Fat":"3.3g","Sodium":"603mg","Potassium":"166mg","Carbs":"48g","Protein":"9g","Vit. C":0,"Iron":0.15,"Vit. B6":0.05,"Magnesium":0.1,"Calcium":0.07}},{"crop":"Triticale","phosphorus":50,"potassium":125,"nitrogen":280,"nutrients":{"crop":"Triticale","Fat":"4g","Sodium":"9.6mg","Potassium":"637mg","Carbs":"138g","Protein":"25g","Vit. C":0,"Iron":0.27,"Vit. B6":0.2,"Magnesium":0.3,"Calcium":0.04}},{"crop":"Peas","phosphorus":45,"potassium":85,"nitrogen":0,"pests":["bacterial blight","bean leaf roll","bean seed flies","black root rot","cabbage thrips","field slug","field thrips","foot rot","garden slugs","grey mould","keeled slugs","leaf and pod spot","pea and bean weevil","pea aphid","pea blight","pea cyst nematode","pea downy mildew","pea early browning","pea enation mosaic","pea leaf roll","pea midge","pea moth","pea seed-borne mosaic","pea thrips","pea top yellows","pea wilt","pigeon","pre-emergence damping off","root rot","sclerotinia","silver y moth","slugs","stem nematode","white-soled slugs","wood pigeon"],"nutrients":{"crop":"Peas","Fat":"0.2g","Sodium":"58mg","Potassium":"244mg","Carbs":"14g","Protein":"5g","Vit. C":0.66,"Iron":0.08,"Vit. B6":0.1,"Magnesium":0.08,"Calcium":0.02}},{"crop":"Broad beans","phosphorus":45,"potassium":85,"nitrogen":0,"pests":["bean beetle","bean leaf roll","bean seed beetle","bean yellow mosaic","black bean aphid","blackfly","broad bean stain","broad bean true mosaic","cabbage thrips","chocolate spot","downy mildew","field thrips","foot rot","leaf stem and pod spot","pea and bean weevil","pea aphid","pea cyst nematode","root rot","rust","sclerotinia stem rot","stem nematode"],"nutrients":{"crop":"Broad beans","Fat":"0.7g","Sodium":"25mg","Potassium":"332mg","Carbs":"18g","Protein":"8g","Vit. C":0.06,"Iron":0.08,"Vit. B6":0.05,"Magnesium":0.08,"Calcium":0.03}},{"crop":"Runner peas","phosphorus":45,"potassium":85,"nitrogen":0,"pests":["bacterial blight","bean leaf roll","bean seed flies","black root rot","cabbage thrips","field slug","field thrips","foot rot","garden slugs","grey mould","keeled slugs","leaf and pod spot","pea and bean weevil","pea aphid","pea blight","pea cyst nematode","pea downy mildew","pea early browning","pea enation mosaic","pea leaf roll","pea midge","pea moth","pea seed-borne mosaic","pea thrips","pea top yellows","pea wilt","pigeon","pre-emergence damping off","root rot","sclerotinia","silver y moth","slugs","stem nematode","white-soled slugs","wood pigeon"],"nutrients":{"crop":"Runner peas","Fat":"0.4g","Sodium":"6mg","Potassium":"130mg","Carbs":"3.2g","Protein":"1.8g","Vit. C":0.27,"Iron":0.05,"Vit. B6":0.05,"Magnesium":0.06,"Calcium":0.03}},{"crop":"Lupin","pests":["anthracnose","bean yellow mosaic","brown spot","cabbage thrips","field thrips","grey mould","lupin aphid","lupin rust"]}],"Oil":[{"crop":"Winter rapeseed","phosphorus":45,"potassium":75,"nitrogen":220,"pests":["beet cyst nematode","beet western yellows","blossom beetles","botrytis","brassica cyst nematode","brassica pod midge","cabbage aphid","cabbage leaf miner","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","club root","damping-off","dark leaf and pod spot","downy mildew","field slug","garden slugs","grey mould","keeled slugs","light leaf spot","phoma leaf spot","pigeon","pollen beetles","powdery mildew","rape winter stem weevil","sclerotinia stem rot","slugs","stem canker","white blister","white leaf spot","white rust","white-soled slugs","wirestem","wood pigeon"]},{"crop":"Spring rapeseed","phosphorus":45,"potassium":75,"nitrogen":150,"pests":["beet cyst nematode","beet western yellows","blossom beetles","botrytis","brassica cyst nematode","brassica pod midge","cabbage aphid","cabbage leaf miner","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","club root","damping-off","dark leaf and pod spot","downy mildew","field slug","garden slugs","grey mould","keeled slugs","light leaf spot","phoma leaf spot","pigeon","pollen beetles","powdery mildew","rape winter stem weevil","sclerotinia stem rot","slugs","stem canker","white blister","white leaf spot","white rust","white-soled slugs","wirestem","wood pigeon"]},{"crop":"Linseed","phosphorus":45,"potassium":75,"nitrogen":100,"pests":["blight","cabbage thrips","capsids","common green capsid","field thrips","flax flea beetle","fusarium wilt","grey mould","large flax flea beetle","linseed flea beetle","pasmo","potato capsid","powdery mildew","sclerotinia","tarnished plant bug","verticillium wilt"]},{"crop":"Sunflower","phosphorus":15,"potassium":45,"nitrogen":50,"pests":["botrytis head rot","sclerotinia rot","sclerotinia wilt"]}],"Vegetables":[{"crop":"Sugar beet","pests":["beet cyst nematode","beet flea beetle","beet fly","beet leaf miner","beet mosaic","black bean aphid","blackfly","blackleg","cabbage thrips","capsids","click beetles","common green capsid","crane flies","cutworms","daddy longlegs","Docking disorder","downy mildew","field mouse","field slug","field thrips","flat millepede","garden dart moth","garden slugs","glasshouse and potato aphid","hare, brown","keeled slugs","large yellow underwing moth","leatherjackets","mangel flea beetle","mangel fly","mangold flea beetle","mangold fly","millepedes","mouse","needle nematodes","partridge","peach-potato aphid","pheasant","potato aphid","potato capsid","powdery mildew","pygmy beetle","pygmy mangold beetle","rabbit","ramularia leaf spot","rat, brown","red spider mite","rhizomania","rust","silver y moth","skylark","slugs","spotted millepede","spotted snake millepede","springtails","stem nematode","stubby-root nematodes","symphylid, glasshouse","tarnished plant bug","turnip moth","two-spotted spider mite","violet root rot","virus yellows","white-line dart moth","white-soled slugs","wireworms","wood mouse"]},{"crop":"Mustard, brown","pests":["beet cyst nematode","blossom beetles","brassica pod midge","cabbage seed weevil","cabbage stem weevil","pollen beetles"]},{"crop":"Mustard, white","pests":["beet cyst nematode","blossom beetles","cabbage stem weevil","pollen beetles"]},{"crop":"Swiss Chard","pests":["Aphids","Armyworms","Blister Beetles","Cabbageworms","Cucumber Beetles","Cutworms","Darkling Beetles","Diamondback Moth Caterpillars","Flea Beetles","Leafhoppers","Leaf Miners","Lygus Bugs","Slugs and Snails"]},{"crop":"Sprouts","phosphorus":90,"potassium":240,"nitrogen":330,"pests":["bean seed flies","beet cyst nematode","brassica cyst nematode","cabbage aphid","cabbage leaf miner","cabbage moth","cabbage root fly","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","cruciferous flea beetle","damping-off","dark leaf spot","diamond-back moth","downy mildew","field slug","flea beetles","garden slugs","green-veined white butterfly","keeled slugs","large striped flea beetle","large white butterfly","light leaf spot","pigeon","powdery mildew","ringspot","sclerotinia stem rot","slugs","small striped flea beetle","small white butterfly","swede midge","turnip flea beetle","turnip gall weevil","white blister","white rust","white-soled slugs","wirestem","wood pigeon"],"nutrients":{"crop":"Sprouts","Fat":"0.3g","Sodium":"25mg","Potassium":"389mg","Carbs":"9g","Protein":"3.4g","Vit. C":1.41,"Iron":0.07,"Vit. B6":0.1,"Magnesium":0.05,"Calcium":0.04}},{"crop":"Broccoli","pests":["bean seed flies","beet cyst nematode","blossom beetles","brassica cyst nematode","cabbage aphid","cabbage leaf miner","cabbage moth","cabbage root fly","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","cruciferous flea beetle","damping-off","diamond-back moth","field slug","flea beetles","garden slugs","green-veined white butterfly","keeled slugs","large striped flea beetle","large white butterfly","light leaf spot","pigeon","pollen beetles","sclerotinia stem rot","slugs","small striped flea beetle","small white butterfly","swede midge","turnip flea beetle","turnip gall weevil","white-soled slugs","wirestem","wood pigeon"]},{"crop":"Winter cabbage","phosphorus":90,"potassium":240,"nitrogen":325,"pests":["bean seed flies","beet cyst nematode","brassica cyst nematode","cabbage aphid","cabbage leaf miner","cabbage moth","cabbage root fly","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","cruciferous flea beetle","damping-off","diamond-back moth","field slug","flea beetles","garden slugs","green-veined white butterfly","keeled slugs","large striped flea beetle","large white butterfly","light leaf spot","onion thrips","pigeon","powdery mildew","sclerotinia stem rot","slugs","small striped fleabeetle","small white butterfly","swede midge","turnip flea beetle","turnip gallweevil","white-soled slugs","wirestem","wood pigeon"]},{"crop":"Winter collards","phosphorus":90,"potassium":240,"nitrogen":210},{"crop":"Winter cauliflower","phosphorus":90,"potassium":240,"nitrogen":100,"pests":["bean seed flies","beet cyst nematode","black rot","blossom beetles","brassica cyst nematode","cabbage aphid","cabbage leaf miner","cabbage moth","cabbage root fly","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","cauliflower mosaic","club root","cruciferous flea beetle","damping-off","diamond-back moth","downy mildew","field slug","flea beetles","garden slugs","green-veined white butterfly","keeled slugs","large striped flea beetle","large white butterfly","light leaf spot","pigeon","pollen beetles","sclerotinia stem rot","slugs","small striped flea beetle","small white butterfly","swede midge","turnip flea beetle","turnip gall weevil","turnip yellow mosaic","white-soled slugs","wirestem","wood pigeon"]},{"crop":"Spring cabbage","phosphorus":90,"potassium":240,"nitrogen":240,"pests":["bean seed flies","beet cyst nematode","brassica cyst nematode","cabbage aphid","cabbage leaf miner","cabbage moth","cabbage root fly","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","cruciferous flea beetle","damping-off","diamond-back moth","field slug","flea beetles","garden slugs","green-veined white butterfly","keeled slugs","large striped flea beetle","large white butterfly","light leaf spot","onion thrips","pigeon","powdery mildew","sclerotinia stem rot","slugs","small striped fleabeetle","small white butterfly","swede midge","turnip flea beetle","turnip gallweevil","white-soled slugs","wirestem","wood pigeon"]},{"crop":"Spring collards","phosphorus":90,"potassium":240,"nitrogen":320},{"crop":"Summer cauliflower","phosphorus":90,"potassium":240,"nitrogen":290,"pests":["bean seed flies","beet cyst nematode","black rot","blossom beetles","brassica cyst nematode","cabbage aphid","cabbage leaf miner","cabbage moth","cabbage root fly","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","cauliflower mosaic","club root","cruciferous flea beetle","damping-off","diamond-back moth","downy mildew","field slug","flea beetles","garden slugs","green-veined white butterfly","keeled slugs","large striped flea beetle","large white butterfly","light leaf spot","pigeon","pollen beetles","sclerotinia stem rot","slugs","small striped flea beetle","small white butterfly","swede midge","turnip flea beetle","turnip gall weevil","turnip yellow mosaic","white-soled slugs","wirestem","wood pigeon"]},{"crop":"Calabrese","phosphorus":90,"potassium":240,"nitrogen":235,"nutrients":{"crop":"Calabrese","Fat":"0.3g","Sodium":"30mg","Potassium":"293mg","Carbs":"6g","Protein":"2.6g","Vit. C":0.84,"Iron":0.06,"Vit. B6":0.12,"Magnesium":0.27,"Calcium":0.02}},{"crop":"Leek","phosphorus":90,"potassium":230,"nitrogen":200,"pests":["cutworms","garden dart moth","large yellow underwing moth","leek moth","leek rust","onion fly","onion thrips","stem nematode","turnip moth","white tip","white-line dart moth"],"nutrients":{"crop":"Leek","Fat":"0.3g","Sodium":"20mg","Potassium":"180mg","Carbs":"14g","Protein":"1.5g","Vit. C":0.2,"Iron":0.11,"Vit. B6":0.1,"Magnesium":0.07,"Calcium":0.05}},{"crop":"lettuce","phosphorus":110,"potassium":220,"nitrogen":200,"pests":["beet western yellows","currant-lettuce aphid","cutworms","downy mildew","field slug","garden dart moth","garden slugs","glasshouse and potato aphid","grey mould","keeled slugs","large yellow underwing moth","lettuce big vein","lettuce mosaic","lettuce root aphid","peach-potato aphid","potato aphid","rhizoctonia rot","sclerotinia rot","silver y moth","slugs","turnip moth","white-line dart moth","white-soled slugs"]},{"crop":"Kale","pests":["bean seed flies","beet cyst nematode","brassica cyst nematode","cabbage aphid","cabbage leaf miner","cabbage moth","cabbage root fly","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","cruciferous flea beetle","damping-off","diamond-back moth","field slug","flea beetles","garden slugs","green-veined white butterfly","keeled slugs","large striped flea beetle","large white butterfly","pigeon","sclerotinia stem rot","slugs","small striped flea beetle","small white butterfly","swede midge","turnip flea beetle","turnip gall weevil","white-soled slugs","wirestem","wood pigeon"]},{"crop":"Kohlrabi","pests":["bean seed flies","beet cyst nematode","brassica cyst nematode","cabbage aphid","cabbage leaf miner","cabbage moth","cabbage root fly","cabbage seed weevil","cabbage stem flea beetle","cabbage stem weevil","cruciferous flea beetle","damping-off","diamond-back moth","field slug","flea beetles","garden slugs","green-veined white butterfly","keeled slugs","large striped flea beetle","large white butterfly","pigeon","sclerotinia stem rot","slugs","small striped flea beetle","small white butterfly","swede midge","turnip flea beetle","turnip gall weevil","white-soled slugs","wirestem","wood pigeon"]}],"Soft fruits":[{"crop":"Blackcurrant","phosphorus":50,"potassium":200,"nitrogen":60,"nutrients":{"crop":"Blackcurrant","Fat":"0g","Sodium":"25mg","Potassium":"332mg","Carbs":"31.1g","Protein":"0g","Vit. C":3.01,"Iron":0.195,"Vit. B6":0.04,"Magnesium":0.06,"Calcium":0.055}},{"crop":"Gooseberry","phosphorus":50,"potassium":200,"nitrogen":120,"nutrients":{"crop":"Gooseberry","Fat":"0.58g","Sodium":"1mg","Potassium":"198mg","Carbs":"15g","Protein":"1g","Vit. C":0.55,"Iron":0.04,"Vit. B6":0.07,"Magnesium":0.025,"Calcium":0.025}},{"crop":"Raspberry","phosphorus":50,"potassium":200,"nitrogen":120,"nutrients":{"crop":"Raspberry","Fat":"0.7g","Sodium":"1mg","Potassium":"151mg","Carbs":"12g","Protein":"1.2g","Vit. C":0.43,"Iron":0.03,"Vit. B6":0.05,"Magnesium":0.05,"Calcium":0.02}},{"crop":"Blackberry","phosphorus":50,"potassium":200,"nitrogen":120,"nutrients":{"crop":"Blackberry","Fat":"0.5g","Sodium":"1mg","Potassium":"162mg","Carbs":"10g","Protein":"1.4g","Vit. C":0.35,"Iron":0.03,"Vit. B6":0,"Magnesium":0.05,"Calcium":0.02}},{"crop":"Redcurrant","phosphorus":50,"potassium":200,"nitrogen":120,"nutrients":{"crop":"Redcurrant","Fat":"0.2g","Sodium":"1.1mg","Potassium":"308mg","Carbs":"14g","Protein":"1.5g","Vit. C":0.68,"Iron":0.08,"Vit. B6":0.06,"Magnesium":0.06,"Calcium":0.055}},{"crop":"Strawberry","phosphorus":50,"potassium":200,"nitrogen":60,"nutrients":{"crop":"Strawberry","Fat":"0.3g","Sodium":"1mg","Potassium":"153mg","Carbs":"8g","Protein":"0.7g","Vit. C":0.97,"Iron":0.02,"Vit. B6":0,"Magnesium":0.03,"Calcium":0.01}}],"Root vegetables":[{"crop":"Beetroot","phosphorus":90,"potassium":240,"nitrogen":290,"nutrients":{"crop":"Beetroot","Fat":"0.2g","Sodium":"78mg","Potassium":"325mg","Carbs":"10g","Protein":"1.6g","Vit. C":0.08,"Iron":0.04,"Vit. B6":0.05,"Magnesium":0.05,"Calcium":0.01}},{"crop":"Peppers","pests":["Cutworms"," aphids"," armyworms"," fruitworms"," flea beeetles"," corn borers"," hornworms"," whitflies"]},{"crop":"Tomatoes","pests":["Aphids"," Tomato Fruitworms"," Hornworms"," Leaf-footed Bugs"," Stink Bugs"," Flea Beetles"," Whiteflies"," Thrips"," Spider Mites"," Cutworms"]},{"crop":"Potatoes","pests":["black dot","black scurf","blackleg","brown rot","buckthorn-potato aphid","capsids","click beetles","Colorado beetle","common green capsid","common scab","cutworms","dry rot","field slug","gangrene","garden dart moth","garden slugs","glasshouse and potato aphid","keeled slugs","large yellow underwing moth","late blight","leaf drop streak","mild mosaic","mop top","PCN","peach-potato aphid","pink rot","potato aphid","potato capsid","potato cyst nematode, white","potato cyst nematode, yellow","potato leaf roll","potato tuber nematode","powdery scab","rattle","rugose mosaic","severe mosaic","silver scurf","skin spot","slugs","spraing","stem canker","tarnished plant bug","turnip moth","verticillium wilt","violet root rot","wart","watery wound rot","white-line dart moth","white-soled slugs","wireworms "]},{"crop":"Swede","phosphorus":90,"potassium":240,"nitrogen":135,"pests":["beet cyst nematode","brassica cyst nematode","cabbage aphid","cabbage root fly","club root","cruciferous flea beetle","cutworms","damping-off","diamond-back moth","flea beetles","garden dart moth"," green-veined white butterflylarge striped flea beetle","large white butterfly","large yellow underwing moth","light leaf spot","pigeon","powdery mildew","rape winter stem weevil","sclerotinia stem rot","small striped flea beetle","small white butterfly","swede midge","turnip flea beetle","turnip gall weevil","turnip moth","white-line dart moth","wirestem","wood pigeon"],"nutrients":{"crop":"Swede","Fat":"0.2g","Sodium":"12mg","Potassium":"305mg","Carbs":"9g","Protein":"1.1g","Vit. C":0.41,"Iron":0.02,"Vit. B6":0.05,"Magnesium":0.05,"Calcium":0.04}},{"crop":"Turnip","phosphorus":90,"potassium":240,"nitrogen":170,"pests":["beet cyst nematode","brassica cyst nematode","cabbage root fly","cruciferous flea beetle","cutworms","damping-off","diamond-back moth","flea beetles","garden dart moth","green-veined white butterfly","large striped flea beetle","large white butterfly","large yellow underwing moth","pigeon","powdery mildew","rape winter stem weevil","sclerotinia stem rot","small striped flea beetle","small white butterfly","swede midge","turnip flea beetle","turnip gall weevil","turnip mosaic","turnip moth","turnip yellow mosaic","white-line dart moth","wirestem","wood pigeon"],"nutrients":{"crop":"Turnip","Fat":"0.1g","Sodium":"67mg","Potassium":"191mg","Carbs":"6g","Protein":"0.9mg","Vit. C":0.35,"Iron":0.01,"Vit. B6":0.05,"Magnesium":0.02,"Calcium":0.03}},{"crop":"Parsnip","phosphorus":90,"potassium":240,"nitrogen":170,"pests":["canker","carrot fly","celery fly","celery leaf miner","cutworms","Docking disorder","garden dart moth","large yellow underwing moth","needle nematodes","parsnip mosaic","stem nematode","stubby-root nematodes","turnip moth","violet root rot","white rot","white-line dart moth","willow-carrot aphid"],"nutrients":{"crop":"Parsnip","Fat":"0.3g","Sodium":"10mg","Potassium":"375mg","Carbs":"18g","Protein":"1.2mg","Vit. C":0.28,"Iron":0.03,"Vit. B6":0.05,"Magnesium":0.07,"Calcium":0.03}},{"crop":"Carrot","phosphorus":90,"potassium":240,"nitrogen":100,"pests":["carrot cyst nematode","carrot fly","carrot motley dwarf","carrot mottle","carrot red leaf","cavity spot","cutworms","Docking disorder","field slug","garden dart moth","garden slugs","hare"],"nutrients":{"crop":"Carrot","Fat":"0.2g","Sodium":"69mg","Potassium":"320mg","Carbs":"10g","Protein":"0.9mg","Vit. C":0.09,"Iron":0.01,"Vit. B6":0.05,"Magnesium":0.03,"Calcium":0.03}},{"crop":"Onion","phosphorus":90,"potassium":230,"nitrogen":160,"pests":["bean seed flies","downy mildew","leaf rot","leek moth","neck rot","onion fly","onion thrips","onion yellow dwarf","smut","stem nematode","white rot","white tip"],"nutrients":{"crop":"Onion","Fat":"0.1g","Sodium":"4mg","Potassium":"146mg","Carbs":"9g","Protein":"1.1g","Vit. C":0.12,"Iron":0.01,"Vit. B6":0.05,"Magnesium":0.02,"Calcium":0.02}},{"crop":"Garlic","pests":["basal rot"," white rot"," downy mildew"," botrytis rot"," penicillium decay"]},{"crop":"Fodder beet","pests":["beet cyst nematode","beet flea beetle","beet fly","beet leaf miner","black bean aphid","blackfly","cabbage thrips","capsids","click beetles","common green capsid","crane flies","cutworms","daddy longlegs","field mouse","field slug","field thrips","flat millepede","garden dart moth","garden slugs","glasshouse and potato aphid","hare, brown","keeled slugs","large yellow underwing moth","leatherjackets","mangel flea beetle","mangel fly","mangold flea beetle","mangold fly","millepedes","mouse","partridge","peach-potato aphid","pheasant","potato aphid","potato capsid","pygmy beetle","pygmy mangold beetle","rabbit","rat, brown","red spider mite","silver y moth","skylark","slugs","spotted millepede","spotted snake millepede","springtails","stem nematode","symphylid, glasshouse","tarnished plant bug","turnip moth","two-spotted spider mite","white-line dart moth","white-soled slugs","wireworms","wood mouse"]},{"crop":"Celery","phosphorus":110,"potassium":380,"nitrogen":75,"pests":["carrot fly","carrot motley dwarf","carrot mottle","carrot red leaf","celery fly","celery leaf miner","cutworms","field slug","garden dart moth","garden slugs","keeled slugs","large yellow underwing moth","late blight","leaf spot","slugs","turnip moth","violet root rot","white-line dart moth","white-soled slugs","willow-carrot aphid"],"nutrients":{"crop":"Celery","Fat":"0.1g","Sodium":"32mg","Potassium":"104mg","Carbs":"1.2g","Protein":"0.3g","Vit. C":0.08,"Iron":0.17,"Vit. B6":0.046,"Magnesium":0.2,"Calcium":0.13}}],"Other":[{"crop":"Sweetcorn","phosphorus":80,"potassium":210,"nitrogen":200,"nutrients":{"crop":"Sweetcorn","Fat":"1.2g","Sodium":"15mg","Potassium":"270mg","Carbs":"19g","Protein":"3.2g","Vit. C":0.11,"Iron":0.02,"Vit. B6":0.05,"Magnesium":0.09,"Calcium":0}},{"crop":"Radish","phosphorus":80,"potassium":210,"nitrogen":100,"nutrients":{"crop":"Radish","Fat":"0.1g","Sodium":"39mg","Potassium":"233mg","Carbs":"3.4g","Protein":"0.7g","Vit. C":0.24,"Iron":0.01,"Vit. B6":0.05,"Magnesium":0.02,"Calcium":0.02}},{"crop":"Pumpkin","phosphorus":110,"potassium":125,"nitrogen":100,"nutrients":{"crop":"Pumpkin","Fat":"0.1g","Sodium":"1mg","Potassium":"340mg","Carbs":"7g","Protein":"1g","Vit. C":0.15,"Iron":0.04,"Vit. B6":0.05,"Magnesium":0.03,"Calcium":0.02}},{"crop":"Courgette","phosphorus":110,"potassium":125,"nitrogen":100,"nutrients":{"crop":"Courgette","Fat":"0.3g","Sodium":"8mg","Potassium":"261mg","Carbs":"3.1g","Protein":"1.2g","Vit. C":0.29,"Iron":0.02,"Vit. B6":0.1,"Magnesium":0.04,"Calcium":0.01}},{"crop":"Aubergine","pests":["American Serpentine Leafminer"," Aphids"," Armyworms"," Melon Thrips"," Silverleaf Whitefly"," Tomato Pinworm"]},{"crop":"Parsley","pests":["carrot fly","carrot motley dwarf","carrot mottle","carrot red leaf","celery fly","celery leaf miner","late blight","leaf spot","parsnip mosaic","violet root rot","willow-carrot aphid"]}]}}')},521:function(e,t,a){},522:function(e,t,a){},646:function(e,t,a){},653:function(e,t,a){},656:function(e,t,a){},659:function(e,t,a){},660:function(e,t,a){},661:function(e,t,a){},812:function(e,t,a){},813:function(e,t,a){},824:function(e,t,a){},825:function(e,t,a){},826:function(e,t,a){},827:function(e,t,a){},828:function(e,t,a){},829:function(e,t,a){},830:function(e,t,a){},831:function(e,t,a){var s={"./Grains-01.png":832,"./Oil-01.png":833,"./Other-01.png":834,"./Root vegetables-01.png":835,"./Soft fruits-01.png":836,"./Vegetables-01.png":837};function c(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}c.keys=function(){return Object.keys(s)},c.resolve=i,e.exports=c,c.id=831},832:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/Grains-01.6d747af3.png"},833:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/Oil-01.bf2d671a.png"},834:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/Other-01.d0da66c7.png"},835:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/Root vegetables-01.8390b8aa.png"},836:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/Soft fruits-01.ab2cfac3.png"},837:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/Vegetables-01.387314a6.png"},838:function(e){e.exports=JSON.parse('[{"crop":"Wheat flour","Fat":"1g","Sodium":"2mg","Potassium":"107mg","Carbs":"76g","Protein":"10g","Vit. C":0,"Iron":0.06,"Vit. B6":0,"Magnesium":0.05,"Calcium":0.01},{"crop":"Barley","Fat":"2.3g","Sodium":"12mg","Potassium":"452mg","Carbs":"73g","Protein":"12g","Vit. C":0,"Iron":0.19,"Vit. B6":0.15,"Magnesium":0.33,"Calcium":0.03},{"crop":"Oats","Fat":"5g","Sodium":"230mg","Potassium":"130mg","Carbs":"51g","Protein":"13g","Vit. C":0,"Iron":0.26,"Vit. B6":0.06,"Magnesium":0.39,"Calcium":0.05},{"crop":"Rye","Fat":"3.3g","Sodium":"603mg","Potassium":"166mg","Carbs":"48g","Protein":"9g","Vit. C":0,"Iron":0.15,"Vit. B6":0.05,"Magnesium":0.1,"Calcium":0.07},{"crop":"Triticale","Fat":"4g","Sodium":"9.6mg","Potassium":"637mg","Carbs":"138g","Protein":"25g","Vit. C":0,"Iron":0.27,"Vit. B6":0.2,"Magnesium":0.3,"Calcium":0.04},{"crop":"Rapeseed oil","Fat":"14g","Sodium":"0mg","Potassium":"0mg","Carbs":"0g","Protein":"0g","Vit. C":0,"Iron":0,"Vit. B6":0,"Magnesium":0,"Calcium":0},{"crop":"Linseed oil","Fat":"100g","Sodium":"0mg","Potassium":"813mg","Carbs":"0g","Protein":"0.1g","Vit. C":0,"Iron":0,"Vit. B6":0,"Magnesium":0,"Calcium":0},{"crop":"Sunflower seeds","Fat":"51g","Sodium":"9mg","Potassium":"645mg","Carbs":"20g","Protein":"21g","Vit. C":0.02,"Iron":0.29,"Vit. B6":0.65,"Magnesium":0.81,"Calcium":0.07},{"crop":"Peas","Fat":"0.2g","Sodium":"58mg","Potassium":"244mg","Carbs":"14g","Protein":"5g","Vit. C":0.66,"Iron":0.08,"Vit. B6":0.1,"Magnesium":0.08,"Calcium":0.02},{"crop":"Broad beans","Fat":"0.7g","Sodium":"25mg","Potassium":"332mg","Carbs":"18g","Protein":"8g","Vit. C":0.06,"Iron":0.08,"Vit. B6":0.05,"Magnesium":0.08,"Calcium":0.03},{"crop":"Runner peas","Fat":"0.4g","Sodium":"6mg","Potassium":"130mg","Carbs":"3.2g","Protein":"1.8g","Vit. C":0.27,"Iron":0.05,"Vit. B6":0.05,"Magnesium":0.06,"Calcium":0.03},{"crop":"Sprouts","Fat":"0.3g","Sodium":"25mg","Potassium":"389mg","Carbs":"9g","Protein":"3.4g","Vit. C":1.41,"Iron":0.07,"Vit. B6":0.1,"Magnesium":0.05,"Calcium":0.04},{"crop":"Cabbage","Fat":"0.1g","Sodium":"18mg","Potassium":"170mg","Carbs":"6g","Protein":"1.3g","Vit. C":0.6,"Iron":0.02,"Vit. B6":0.05,"Magnesium":0.03,"Calcium":0.04},{"crop":"Collards","Fat":"0.6g","Sodium":"17mg","Potassium":"213mg","Carbs":"5g","Protein":"3g","Vit. C":0.58,"Iron":0.02,"Vit. B6":0.1,"Magnesium":0.06,"Calcium":0.23},{"crop":"Cauliflower","Fat":"0.3g","Sodium":"30mg","Potassium":"299mg","Carbs":"5g","Protein":"1.9g","Vit. C":0.8,"Iron":0.02,"Vit. B6":0.1,"Magnesium":0.03,"Calcium":0.02},{"crop":"Calabrese","Fat":"0.3g","Sodium":"30mg","Potassium":"293mg","Carbs":"6g","Protein":"2.6g","Vit. C":0.84,"Iron":0.06,"Vit. B6":0.12,"Magnesium":0.27,"Calcium":0.02},{"crop":"Blackcurrant","Fat":"0g","Sodium":"25mg","Potassium":"332mg","Carbs":"31.1g","Protein":"0g","Vit. C":3.01,"Iron":0.195,"Vit. B6":0.04,"Magnesium":0.06,"Calcium":0.055},{"crop":"Gooseberry","Fat":"0.58g","Sodium":"1mg","Potassium":"198mg","Carbs":"15g","Protein":"1g","Vit. C":0.55,"Iron":0.04,"Vit. B6":0.07,"Magnesium":0.025,"Calcium":0.025},{"crop":"Raspberry","Fat":"0.7g","Sodium":"1mg","Potassium":"151mg","Carbs":"12g","Protein":"1.2g","Vit. C":0.43,"Iron":0.03,"Vit. B6":0.05,"Magnesium":0.05,"Calcium":0.02},{"crop":"Blackberry","Fat":"0.5g","Sodium":"1mg","Potassium":"162mg","Carbs":"10g","Protein":"1.4g","Vit. C":0.35,"Iron":0.03,"Vit. B6":0,"Magnesium":0.05,"Calcium":0.02},{"crop":"Redcurrant","Fat":"0.2g","Sodium":"1.1mg","Potassium":"308mg","Carbs":"14g","Protein":"1.5g","Vit. C":0.68,"Iron":0.08,"Vit. B6":0.06,"Magnesium":0.06,"Calcium":0.055},{"crop":"Strawberry","Fat":"0.3g","Sodium":"1mg","Potassium":"153mg","Carbs":"8g","Protein":"0.7g","Vit. C":0.97,"Iron":0.02,"Vit. B6":0,"Magnesium":0.03,"Calcium":0.01},{"crop":"Beetroot","Fat":"0.2g","Sodium":"78mg","Potassium":"325mg","Carbs":"10g","Protein":"1.6g","Vit. C":0.08,"Iron":0.04,"Vit. B6":0.05,"Magnesium":0.05,"Calcium":0.01},{"crop":"Swede","Fat":"0.2g","Sodium":"12mg","Potassium":"305mg","Carbs":"9g","Protein":"1.1g","Vit. C":0.41,"Iron":0.02,"Vit. B6":0.05,"Magnesium":0.05,"Calcium":0.04},{"crop":"Turnip","Fat":"0.1g","Sodium":"67mg","Potassium":"191mg","Carbs":"6g","Protein":"0.9mg","Vit. C":0.35,"Iron":0.01,"Vit. B6":0.05,"Magnesium":0.02,"Calcium":0.03},{"crop":"Parsnip","Fat":"0.3g","Sodium":"10mg","Potassium":"375mg","Carbs":"18g","Protein":"1.2mg","Vit. C":0.28,"Iron":0.03,"Vit. B6":0.05,"Magnesium":0.07,"Calcium":0.03},{"crop":"Carrot","Fat":"0.2g","Sodium":"69mg","Potassium":"320mg","Carbs":"10g","Protein":"0.9mg","Vit. C":0.09,"Iron":0.01,"Vit. B6":0.05,"Magnesium":0.03,"Calcium":0.03},{"crop":"Onion","Fat":"0.1g","Sodium":"4mg","Potassium":"146mg","Carbs":"9g","Protein":"1.1g","Vit. C":0.12,"Iron":0.01,"Vit. B6":0.05,"Magnesium":0.02,"Calcium":0.02},{"crop":"Leek","Fat":"0.3g","Sodium":"20mg","Potassium":"180mg","Carbs":"14g","Protein":"1.5g","Vit. C":0.2,"Iron":0.11,"Vit. B6":0.1,"Magnesium":0.07,"Calcium":0.05},{"crop":"Whole lettuce","Fat":"0.2g","Sodium":"28mg","Potassium":"194mg","Carbs":"2.9g","Protein":"1.4g","Vit. C":0.15,"Iron":0.04,"Vit. B6":0.05,"Magnesium":0.03,"Calcium":0.03},{"crop":"Sweetcorn","Fat":"1.2g","Sodium":"15mg","Potassium":"270mg","Carbs":"19g","Protein":"3.2g","Vit. C":0.11,"Iron":0.02,"Vit. B6":0.05,"Magnesium":0.09,"Calcium":0},{"crop":"Radish","Fat":"0.1g","Sodium":"39mg","Potassium":"233mg","Carbs":"3.4g","Protein":"0.7g","Vit. C":0.24,"Iron":0.01,"Vit. B6":0.05,"Magnesium":0.02,"Calcium":0.02},{"crop":"Pumpkin","Fat":"0.1g","Sodium":"1mg","Potassium":"340mg","Carbs":"7g","Protein":"1g","Vit. C":0.15,"Iron":0.04,"Vit. B6":0.05,"Magnesium":0.03,"Calcium":0.02},{"crop":"Courgette","Fat":"0.3g","Sodium":"8mg","Potassium":"261mg","Carbs":"3.1g","Protein":"1.2g","Vit. C":0.29,"Iron":0.02,"Vit. B6":0.1,"Magnesium":0.04,"Calcium":0.01},{"crop":"Celery","Fat":"0.1g","Sodium":"32mg","Potassium":"104mg","Carbs":"1.2g","Protein":"0.3g","Vit. C":0.08,"Iron":0.17,"Vit. B6":0.046,"Magnesium":0.2,"Calcium":0.13}]')},885:function(e,t,a){},904:function(e,t,a){},92:function(e,t,a){},936:function(e,t,a){"use strict";a.r(t);var s=a(2),c=a.n(s),i=a(30),r=a.n(i),n=(a(369),a(62)),o=a(29),l=(a(448),a(449),a(92),a(232),a(370),a.p+"static/media/WFTLogo.5d4e2951.png"),d=a(532),u=a(0);const b=e=>Object(u.jsxs)(d.a,{className:"mobile-style",children:[Object(u.jsx)("div",{className:"top",children:Object(u.jsx)("img",{className:"logo",src:l,alt:"IntelliDigest"})}),Object(u.jsx)("div",{className:"titles",children:Object(u.jsx)("h2",{children:e.subtitle})}),e.children]});var j=a(48),h=a(537),m=a(9),p=a(88);const g=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=c().firestore();i.collection("users").doc(e.uid).set({...e.profile},{merge:!0}).then((()=>i.collection("marketplace").doc(e.uid).set({...e.upload},{merge:!0}))).then((()=>{t({type:"CONSUMER_SUCCESS"})})).catch((e=>{console.log("err"),t({type:"CONSUMER_ERROR",err:e})}))},O=e=>(t,a,s)=>{let{getFirebase:c}=s;c().auth().sendPasswordResetEmail(e.email).then((()=>{t({type:"RESET_SUCCESS"})})).catch((e=>{t({type:"RESET_ERROR",err:e})}))},x=e=>(t,a,s)=>{let{getFirebase:c}=s;let i=p.a.initializeApp({apiKey:"AIzaSyDuu8Fpwa2gYlCKcL-LlN-uqH5seEJpk9w",authDomain:"itracker-development.firebaseapp.com",projectId:"itracker-development",storageBucket:"itracker-development.appspot.com",messagingSenderId:"57163396396",appId:"1:57163396396:web:dd800621173f5733a4a889"},"second");var r;i.auth().createUserWithEmailAndPassword(e.email,e.password).then((t=>{r=t.user.uid,c().firestore().collection(e.masterCollection).doc(e.uid).collection("sub_accounts").doc(r).set({email:e.email,name:e.firstName+" "+e.lastName,role:e.role})})).then((()=>{c().firestore().collection("users").doc(r).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0],email:e.email,buildingFunction:e.function,city:e.city,country:e.country,region:e.region,admin:e.uid,type:e.type,restaurantName:e.restaurantName})})).then((()=>{i.auth().currentUser.sendEmailVerification()})).then((()=>{i.auth().signOut()})).then((()=>{i.delete()})).then((()=>{t({type:"CREATE_SUBACCOUNT"})})).catch((e=>{t({type:"CREATE_SUBACCOUNT_ERROR",err:e})}))};var f=Object(m.b)((e=>({authError:e.auth.authError,auth:e.firebase.auth})),(e=>({signIn:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;c().auth().signInWithEmailAndPassword(a.email,a.password).then((()=>{e({type:"LOGIN_SUCCESS"})})).catch((t=>{e({type:"LOGIN_ERROR",err:t})}))}));var a}})))((function(e){const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(""),{authError:r}=e,[l,d]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{e.auth.uid&&d(!0)}),[e.auth.uid]),l?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsxs)(b,{subtitle:"Log In",children:[Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Email address"}),Object(u.jsx)(j.a.Control,{type:"email",placeholder:"Enter email",required:!0,onChange:e=>a(e.target.value)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Password"}),Object(u.jsx)(j.a.Control,{type:"password",placeholder:"Password",required:!0,onChange:e=>i(e.target.value)})]}),Object(u.jsxs)("div",{className:"signup-center subtitles row",children:[Object(u.jsx)("p",{children:"Don't have an account? "}),Object(u.jsxs)(o.b,{style:{color:"#AFBA15"},to:"/signup",children:["  ","Sign up"]})]}),Object(u.jsx)("div",{className:"signup-center subtitles row",children:Object(u.jsx)(o.b,{to:"/forgot-password",style:{color:"#AFBA15"},children:"Forgot your password?"})})]}),Object(u.jsx)("div",{className:"auth-error",children:r?Object(u.jsxs)("p",{children:[" ",r]}):null}),Object(u.jsx)(h.a,{style:{fontWeight:"700"},variant:"default",className:"signup-confirm",onClick:a=>{a.preventDefault(),function(){var a={email:t,password:c};e.signIn(a)}()},children:"Confirm"})]})})),y=(a(646),a(38),a(539)),v=a.n(y),w=a(540),S=a.n(w),C=a(542),k=a.n(C),N=a(544),E=a.n(N),T=a(545),_=a.n(T),D=a(546),F=a.n(D),R=a(547),P=a.n(R),I=a(548),M=a.n(I),A=a(549),W=a.n(A),L=a(550),B=a.n(L),G=a(551),U=a.n(G),Y=a(543),q=a.n(Y),H=a(552),V=a.n(H),z=a(541),$=a.n(z),K=a(538),J=a.n(K),Q=a(1075);function Z(e){return e.disabled?Object(u.jsx)(h.a,{variant:"default",className:["default-btn",`${e.styling}-btn`,"shadow-none"],disabled:!0,children:Object(u.jsx)("div",{className:"basic-title",children:e.text})}):Object(u.jsx)(h.a,{variant:"default",className:["default-btn",`${e.styling}-btn`,"shadow-none"],href:e.goTo,onClick:e.onClick,children:Object(u.jsx)("div",{className:"basic-title",children:e.text})})}function X(e){return Object(u.jsx)(h.a,{variant:"default",className:["sub-btn",`${e.styling}-btn`,"shadow-none"],href:e.goTo,onClick:e.onClick,disabled:e.disabled,children:Object(u.jsx)("div",{className:"basic-title",style:{color:"white"},children:e.text})})}function ee(e){let{onClick:t,title:a}=e;return Object(u.jsx)(h.a,{variant:"default",className:["add-btn","green-btn","shadow-none"],onClick:t,children:Object(u.jsx)("div",{children:Object(u.jsx)(J.a,{sx:{fontSize:30}})})})}function te(e){function t(){switch(e.icon){default:case"waste":return Object(u.jsx)(v.a,{sx:{fontSize:90}});case"chart":return Object(u.jsx)(S.a,{sx:{fontSize:90}});case"gift":return Object(u.jsx)($.a,{sx:{fontSize:90}});case"food":return Object(u.jsx)(k.a,{sx:{fontSize:90}});case"surplus":return Object(u.jsx)(q.a,{sx:{fontSize:90}});case"buy":return Object(u.jsx)(E.a,{sx:{fontSize:90}});case"info":return Object(u.jsx)(_.a,{sx:{fontSize:90}});case"world":return Object(u.jsx)(F.a,{sx:{fontSize:90}});case"book":return Object(u.jsx)(P.a,{sx:{fontSize:90}});case"plant":return Object(u.jsx)(M.a,{sx:{fontSize:90}});case"kitchen":return Object(u.jsx)(W.a,{sx:{fontSize:90}});case"product":return Object(u.jsx)(B.a,{sx:{fontSize:90}});case"my-products":return Object(u.jsx)(U.a,{sx:{fontSize:90}});case"notes":return Object(u.jsx)(V.a,{sx:{fontSize:90}})}}var a;return a=String(e.goTo).startsWith("/")?"_self":"_blank",Object(u.jsx)(u.Fragment,{children:e.title?Object(u.jsx)(Q.a,{placement:"bottom",arrow:!0,title:e.title,children:Object(u.jsx)(h.a,{variant:"default",className:["icon-btn",`${e.color}-btn`,"shadow-none"],href:e.goTo,onClick:e.onClick,target:a,disabled:e.disabled,children:Object(u.jsxs)("div",{children:[Object(u.jsx)(t,{}),e.label]})})}):Object(u.jsx)(h.a,{variant:"default",className:["icon-btn",`${e.color}-btn`],href:e.goTo,target:a,disabled:e.disabled,children:Object(u.jsxs)("div",{children:[Object(u.jsx)(t,{}),e.label]})})})}var ae=a.p+"static/media/peppers.65825e19.jpg";var se=Object(m.b)((e=>({auth:e.firebase.auth})),null)((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{className:"landing",src:ae,alt:"Four brightly coloured bell peppers arranged in a square."}),Object(u.jsx)("div",{className:"title",children:Object(u.jsx)("img",{src:l,alt:"World Food Tracker, empowering global food sustainability"})}),Object(u.jsxs)("div",{className:"buttons",children:[Object(u.jsx)(X,{styling:"blue",goTo:"/login",text:"Log In"}),Object(u.jsx)(X,{styling:"blue",goTo:"/signup",text:"Sign Up"}),Object(u.jsx)(X,{styling:"green",goTo:"/about-us",text:"About Us"})]})]})})),ce=a(1072),ie=a(1076),re=a(556),ne=a.n(re),oe=a(1056),le=a(1027);const de=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealDiary").doc(e.month).collection(e.day).add(e.upload).then((a=>{c().firestore().collection("marketplace").doc(n).collection("mealDiary").doc(e.month).collection(e.day).doc(a.id).set({id:a.id},{merge:!0}),t({type:"CREATE_MEAL",mealPlan:e})})).catch((e=>{t({type:"CREATE_MEAL_ERROR",err:e})}))},ue=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealPlanData").doc(e.month).collection(e.day).doc(e.id).set(e.upload,{merge:!0}).then((()=>t({type:"EDIT_MEAL",mealPlan:e}))).catch((e=>{t({type:"EDIT_MEAL_ERROR",err:e})}))};var be=a(114),je=a.n(be);const he=(e,t)=>{je()({title:e,message:t,backgroundTop:"white",backgroundBottom:"white",colorTop:"black",colorBottom:"black",closeButton:"X",duration:1e4})},me=(e,t)=>{je()({title:e,message:t,backgroundTop:"white",backgroundBottom:"white",colorTop:"black",colorBottom:"black",closeButton:"X",duration:3e4})},pe=e=>(t,a,s)=>{let{getFirestore:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}e.upload.item;c().collection("marketplace").doc(n).collection("inventory").add(e.upload).then((e=>{c().collection("marketplace").doc(n).collection("inventory").doc(e.id).set({id:e.id},{merge:!0}),t({type:"CREATE_INVENTORY_ITEM"})})).catch((e=>{t({type:"CREATE_INVENTORY_ITEM_ERROR",err:e})}))},ge=e=>(t,a,s)=>{let{getFirestore:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().collection("purchases").add(e.upload).then((a=>{c().collection("purchases").doc(a.id).set({id:a.id,uid:n},{merge:!0}),t({type:"ADD_PURCHASE_ITEM",data:e})})).catch((e=>{t({type:"ADD_PURCHASE_ITEM_ERROR",err:e})}))},Oe=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("inventory").doc(e.id).delete().then((()=>console.log("successfully deleted! "))).catch((e=>{t(console.log("Error removing document:",e))}))},xe=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("inventory").where("item","==",e.id).get().then((t=>{t.empty?me("Success..","Some Items in this meal was not found in inventory"):t.forEach((t=>{console.log("Document data:",t.data().item),t.ref.set({quantity:t.data().quantity-e.quantity},{merge:!0})}))})).catch((e=>{console.log("Error getting documents:",e)}))};var fe=Object(m.b)((e=>({data:e.data.getData})),(e=>({editPurchaseStatusFromUser:t=>e((e=>(t,a,s)=>{let{getFirestore:c}=s;c().collection("purchases").doc(e.refID).set({status:e.status},{merge:!0}).then((()=>t({type:"EDIT_PURCHASE",data:e}))).catch((e=>{t({type:"EDIT_PURCHASE_ERROR",err:e})}))})(t)),editPurchaseStatusOnUser:t=>e((e=>(t,a,s)=>{let{getFirestore:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().collection("marketplace").doc(n).collection("messages").doc(e.id).set({status:e.status},{merge:!0}).then((()=>t({type:"EDIT_PURCHASE_STATUS",payload:e}))).catch((e=>{t({type:"EDIT_PURCHASE_STATUS_ERROR",err:e})}))})(t))})))((function(e){const[t,a]=Object(s.useState)(!1),c=()=>a(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Bought Item",children:Object(u.jsx)(ie.a,{"aria-label":"Bought Item",sx:{ml:2},children:Object(u.jsx)(h.a,{variant:"outlined",color:"success",onClick:()=>a(!0),children:"Confirm"})})}),Object(u.jsxs)(oe.a,{show:t,onHide:c,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Confirm"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)("p",{children:Object(u.jsx)("h5",{children:"Accept and Process this Order?"})})}),Object(u.jsxs)(oe.a.Footer,{children:[Object(u.jsx)(h.a,{variant:"secondary",onClick:()=>{(async()=>{const t={refID:e.refID,id:e.id,status:"CONFIRMED"};e.editPurchaseStatusFromUser(t),e.editPurchaseStatusOnUser(t),console.log("what id",t.id),he("Success","You will be contacted shortly")})(),c()},children:"Yes"}),Object(u.jsx)(h.a,{variant:"secondary",onClick:c,children:"Cancel"})]})]})]})})),ye=a(1071),ve=a(1063);var we=Object(m.b)((e=>({info:e.mealPlan.purchaseInfo})),(e=>({getPurchaseInfo:t=>e(((e,t,a)=>{let{getFirebase:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().firestore().collection("marketplace").doc(r).collection("messages").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_PURCHASE_INFO",payload:a})})).catch((t=>{e({type:"GET_PURCHASE_INFO_ERROR",err:t})}))}))})))((function(e){const[t,a]=Object(s.useState)([]);return Object(s.useEffect)((()=>{e.getPurchaseInfo()}),[e.info]),Object(s.useEffect)((()=>{(async()=>{a([]),e.info.forEach((e=>{var t=e.id,s=e.cart,c=e.refID,i=e.status;a((e=>[...e,{cart:s,id:t,refID:c,status:i}]))}))})()}),[e.info]),Object(u.jsx)(u.Fragment,{children:t.length?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(ye.a,{children:t.map(((e,t)=>Object(u.jsx)(ve.a,{style:{alignItems:"flex-end"},children:Object(u.jsxs)(le.a,{striped:!0,bordered:!0,hover:!0,children:[Object(u.jsxs)("thead",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsxs)("h6",{children:[Object(u.jsx)("b",{children:"Order ID: "}),e.refID]}),Object(u.jsxs)("h6",{children:[Object(u.jsx)("b",{children:"Status: "}),e.status]})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"table-header",children:"Product"}),Object(u.jsx)("th",{className:"table-header",children:"Quantity"}),Object(u.jsx)("th",{className:"table-header",children:"Measure"}),Object(u.jsx)("th",{className:"table-header",children:"Price"}),Object(u.jsx)("th",{className:"table-header",children:"Supplier"})]})]}),Object(u.jsx)("tbody",{children:e.cart.map((e=>Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.data}),Object(u.jsx)("td",{children:e.quantity}),Object(u.jsx)("td",{children:e.measure}),e.price?Object(u.jsx)("td",{children:e.price}):Object(u.jsx)("td",{children:"0"}),e.supplier?Object(u.jsx)("td",{children:e.supplier}):Object(u.jsx)("td",{})]},`cart${t}`)))}),Object(u.jsx)("div",{className:"table-header",children:Object(u.jsx)(fe,{refID:e.refID,id:e.id})})]})},`item${t}`)))})}):Object(u.jsx)("div",{className:"empty basic-title-left",children:Object(u.jsx)("p",{children:"You dont have any Notifications :( "})})})}));function Se(e){let{show:t,setShow:a,forceUpdate:s}=e;return Object(u.jsxs)(oe.a,{show:t,onHide:()=>a(!1),size:"lg","aria-labelledby":"edit meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",children:"Orders"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(we,{})})]})}var Ce=function(e){const[t,a]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"View Orders",children:Object(u.jsx)(ie.a,{className:"edit","aria-label":"Edit",sx:{ml:2},onClick:()=>{a(!0)},children:Object(u.jsx)(ne.a,{fontSize:"inherit"})})}),Object(u.jsx)(Se,{show:t,setShow:a,cart:e.cart,id:e.id,uid:e.uid,forceUpdate:e.forceUpdate})]})};const ke=e=>Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"top",children:[Object(u.jsx)("div",{style:{width:"50%",paddingLeft:"1rem"},children:Object(u.jsx)(X,{styling:"green",goTo:e.goTo,text:"Back"})}),Object(u.jsx)("div",{className:"basic-title basic-lg",children:e.header}),Object(u.jsx)(Ce,{})]}),Object(u.jsx)(ce.a,{})]}),Object(u.jsx)(d.a,{className:"mobile-style",children:e.children})]}),Ne=e=>Object(u.jsx)(d.a,{className:"account-style",children:e.children});a(191);var Ee=a.p+"static/media/Food.69fcbfbd.jpg",Te=a.p+"static/media/Health.7cbca934.jpg",_e=a.p+"static/media/Environment.3a48bc88.jpg",De=a(557),Fe=a(254);function Re(){return Object(u.jsxs)(ke,{header:"About Us",goTo:"/landing",children:[Object(u.jsxs)("div",{className:"no-contrast",children:[Object(u.jsx)("h1",{className:"mt-2",children:"About the World Food Tracker"}),Object(u.jsx)("h5",{style:{fontWeight:"600"},children:"END FOOD WASTE | END HUNGER | END MALNUTRITION | IMPROVE LOCAL FOOD PRODUCTION"}),Object(u.jsx)("p",{children:"The World Food Tracker is a comprehensive application designed with the food system as a whole in mind, from farm to fork."}),Object(u.jsx)("p",{children:"As a circular food platform, the World Food Tracker is supporting individuals, households and businesses to develop a more sustainable relationship with food through a practical insight on the impact of food on health and environment."}),Object(u.jsx)("p",{children:"Let's help you plan to save our food, save our health, save our wealth and save our earth."})]}),Object(u.jsx)("div",{className:"breaker",children:Object(u.jsx)("img",{src:Ee,alt:""})}),Object(u.jsxs)("div",{className:"no-contrast",children:[Object(u.jsx)("h5",{style:{fontWeight:"600"},className:"mt-3",children:"FOOD"}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Want to keep a detailed meal plan?"})," The World Food Tracker is designed for you to get your meal planning to the next level."]}),Object(u.jsx)("p",{children:"With detailed information about every meal and its nutritional content, there is no better solution to meal planning than the World Food Tracker."}),Object(u.jsx)("p",{children:"Through the Plan to Save campaign, the platform also connects you with local farmers so you can source common ingredients directly."}),Object(u.jsx)("p",{children:"Keeping a long-term meal plan also helps the farmers with planning their production, which reduces the food that is wasted after harvest."})]}),Object(u.jsx)("div",{className:"breaker",children:Object(u.jsx)("img",{src:Te,alt:""})}),Object(u.jsxs)("div",{className:"no-contrast",children:[Object(u.jsx)("h5",{style:{fontWeight:"600"},className:"mt-3",children:"Health"}),Object(u.jsx)("p",{children:"The World Food Tracker helps individuals and households to live a healthier lifeand transition towards a healthier diet through support with meal planning."}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Want to plan and keep track of your nutritional intake?"})," Keeping track of your nutritional intake and seeing what you are lacking in your diet will help you make the changes you need to stay healthy."]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Eating in or eating out?"})," No worries. We have sustainable restaurants that source their food ingredients only from sustainable farmers to meet your needs and seamlessly update your meal plan."]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Are you an organisation recognised for leading the way in sustainable farming and food production practices?"})," ","Let us help you connect to the right customers."]})]}),Object(u.jsx)("div",{className:"breaker",children:Object(u.jsx)("img",{src:_e,alt:""})}),Object(u.jsxs)("div",{className:"no-contrast",children:[Object(u.jsx)("h5",{style:{fontWeight:"600"},className:"mt-3",children:"Environment"}),Object(u.jsx)("p",{children:"The World Food Tracker helps you keep track of your food waste."}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Curious about how much food is being wasted?"})," The World Food Tracker is designed to track waste such that the insight given to you or your organisation will help you to eliminate edible food waste and reduce inedible food waste. The World Food Tracker will also provide extra information about the greenhouse gas emissions of yor waste."]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Are you a food producer?"})," Sign up to the World Food Tracker today to help plan your food production with sustainability in mind while tracking and reducing your avoidable food loss."]})]}),Object(u.jsxs)("div",{className:"no-contrast",children:[Object(u.jsx)("h1",{className:"mt-3",children:"About IntelliDigest Ltd"}),Object(u.jsx)("p",{children:"Drawing on cutting edge research, training and consulting, our mission at IntelliDigest is to develop new, sustainable technologies, and create innovative solutions to address the sustainability challenges faced by food producers and governments globally."}),Object(u.jsx)("p",{children:"Eliminating edible food waste and repurposing inedible waste to climate friendly chemicals is at the core of everything we do. We believe that reducing food waste at food production, retail, and household level can provide numerous benefits for both the planet and our communities."}),Object(u.jsx)("p",{children:"Through our research and consulting facilities, IntelliDigest is continuously working on helping governments and the public understand the true scale of the food waste issue and the consequences of inadequate food waste handling. Advocating for increased awareness about measuring food waste inspired our Global Food Loss & Waste Tracker system, designed to allow households to monitor their efforts and save money through reducing food waste."})]}),Object(u.jsxs)(De.a,{style:{justifyContent:"center"},className:"mt-3",children:[Object(u.jsx)(Fe.a,{style:{width:"50%",justifyContent:"center",display:"flex"},children:Object(u.jsx)(X,{styling:"blue",goTo:"/login",text:"Log In"})}),Object(u.jsx)(Fe.a,{style:{width:"50%",justifyContent:"center",display:"flex"},children:Object(u.jsx)(X,{styling:"blue",goTo:"/signup",text:"Sign Up"})})]})]})}var Pe=a(61),Ie=a(1069),Me=a(558),Ae=a.n(Me),We=a(49);const Le=Pe.a.div`
  .card {
    margin-top: 5px;
    color: rgb(59, 59, 59);
    background-color: rgb(238, 238, 238);
    border: 1px solid rgb(77, 109, 77);

    &:hover {
      background-color: rgb(207, 207, 207);
    }
  }

  .card-body {
  }

  @media (max-width: 1400px) {
    .details p {
      font-size: 11px;
    }
  }
`;var Be=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,user:e.firebase.profile,profile:e.firebase.profile}))))((function(e){const{profile:t}=e,[a,c]=Object(s.useState)(e.auth.email),[i,r]=Object(s.useState)(t.firstName+" "+t.lastName);return Object(u.jsxs)(ke,{header:"Contact Us",goTo:"/settings",children:[Object(u.jsxs)("div",{className:"contact",children:[Object(u.jsx)("i",{className:"fa fa-group contact-logo"}),Object(u.jsx)("div",{className:"contact-text-layout",children:Object(u.jsx)("h1",{children:"If you have any questions regarding your experience of using the Global Food Loss & Waste Tracker, please complete the contact form below. We aim to respond to you via e-mail as soon as possible."})})]}),Object(u.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),Ae.a.sendForm(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_EMAIL_SERVICE,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_EMAIL_TEMPLATE,e.target,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_EMAIL_ID).then((e=>{alert("Your Message has been sent successfully!")}),(e=>{alert("There has been an error while sending your message. Please refresh the page and try again.")})),e.target.reset()},children:[Object(u.jsxs)(j.a.Row,{children:[Object(u.jsx)(j.a.Group,{as:Fe.a,children:Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Name",id:"name",name:"name",onChange:e=>r(e.target.value),value:i,required:!0})}),Object(u.jsx)(j.a.Group,{as:Fe.a,children:Object(u.jsx)(j.a.Control,{type:"email",placeholder:"Email",id:"email",name:"email",onChange:e=>c(e.target.value),value:a,required:!0})})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{placeholder:"Subject",id:"subject",name:"subject",required:!0})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{as:"textarea",rows:6,placeholder:"Message",id:"message",name:"message",required:!0})}),Object(u.jsx)(j.a.Group,{controlId:"formActions",children:Object(u.jsx)(h.a,{variant:"dark",type:"submit",children:"Submit"})})]}),Object(u.jsx)("div",{className:"details",children:Object(u.jsx)("h1",{className:"more-details-header",children:"More Contact Details"})}),Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)(Le,{children:Object(u.jsx)(Ie.a,{onClick:()=>{window.open("tel:03332420822")},children:Object(u.jsxs)(Ie.a.Body,{children:[Object(u.jsx)(Ie.a.Title,{children:"Telephone"}),Object(u.jsxs)(Ie.a.Text,{children:[Object(u.jsx)("i",{className:"fa fa-phone contact-footer-icon"}),Object(u.jsx)("p",{children:"0333 242 0822"})]})]})})})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(Le,{children:Object(u.jsx)(Ie.a,{onClick:()=>{window.open("mailto:m.driscoll@intellidigest.com?subject=Subject&body=Body%20goes%20here")},children:Object(u.jsxs)(Ie.a.Body,{children:[Object(u.jsx)(Ie.a.Title,{children:"Email"}),Object(u.jsxs)(Ie.a.Text,{children:[Object(u.jsx)("i",{className:"fa fa-envelope-o contact-footer-icon"}),Object(u.jsx)("p",{children:"INFO@INTELLIDIGEST.COM"})]})]})})})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(Le,{children:Object(u.jsx)(Ie.a,{children:Object(u.jsxs)(Ie.a.Body,{children:[Object(u.jsx)(Ie.a.Title,{children:"Address"}),Object(u.jsxs)(Ie.a.Text,{children:[Object(u.jsx)("i",{className:"fa fa-location-arrow contact-footer-icon"}),Object(u.jsx)("p",{children:"Edinburgh Business School, Heriot Watt University, Currie, EH14 4AS"})]})]})})})})]})]})}));a(653);var Ge=()=>Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"homepage-contanier",children:Object(u.jsxs)("div",{className:"homepage-main",children:[Object(u.jsx)("img",{src:"Green.png",alt:"logo",className:"logo-btn"}),Object(u.jsx)("h1",{children:"Welcome to Intellidigest Consulting"}),Object(u.jsx)("p",{children:"Together we would deliver a more suitable food system"}),Object(u.jsxs)("div",{className:"home-btn",children:[Object(u.jsx)("button",{children:Object(u.jsx)(o.b,{style:{color:"white",textDecoration:"none"},to:"/consultants/question2",children:"Register"})}),Object(u.jsx)("button",{children:Object(u.jsx)(o.b,{style:{color:"white",textDecoration:"none"},to:"/consultant-login",children:"Login"})})]})]})})}),Ue=(a(452),a(182));var Ye=a(536),qe=a(353);var He=Object(m.b)(null,(e=>({createExample:t=>e((e=>(t,a,s,c)=>{let{getFirestore:i}=s,{getFirebase:r}=c;const n=a().firebase.profile;a().firebase.auth.uid;switch(n.type){case"business_admin":case"academic_admin":case"farm_admin":case"household_admin":default:break;case"business_sub":case"academic_sub":case"farm_sub":case"household_sub":n.admin}i().collection("consultants").add(e).then((()=>{t({type:"CREATE-DATA"})})).catch((e=>{t({type:"CREATE-DATA-ERROR"})}));const o=r().firestore();r().auth().createUserWithEmailAndPassword(e.email,e.password).then((t=>{o.collection("consultants").doc(t.user.uid).set({fullName:e.fullName,email:e.email,password:e.password})}))})(t))})))((e=>{const[t,a]=Object(s.useState)(!1),[c,i]=Object(s.useState)("password"),[r,o]=Object(s.useState)({fullName:"",email:"",urlLink:"",experience:"",expertise:"",password:"",consultantVisit:"",summary:""}),l=Object(n.g)(),d=Object(s.useRef)();return Object(u.jsx)("div",{className:"question-contanier",children:Object(u.jsxs)("section",{style:{height:"auto"},className:"question-main",children:[Object(u.jsxs)("header",{className:"logo-header",children:[Object(u.jsx)("img",{src:"/green.png",alt:"logo",className:"logo1-btn"}),Object(u.jsx)("p",{children:"Become a Consultant with us."})]}),Object(u.jsxs)(j.a,{ref:d,style:{marginTop:"180px"},onSubmit:s=>{s.preventDefault(),function(){var t={...r};e.createExample(t),a(!0)}(),t?l.push(""):l.push("/consultants/onboard"),qe.a.sendForm("service_id","template_q2mtocl",d.current,"user_Yh6fJKoLLp3ZNYYieHO3r").then((e=>{console.log(e.text)}),(e=>{console.log(e.text)}))},children:[Object(u.jsxs)(j.a.Group,{controlId:"formBasicName",className:"form-group",children:[Object(u.jsxs)(j.a.Label,{className:"form-label",children:["1. Full Name",Object(u.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(u.jsx)(j.a.Control,{type:"text",name:"name",onChange:e=>o({...r,fullName:e.target.value}),className:"form-control",required:!0})]}),Object(u.jsxs)(j.a.Group,{controlId:"formBasicEmail",className:"form-group",children:[Object(u.jsxs)(j.a.Label,{className:"form-label",children:["2. Email",Object(u.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(u.jsx)(j.a.Control,{type:"email",name:"email",className:"form-control",onChange:e=>o({...r,email:e.target.value}),required:!0})]}),Object(u.jsxs)(j.a.Group,{controlId:"formBasicPassword",className:"form-group",children:[Object(u.jsxs)(j.a.Label,{className:"form-label",children:["3. Password",Object(u.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(u.jsx)(j.a.Control,{type:c,className:"form-control",onChange:e=>o({...r,password:e.target.value}),required:!0}),"password"==c?Object(u.jsx)(Ue.c,{className:"eye-style",onClick:()=>i("text")}):Object(u.jsx)(Ue.b,{className:"eye-style",onClick:()=>i("password")})]}),Object(u.jsxs)(j.a.Group,{controlId:"formBasicUrl",className:"form-group",children:[Object(u.jsxs)(j.a.Label,{className:"form-label",children:["4. Website Url(social media link)",Object(u.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(u.jsx)(j.a.Control,{type:"text",className:"form-control",onChange:e=>o({...r,urlLink:e.target.value}),required:!0})]}),Object(u.jsxs)(j.a.Group,{controlId:"formBasicText",className:"form-group",children:[Object(u.jsxs)(j.a.Label,{className:"form-label1",children:[" ","5. How Long have you been in business?",Object(u.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(u.jsx)(j.a.Control,{type:"text",className:"form-control",onChange:e=>o({...r,experience:e.target.value}),required:!0})]}),Object(u.jsxs)(j.a.Group,{className:"form-group",children:[Object(u.jsxs)(j.a.Label,{className:"form-label",children:["6. Field of Expertise",Object(u.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(u.jsxs)(j.a.Control,{as:"select",className:"form-control",onChange:e=>o({...r,expertise:e.target.value}),required:!0,children:[Object(u.jsx)("option",{children:"Select"}),Object(u.jsx)("option",{children:"Dietician"}),Object(u.jsx)("option",{children:"Nutrition"}),Object(u.jsx)("option",{children:"Food and Beverage"}),Object(u.jsx)("option",{children:"Food Safety"}),Object(u.jsx)("option",{children:"Sustainable Food Packaging"}),Object(u.jsx)("option",{children:"Aquaculture"}),Object(u.jsx)("option",{children:"Horticulture"}),Object(u.jsx)("option",{children:"Agro-Feed"}),Object(u.jsx)("option",{children:"Account and Legal"}),Object(u.jsx)("option",{children:"Supply Chain"})]})]}),Object(u.jsxs)(j.a.Group,{className:"form-group  different",children:[Object(u.jsxs)(j.a.Label,{children:["6. Service Charge (hourly rate)",Object(u.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(u.jsx)(Ye.a,{className:"form-control  different",type:"text",placeholder:"Phone Call",disabled:!0}),Object(u.jsx)("span",{className:"fixed-service-money",children:"$100"}),Object(u.jsx)(Ye.a,{className:"form-control  different",type:"text",placeholder:"Written Feedback",disabled:!0}),Object(u.jsx)("span",{className:"fixed-service-money",children:"$60"}),Object(u.jsx)(Ye.a,{className:"form-control  different",type:"text",placeholder:"Online Meeting",disabled:!0}),Object(u.jsx)("span",{className:"fixed-service-money",children:"$100"}),Object(u.jsx)(Ye.a,{className:"form-control  different",type:"text",placeholder:"In-person visit to Consultant",disabled:!0}),Object(u.jsx)("span",{className:"fixed-service-money",children:"$100"}),Object(u.jsx)(Ye.a,{type:"text",placeholder:"Consultant Visit to Client hourly charge",className:"form-control",onChange:e=>o({...r,consultantVisit:e.target.value}),required:!0})]}),Object(u.jsxs)(j.a.Group,{controlId:"formBasicSummary",className:"form-group",children:[Object(u.jsxs)(j.a.Label,{className:"form-label",children:["8. Brief Summary of your Expertise/Key areas in the Food System.",Object(u.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(u.jsx)(j.a.Control,{as:"textarea",rows:4,type:"text",onChange:e=>o({...r,summary:e.target.value}),required:!0})]}),Object(u.jsxs)(j.a.Group,{controlId:"formBasicOptional",className:"form-group",children:[Object(u.jsx)(j.a.Label,{className:"form-label",children:"9. Any other thing you would like to share with us ?(optional)"}),Object(u.jsx)(j.a.Control,{as:"textarea",rows:4,type:"text"})]}),Object(u.jsx)("button",{className:"question2-btn",type:"submit",value:"submit",children:"Submit"})]})]})})}));var Ve=()=>{const e=Object(n.g)();return Object(u.jsx)("div",{className:"question-contanier",children:Object(u.jsxs)("section",{className:"question-subcontanier",children:[Object(u.jsxs)("header",{className:"logo-header",children:[Object(u.jsx)("img",{src:"/green.png",alt:"logo",className:"logo1-btn"}),Object(u.jsx)("p",{children:"Become a Consultant with us."})]}),Object(u.jsxs)("div",{className:"onboard-message",children:[Object(u.jsx)("h4",{style:{padding:"50px"},children:"Congrats. You have successfully signed up as a consultant with us. You will be hearing from us soon."}),Object(u.jsx)("button",{style:{width:"240px"},className:"question2-btn",onClick:()=>e.push("/consultants"),children:"Go back to Home page"})]})]})})};var ze=Object(m.b)((e=>({authError:e.auth.authError,auth:e.firebase.auth})),(e=>({signIn:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;c().auth().signInWithEmailAndPassword(a.email,a.password).then((()=>{e({type:"LOGIN_CONSULTANT_SUCCESS"})})).catch((t=>{e({type:"LOGIN_CONSULTANT_ERROR",err:t})}))}));var a}})))((e=>{const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)("");const{authError:r}=e;return Object(u.jsxs)(b,{subtitle:"Log In to your Consultant Account",children:[Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Email address"}),Object(u.jsx)(j.a.Control,{type:"email",placeholder:"Enter email",required:!0,onChange:e=>a(e.target.value)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Password"}),Object(u.jsx)(j.a.Control,{type:"password",placeholder:"Password",required:!0,onChange:e=>i(e.target.value)})]}),Object(u.jsx)("div",{className:"signup-center subtitles row",children:Object(u.jsx)(o.b,{to:"/forgot-password",style:{color:"#AFBA15"},children:"Forgot your password?"})})]}),Object(u.jsx)("div",{className:"auth-error",children:r?Object(u.jsxs)("p",{children:[" ",r]}):null}),Object(u.jsx)(h.a,{style:{fontWeight:"700"},variant:"default",className:"signup-confirm",onClick:a=>{a.preventDefault(),function(){var a={email:t,password:c};e.signIn(a)}()},children:"Confirm"})]})})),$e=(a(453),a(161)),Ke=a(562),Je=(a(942),a(654),a(943),a(941),{apiKey:"AIzaSyDuu8Fpwa2gYlCKcL-LlN-uqH5seEJpk9w",authDomain:"itracker-development.firebaseapp.com",projectId:"itracker-development",storageBucket:"itracker-development.appspot.com",messagingSenderId:"57163396396",appId:"1:57163396396:web:dd800621173f5733a4a889"});p.a.initializeApp(Je);const Qe=p.a.storage(),Ze=p.a.messaging.isSupported()?p.a.messaging():null;var Xe=Je;p.a.auth;const et=p.a.firestore();var tt=e=>{let{setShow:t}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"overlay-contanier",onClick:()=>t(!1)}),Object(u.jsxs)("section",{className:"modal-contanier",onClick:()=>t(!1),children:[Object(u.jsx)("h4",{children:"Profile photo"}),Object(u.jsxs)("div",{className:"modal-icons-contanier",children:[Object(u.jsxs)("div",{className:"bottom-icon1",children:[Object(u.jsx)($e.b,{style:{fontSize:"20px",color:"#0c0847",marginTop:"10px"}}),Object(u.jsx)("p",{style:{marginTop:"20px"},children:"Camera"})]}),Object(u.jsxs)("div",{className:"bottom-icon1",children:[Object(u.jsx)($e.c,{style:{fontSize:"20px",color:"#0c0847",marginTop:"10px"}}),Object(u.jsx)("p",{style:{marginTop:"20px"},children:"Gallery"})]})]})]})]})};var at=e=>{let{setSetting:t}=e;return Object(u.jsxs)("div",{style:{height:"400px",width:"400px",transition:"2s ease in all"},children:[Object(u.jsx)("h1",{children:"ConsultantSetting "}),Object(u.jsx)("button",{onClick:function(){t(!1)},children:"hello"})]})};var st=()=>{const[e,t]=Object(s.useState)("https://thumbs.dreamstime.com/b/default-avatar-profile-trendy-style-social-media-user-icon-187599373.jpg"),[a,c]=Object(s.useState)(!1),[i,r]=Object(s.useState)(!1);return Object(u.jsx)("div",{className:"login-contanier",children:Object(u.jsxs)("main",{className:"login-main",children:[Object(u.jsxs)("div",{className:"profile-main",children:[Object(u.jsx)("div",{className:"settings-icon-contanier",children:Object(u.jsx)($e.d,{className:"settings-icon"})}),Object(u.jsx)("img",{className:"profile-contanier",src:e})]}),Object(u.jsx)("div",{className:"profile-update",children:Object(u.jsx)($e.b,{style:{marginTop:"10px",textAlign:"center"},onClick:()=>c(!0)})}),Object(u.jsxs)("section",{className:"login-text",children:[Object(u.jsx)("h3",{children:"Dorathy Williams"}),Object(u.jsx)("p",{children:"Nutritionist"})]}),Object(u.jsxs)("section",{className:"feature-buttons",children:[Object(u.jsxs)("div",{style:{backgroundColor:"#afba15"},children:[Object(u.jsx)(Ue.d,{className:"icons-style"}),Object(u.jsx)("p",{style:{padding:"9px"},children:"Potential Customers"})]}),Object(u.jsxs)("div",{style:{backgroundColor:"#0c0847"},children:[Object(u.jsx)($e.a,{className:"icons-style"}),Object(u.jsx)("p",{style:{padding:"9px"},children:"Confirm Meetings"})]}),Object(u.jsxs)("div",{style:{backgroundColor:"#afba15"},children:[Object(u.jsx)(Ke.a,{className:"icons-style"}),Object(u.jsx)("p",{style:{padding:"9px"},children:"Customer Records"})]}),Object(u.jsxs)("div",{style:{backgroundColor:"#0c0847"},children:[Object(u.jsx)(Ue.a,{className:"icons-style"}),Object(u.jsx)("p",{style:{padding:"9px"},children:"Connect"})]})]}),a&&Object(u.jsx)(tt,{setShow:c}),i&&Object(u.jsx)(at,{setting:r})]})})},ct=(a(656),a(1028)),it=a(597);function rt(e){let t;return t=e.items.map(((t,a)=>"/"===t?Object(u.jsx)(it.a.Divider,{},a):Object(u.jsx)(it.a.Item,{id:e.id,eventKey:t,children:t},a))),e.disabled?Object(u.jsx)(ct.a,{title:e.data,onSelect:e.function,className:["dropdown center",e.styling],variant:"default",disabled:!0,drop:"down",children:t}):Object(u.jsx)(ct.a,{title:e.data,onSelect:e.function,className:["dropdown center",e.styling],variant:"default",drop:"down",children:t})}function nt(e){let t;return t=e.items.map(((t,a)=>"/"===t?Object(u.jsx)("option",{disabled:!0,children:"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500"}):Object(u.jsx)("option",{id:e.id,children:t},a))),Object(u.jsxs)(j.a.Control,{id:e.id,disabled:e.disabled,onChange:e.function,as:"select",value:e.value,children:[Object(u.jsx)("option",{hidden:!0,value:!0,style:{color:"rgba(0, 0, 0, 0.5)"},children:e.placeholder},"blankChoice"),t]})}var ot=a(1073),lt=a(1074),dt=a(226),ut=a.n(dt),bt=a(260),jt=a.n(bt),ht=a(261),mt=a.n(ht),pt=a(169),gt=a.n(pt);const Ot=e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection("data").doc(e.uid).set({user:e.name,email:e.email}).then((()=>{t({type:"START_DATA"})})).catch((e=>{t({type:"START_DATA_ERROR",err:e})}))},xt=e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection(e.masterCollection).doc(e.uid).collection(e.collection).add(e.upload).then((()=>{t({type:"CREATE_DATA"})})).catch((e=>{t({type:"CREATE_DATA_ERROR",err:e})}))},ft=e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection(e.masterCollection).doc(e.uid).collection(e.collection).add(e.upload).then((()=>{t({type:"CREATE_DATA"})})).catch((e=>{t({type:"CREATE_DATA_ERROR",err:e})}))},yt=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=c().firestore.FieldValue.increment(e.upload.foodWasteWeight);console.log("catch"),c().firestore().collection(e.masterCollection).doc(e.uid).set({...e.upload,foodWasteWeight:i},{merge:!0}).then((()=>{t({type:"CREATE_DATA"})})).catch((e=>{t({type:"CREATE_DATA_ERROR",err:e})}))},vt=e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection(e.masterCollection).doc(e.uid).collection(e.collection).get().then((e=>{const a=[];e.forEach((e=>{a.push(e.data())})),t({type:"GET_DATA",payload:a})})).catch((e=>{t({type:"GET_DATA_ERROR",err:e})}))};var wt=a(168),St=a.n(wt);const Ct=[{name:"Afghanistan",code:"AF"},{name:"Alland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"British Virgin Islands",code:"VG"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo, Democratic Republic of the",code:"CG"},{name:"Congo, Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote d'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Curacao",code:"CW"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea-Bissau",code:"GW"},{name:"Guinea",code:"GN"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and McDonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kosovo",code:"XK"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, the Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestine, State of",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Barthelemy",code:"BL"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Martin (French part)",code:"MF"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Sint Maarten (Dutch part)",code:"SX"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"South Sudan",code:"SS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United Republic of Tanzania",code:"TZ"},{name:"United States",code:"US"},{name:"Uruguay",code:"UY"},{name:"US Virgin Islands",code:"VI"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],kt=["Asia","Africa","Australia","Europe","North America","South America"],Nt=Ct.map((e=>e.name));a(658);const Et=e=>Object(u.jsx)("div",{children:Object(u.jsx)(Rt,{children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Row,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Name"}),Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Enter name",defaultValue:e.firstName,required:!0,onChange:t=>e.setFirstName(t.target.value)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Surname"}),Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Enter surname",defaultValue:e.lastName,required:!0,onChange:t=>e.setLastName(t.target.value)})]})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Email address"}),Object(u.jsx)(j.a.Control,{type:"email",placeholder:"Enter email",defaultValue:e.email,required:!0,onChange:t=>e.setEmail(t.target.value)}),Object(u.jsx)(j.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Password"}),Object(u.jsx)(j.a.Control,{type:"password",placeholder:"Password",defaultValue:e.password,required:!0,onChange:t=>e.setPassword(t.target.value)})]}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(h.a,{type:"submit",variant:"default",className:"signup-btn",onClick:t=>{t.preventDefault(),e.setStage(2)},children:"Next"})})]})})}),Tt=e=>Object(u.jsxs)("div",{children:[Object(u.jsx)(Rt,{children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Town"}),Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Town",defaultValue:e.town,required:!0,onChange:t=>{e.setTown(t.target.value)}})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Country"}),Object(u.jsx)(nt,{id:"country",function:t=>{e.setCountry(t.target.value)},value:e.country,placeholder:"Please Select a Country",items:Nt})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Region"}),Object(u.jsx)(nt,{id:"region",function:t=>{e.setRegion(t.target.value)},value:e.region,placeholder:"Please Select a Region",items:kt})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"What kind of account are you creating?"}),Object(u.jsx)(nt,{id:"buildingFunction",function:t=>{e.setBuildingFunction(t.target.value)},value:e.buildingFunction,placeholder:"Please Select an Account Type",items:["Households","Personal","Hospitals","Schools","Hotels","Offices","Restaurants","Shop/Supermarket","Farm","Recreational Centers","Other"]})]})]})}),Object(u.jsx)("div",{className:"signup-center",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)(h.a,{variant:"default",className:"signup-btn",onClick:t=>{t.preventDefault(),e.setStage(1)},children:"Back"}),Object(u.jsx)(h.a,{variant:"default",className:"signup-btn",onClick:t=>{t.preventDefault(),"Restaurants"==e.buildingFunction?e.setStage(4):e.setStage(3)},children:"Next"})]})})]}),_t=e=>Object(u.jsx)("div",{children:Object(u.jsx)(Rt,{children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Restaurant name"}),Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Restaurant name",defaultValue:e.restaurantName,required:!0,onChange:t=>{e.setRestaurantName(t.target.value)}})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Please input the local authority which verifies your restuarant's health and safety status (e.g. the Food Standards Agency for Scotland)."}),Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Regulatory body",defaultValue:e.regulatoryBody,required:!0,onChange:t=>{e.setRegulatoryBody(t.target.value)}})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Please input the ID this regulatory body has provided you with. "}),Object(u.jsx)(j.a.Control,{type:"text",placeholder:"ID",defaultValue:e.regulatoryBodyID,required:!0,onChange:t=>{e.setRegulatoryBodyID(t.target.value)}})]}),Object(u.jsx)("div",{className:"signup-center",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)(h.a,{variant:"default",className:"signup-btn",onClick:t=>{t.preventDefault(),e.setStage(2)},children:"Back"}),Object(u.jsx)(h.a,{variant:"default",className:"signup-btn",onClick:t=>{t.preventDefault(),"Restaurants"==e.buildingFunction?e.setStage(5):e.setStage(2)},children:"Next"})]})})]})})}),Dt=e=>Object(u.jsx)("div",{children:Object(u.jsx)(Rt,{children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"What cuisine does your kitchen offer?"}),Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Cuisine",defaultValue:e.cuisine,required:!0,onChange:t=>{e.setCuisine(t.target.value)}})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Please provide a brief description of your restaurant for customers to see."}),Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Description",defaultValue:e.restaurantDescription,required:!0,onChange:t=>{e.setRestaurantDescription(t.target.value)}})]}),Object(u.jsx)("div",{className:"signup-center",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)(h.a,{variant:"default",className:"signup-btn",onClick:t=>{t.preventDefault(),e.setStage(4)},children:"Back"}),Object(u.jsx)(h.a,{variant:"default",className:"signup-btn",onClick:t=>{t.preventDefault(),e.buildingFunction,e.setStage(3)},children:"Next"})]})})]})})}),Ft=e=>"Restaurants"==e.buildingFunction?Object(u.jsx)("div",{children:Object(u.jsxs)(ye.a,{children:[Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(ut.a,{})}),Object(u.jsxs)(lt.a,{children:[e.firstName," ",e.lastName]})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(jt.a,{})}),Object(u.jsx)(lt.a,{children:e.email})]}),Object(u.jsxs)(ve.a,{className:"space-between",children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(mt.a,{})}),Object(u.jsxs)(lt.a,{children:[e.town,", ",e.country,", ",e.region]})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(gt.a,{})}),Object(u.jsx)(lt.a,{children:e.buildingFunction})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(gt.a,{})}),Object(u.jsx)(lt.a,{children:e.restaurantName})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(gt.a,{})}),Object(u.jsx)(lt.a,{children:e.regulatoryBody})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(gt.a,{})}),Object(u.jsx)(lt.a,{children:e.regulatoryBodyID})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(gt.a,{})}),Object(u.jsx)(lt.a,{children:e.cuisine})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(gt.a,{})}),Object(u.jsx)(lt.a,{children:e.restaurantDescription})]})]})}):Object(u.jsx)("div",{children:Object(u.jsxs)(ye.a,{children:[Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(ut.a,{})}),Object(u.jsxs)(lt.a,{children:[e.firstName," ",e.lastName]})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(jt.a,{})}),Object(u.jsx)(lt.a,{children:e.email})]}),Object(u.jsxs)(ve.a,{className:"space-between",children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(mt.a,{})}),Object(u.jsxs)(lt.a,{children:[e.town,", ",e.country,", ",e.region]})]}),Object(u.jsxs)(ve.a,{children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(gt.a,{})}),Object(u.jsx)(lt.a,{children:e.buildingFunction})]})]})}),Rt=Pe.a.div`
  form {
    width: 80%;
    margin: auto;
    padding: 10px;
  }

  input {
    border: 1px solid #62680a;
  }

  .btn-dark {
    background-color: #071850;
    color: whitesmoke;
    border: 1px solid #03091d;
    float: right;

    &:hover {
      background-color: #030d2b;
      border: 1px solid #03091d;
    }

    &:active {
      background-color: #030d2b;
      border: 1px solid #03091d;
    }
  }
`;var Pt=Object(m.b)((e=>({auth:e.firebase.auth,authError:e.auth.authError})),(e=>({signUp:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;var i;switch(e.function){case"Hospitals":case"Hotels":case"Offices":case"Shop/Supermarket":case"Recreational Centers":case"Business":i="business_admin";break;case"Restaurants":i="restaurant_admin";break;case"Schools":i="academic_admin";break;case"Farm":i="farm_admin";break;case"Households":case"Personal":i="household_admin";break;default:i="user"}const r=c().firestore(),n=c();n.auth().createUserWithEmailAndPassword(e.email,e.password).then((t=>{var a;r.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0],email:e.email,buildingFunction:e.function,city:e.city,country:e.country,region:e.region,restaurantName:e.restaurantName,regulatoryBody:e.regulatoryBody,regulatoryBodyID:e.regulatoryBodyID,cuisine:e.cuisine,restaurantDescription:e.restaurantDescription,type:i}),"user"!==(a="business_admin"===i?"business_users":"academic_admin"===i?"academic_users":"farm_admin"===i?"farm_users":"household_admin"===i?"household_users":"user")&&r.collection(a).doc(t.user.uid).set({name:e.firstName+" "+e.lastName,email:e.email})})).then((()=>{n.auth().currentUser.sendEmailVerification()})).then((()=>{t({type:"SIGNUP_SUCCESS"})})).catch((e=>{t({type:"SIGNUP_ERROR",err:e})}))})(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(""),[r,l]=Object(s.useState)(""),[d,j]=Object(s.useState)(""),[m,p]=Object(s.useState)(""),[g,O]=Object(s.useState)(""),[x,f]=Object(s.useState)(""),[y,v]=Object(s.useState)(""),[w,S]=Object(s.useState)(""),[C,k]=Object(s.useState)(""),[N,E]=Object(s.useState)(""),[T,_]=Object(s.useState)(""),[D,F]=Object(s.useState)(""),[R,P]=Object(s.useState)(1),[I,M]=Object(s.useState)();Object(s.useEffect)((()=>{I&&(he("Error",I),M())}),[I]);const A=()=>{const e=/^[0-9\b]+$/;var a=""!==t&&""!==c&&""!==r&&""!==d,s=""!==m&&""!==g&&""!==x&&""!==y,i=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(r),n=!e.test(c)&&!e.test(t),o=!e.test(m);return!!(a&&s&&i&&n&&o)||(M(a?s?i?n?o?"Please enter valid information.":"Please enter a valid town.":"Please enter a valid name.":"Please enter a valid email address.":"Please enter a valid town, country, region, and account type.":"Please enter a valid name, email, and password."),!1)},{authError:W}=e,[L,B]=Object(s.useState)(!1);if(Object(s.useEffect)((()=>{St.a.setApiKey("AIzaSyA7vyoyDlw8wHqveKrfkkeku_46bdR_aPk"),St.a.setLocationType("ROOFTOP")}),[]),Object(s.useEffect)((()=>{e.auth.uid&&(B(!0),""!==m&&""!==g&&St.a.fromAddress(m+" "+g).then((t=>{var a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:0,location:t.results[0].address_components[0].long_name,coords:[t.results[0].geometry.location.lat,t.results[0].geometry.location.lng]}};e.createMapData(a)})))}),[e.auth.uid]),Object(s.useEffect)((()=>{}),[R]),L)return Object(u.jsx)(n.a,{to:"/account"});switch(R){default:case 1:return Object(u.jsxs)(b,{subtitle:"Sign Up",children:[Object(u.jsx)("div",{className:"signup-center subtitles",children:Object(u.jsx)("p",{children:"First, create your account."})}),Object(u.jsx)(Et,{setFirstName:a,firstName:t,setLastName:i,lastName:c,setEmail:l,email:r,setPassword:j,password:d,setStage:P}),Object(u.jsxs)("div",{className:"signup-center subtitles row",children:[Object(u.jsx)("p",{children:"Already have an account? "}),Object(u.jsxs)(o.b,{style:{color:"#AFBA15"},to:"/login",children:["  ","Log In"]})]})]});case 2:return Object(u.jsxs)(b,{subtitle:"Sign Up",children:[Object(u.jsx)("div",{className:"signup-center subtitles",children:Object(u.jsx)("p",{children:"First, create your account."})}),Object(u.jsx)(Tt,{setTown:p,town:m,setCountry:O,country:g,setRegion:f,region:x,setBuildingFunction:v,buildingFunction:y,setStage:P,countries:Nt})]});case 3:return Object(u.jsxs)(b,{subtitle:"Sign Up",children:[Object(u.jsx)("div",{className:"signup-center subtitles",children:Object(u.jsx)("h5",{children:"Confirmation"})}),Object(u.jsx)(Ft,{setStage:P,firstName:t,lastName:c,email:r,town:m,region:x,country:g,buildingFunction:y,setRestaurantName:S,restaurantName:w,setCuisine:_,cuisine:T,setRegulatoryBody:k,regulatoryBody:C,setRegulatoryBodyID:E,regulatoryBodyID:N,setRestaurantDescription:F,restaurantDescription:D}),Object(u.jsxs)("div",{className:"signup-center",children:[Object(u.jsx)("div",{className:"auth-error",children:W?Object(u.jsxs)("p",{children:[" ",W]}):null}),Object(u.jsx)("div",{children:Object(u.jsx)(h.a,{style:{width:"30%"},variant:"default",className:"signup-btn",onClick:e=>P(1),children:"Change"})}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)(h.a,{style:{fontWeight:"700"},variant:"default",className:"signup-confirm",onClick:a=>{a.preventDefault(),function(){let a={firstName:t,lastName:c,initials:t[0]+c[0],email:r,password:d,function:y,city:m,country:g,region:x,restaurantName:w,regulatoryBody:C,regulatoryBodyID:N,cuisine:T,restaurantDescription:D,type:"user"};A()?(console.log("signup"),e.signUp(a)):console.log("error")}()},children:"Confirm"})})]})]});case 4:return Object(u.jsxs)(b,{subtitle:"Sign Up",children:[Object(u.jsx)("div",{className:"signup-center subtitles",children:Object(u.jsx)("p",{children:"First, create your account."})}),Object(u.jsx)(_t,{setTown:p,town:m,setCountry:O,country:g,setRegion:f,region:x,setBuildingFunction:v,buildingFunction:y,setStage:P,countries:Nt,setRestaurantName:S,restaurantName:w,setRegulatoryBody:k,regulatoryBody:C,setRegulatoryBodyID:E,regulatoryBodyID:N})]});case 5:return Object(u.jsxs)(b,{subtitle:"Sign Up",children:[Object(u.jsx)("div",{className:"signup-center subtitles",children:Object(u.jsx)("p",{children:"First, create your account."})}),Object(u.jsx)(Dt,{setTown:p,town:m,setCountry:O,country:g,setRegion:f,region:x,setBuildingFunction:v,buildingFunction:y,setStage:P,countries:Nt,restaurantName:w,regulatoryBody:C,regulatoryBodyID:N,setCuisine:_,cuisine:T,setRestaurantDescription:F,restaurantDescription:D})]})}})),It=(a(659),a(1032)),Mt=a(563),At=a.n(Mt),Wt=a(1077),Lt=a(1031),Bt=a(328),Gt=a.n(Bt);function Ut(e){const{open:t,onClose:a,handleButtonClick:s,to:c,text:i}=e;return Object(u.jsxs)(Wt.a,{open:t,maxWidth:"xs",fullWidth:!0,children:[Object(u.jsxs)(Lt.a,{children:[e.children,Object(u.jsx)(ie.a,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:Object(u.jsx)(Gt.a,{})})]}),Object(u.jsx)(X,{styling:"blue",text:i,onClick:s,goTo:c})]})}function Yt(e){const[t,a]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ye.a,{children:Object(u.jsx)(ve.a,{className:"space-between",children:Object(u.jsxs)(It.a,{onClick:()=>{a(!0)},children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(At.a,{})}),Object(u.jsx)(lt.a,{children:"Logout"})]})})}),Object(u.jsx)(Ut,{open:t,onClose:()=>{a(!1)},text:"Log Out",handleButtonClick:e.handleSignOut,to:e.to,children:"Are you sure you want to log out?"})]})}a(660);function qt(e){const t=`h${e.priority}`;return Object(u.jsx)(t,{className:["heading",e.styling],children:e.text})}var Ht=a.p+"static/media/WheatIcon.1a8e8f19.png";a(661);function Vt(){return Object(u.jsx)("div",{className:"loading",children:Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)("img",{src:Ht,alt:"loading",className:"wheat"})})})}var zt=a(535),$t=a(1033),Kt=a(1034),Jt=a(564),Qt=a.n(Jt),Zt=a(567),Xt=a.n(Zt),ea=a(568),ta=a.n(ea),aa=a(566),sa=a.n(aa),ca=a(162),ia=a.n(ca),ra=a(565),na=a.n(ra),oa=a(435),la=a.n(oa),da=a(33),ua=a(1080),ba=a(1081),ja=a(145);function ha(e){const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{if(e.country){let t=Ct.find((t=>t.name===e.country));t&&a(t.code)}}),[e.country]),Object(s.useEffect)((()=>{Object(ja.b)(t)?Object(ja.a)(e.postcode.trim(),t)?(i(!1),e.setValidPostcode(!0)):(e.setValidPostcode(!1),i(!0)):e.setValidPostcode(!0)}),[e.postcode]),Object(u.jsxs)("div",{children:[Object(u.jsx)(j.a.Label,{children:"Postcode"}),Object(u.jsx)(j.a.Control,{type:"postcode",placeholder:"Postcode",defaultValue:e.postcode,onChange:t=>e.setPostcode(t.target.value)}),c&&Object(u.jsx)("div",{className:"err",children:"Please enter a valid postcode."})]})}function ma(e){let t;return t=e.listItems.map((t=>Object(u.jsx)(ve.a,{children:Object(u.jsxs)(It.a,{onClick:()=>{e.HandleButtonState(t.change)},children:[Object(u.jsx)(ot.a,{children:t.icon}),Object(u.jsx)(lt.a,{children:t.item})]})},t.key))),Object(u.jsx)(ye.a,{children:t})}const pa=e=>{const t=[{key:"name",item:e.firstName+" "+e.lastName,change:"changeName",icon:Object(u.jsx)(ut.a,{})},{key:"email",item:e.email,change:"changeEmail",icon:Object(u.jsx)(jt.a,{})},{key:"password",item:"Password",change:"changePassword",icon:Object(u.jsx)(Qt.a,{})},{key:"location",item:e.town+", "+e.country+", "+e.region,change:"changeLocation",icon:Object(u.jsx)(mt.a,{})},{key:"restaurantName",item:e.restaurantName,change:"changeRestaurantName",icon:Object(u.jsx)(ut.a,{})},{key:"regulatoryBody",item:e.regulatoryBody,change:"changeRegulatoryBody",icon:Object(u.jsx)(la.a,{})},{key:"regulatoryBodyID",item:e.regulatoryBodyID,change:"changeRegulatoryBodyID",icon:Object(u.jsx)(la.a,{})},{key:"cuisine",item:e.cuisine,change:"changeCuisine",icon:Object(u.jsx)(ia.a,{})},{key:"restaurantDescription",item:e.restaurantDescription,change:"changeRestaurantDescription",icon:Object(u.jsx)(na.a,{})}];return Object(u.jsxs)(u.Fragment,{children:[String(e.type).includes("sub")?Object(u.jsx)(u.Fragment,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ma,{listItems:t,HandleButtonState:e.HandleButtonState}),String(e.type).includes("admin")?Object(u.jsx)(ve.a,{children:Object(u.jsxs)(It.a,{onClick:()=>{e.HandleButtonState("changeSubAccounts")},children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(sa.a,{})}),Object(u.jsx)(lt.a,{children:"Sub Accounts"})]})},"subaccounts"):Object(u.jsx)(u.Fragment,{}),e.children]}),Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(ve.a,{children:Object(u.jsxs)(It.a,{href:"/questionnaire",component:"a",children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(Xt.a,{})}),Object(u.jsx)(lt.a,{children:"Help us to offer your greater value by answering this short questionnaire."})]})}),Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(ve.a,{children:Object(u.jsxs)(It.a,{href:"/contact",component:"a",children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(ta.a,{})}),Object(u.jsx)(lt.a,{children:"Contact Us"})]})}),Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(Yt,{handleSignOut:e.HandleSignOut,to:"/landing"})]})},ga=e=>Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{children:Object(u.jsxs)(j.a.Row,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Name"}),Object(u.jsx)(j.a.Control,{type:"name",placeholder:"Enter name",defaultValue:e.firstName,id:"firstname",onChange:t=>e.setFirstName(t.target.value)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Surname"}),Object(u.jsx)(j.a.Control,{type:"surname",placeholder:"Enter surname",defaultValue:e.lastName,onChange:t=>e.setLastName(t.target.value)})]})]})})}),Oa=e=>Object(u.jsx)("div",{children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Email address"}),Object(u.jsx)(j.a.Control,{type:"email",placeholder:"Enter new email",onChange:t=>e.setEmail(t.target.value)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Confirm Password"}),Object(u.jsx)(j.a.Control,{type:"password",placeholder:"Enter Password",onChange:t=>e.setPassword(t.target.value)})]})]})}),xa=e=>Object(u.jsx)("div",{children:Object(u.jsxs)(j.a,{children:[Object(u.jsx)("div",{className:"center",children:Object(u.jsx)("h5",{children:Object(u.jsx)("b",{children:"Follow the email instructions to reset your password."})})}),Object(u.jsx)(j.a.Group,{className:"mb-3",children:Object(u.jsx)(j.a.Control,{type:"email",placeholder:"Enter Email",onChange:t=>e.setEmail(t.target.value)})})]})}),fa=e=>Object(u.jsx)("div",{children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Town"}),Object(u.jsx)(j.a.Control,{type:"address",placeholder:"Town",defaultValue:e.town,onChange:t=>{e.setTown(t.target.value)}})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Country"}),Object(u.jsx)(j.a.Control,{type:"address",placeholder:"Country",defaultValue:e.country,onChange:t=>{e.setCountry(t.target.value)}})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Region"}),Object(u.jsx)(j.a.Control,{type:"address",placeholder:"Region",defaultValue:e.region,onChange:t=>e.setRegion(t.target.value)})]}),e.signedUpForPTS?Object(u.jsx)(j.a.Group,{className:"mb-3",children:Object(u.jsx)(ha,{postcode:e.postcode,setPostcode:e.setPostcode,country:e.country,validPostcode:e.validPostcode,setValidPostcode:e.setValidPostcode})}):null]})}),ya=e=>{const[t,a]=Object(s.useState)(!1),[c,i]=Object(s.useState)([]),[r,n]=Object(s.useState)(""),o=()=>{a(!1)};if(null!==e.subAccounts&&void 0!==e.subAccounts)var l=Object.values(e.subAccounts);return Object(u.jsxs)("div",{children:[Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:Object(u.jsx)(qt,{priority:"3",text:"Sub Accounts"})}),Object(u.jsx)($t.a,{children:null===l||void 0===l?void 0:l.map(((e,t)=>Object(u.jsxs)($t.a.Item,{action:!0,as:"li",className:"d-flex justify-content-between align-items-start",onClick:()=>(e=>{a(!0),i(e)})(e),children:[Object(u.jsxs)("div",{className:"ms-2 me-auto",children:[Object(u.jsx)("div",{className:"fw-bold",children:e.name}),e.email]}),Object(u.jsx)(Kt.a,{variant:"primary",pill:!0,children:e.role})]},t)))})]}),Object(u.jsx)(ce.a,{}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:Object(u.jsx)(qt,{priority:"3",text:"Create Sub Account"})}),Object(u.jsxs)(j.a.Row,{className:"mb-3",children:[Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Name"}),Object(u.jsx)(j.a.Control,{type:"name",placeholder:"Enter Name",value:e.subFirstName,onChange:t=>e.setSubFirstName(t.target.value)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Surname"}),Object(u.jsx)(j.a.Control,{type:"surname",placeholder:"Enter Surname",value:e.subLastName,onChange:t=>e.setSubLastName(t.target.value)})]})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Email address"}),Object(u.jsx)(j.a.Control,{type:"email",placeholder:"Enter Email",value:e.subEmail,onChange:t=>e.setSubEmail(t.target.value)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Password"}),Object(u.jsx)(j.a.Control,{type:"password",placeholder:"Enter Password",value:e.subPassword,onChange:t=>e.setSubPassword(t.target.value)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Role"}),Object(u.jsx)(j.a.Control,{type:"role",placeholder:"Enter Role",value:e.subRole,onChange:t=>e.setSubRole(t.target.value)})]})]})]}),Object(u.jsxs)(Wt.a,{onClose:o,open:t,maxWidth:"xs",fullWidth:!0,children:[Object(u.jsxs)(Lt.a,{children:["Delete '",c.email,"' account?",Object(u.jsx)(ie.a,{"aria-label":"close",onClick:o,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:Object(u.jsx)(Gt.a,{})})]}),Object(u.jsx)(ua.a,{children:Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Sub Account Password"}),Object(u.jsx)(j.a.Control,{type:"password",placeholder:"Enter Password",onChange:e=>n(e.target.value)})]})}),Object(u.jsx)(ba.a,{children:Object(u.jsx)(X,{styling:"blue",text:"Delete Account",onClick:()=>{var t;switch(e.profile.type){case"business_admin":t="business_users";break;case"academic_admin":t="academic_users";break;case"farm_admin":t="farm_users";break;case"household_admin":t="household_users"}var a={masterCollection:t,uid:e.uid,email:c.email,password:r};e.deleteSubAccount(a),o()}})})]})]})};var va=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,authError:e.auth.authError,profile:e.firebase.profile,postcodeData:e.data.getData,data:e.firestore.data.SubAccounts})),(e=>({resetPassword:t=>e(O(t)),updateEmail:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;const i=c(),r=c().firestore(),n=i.auth.EmailAuthProvider.credential(a.email,a.password);i.auth().currentUser.reauthenticateWithCredential(n).then((()=>{i.auth().currentUser.verifyBeforeUpdateEmail(a.newEmail).then((()=>r.collection("users").doc(a.uid).update({email:a.newEmail}))).then((()=>{e({type:"CHANGE_EMAIL_SUCCESS"})})).catch((t=>{e({type:"CHANGE_EMAIL_ERROR",err:t})}))}))}));var a},updateProfile:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection("users").doc(e.uid).set({...e.profile},{merge:!0}).then((()=>{t({type:"CHANGE_PROFILE_SUCCESS"})})).catch((e=>{console.log("err"),t({type:"CHANGE_PROFILE_ERROR",err:e})}))})(t)),signOut:()=>e(((e,t,a)=>{let{getFirebase:s}=a;s().auth().signOut().then((()=>{e({type:"SIGNOUT_SUCCESS"})}))})),createMapData:t=>e(yt(t)),createSubAccount:t=>e(x(t)),deleteSubAccount:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s,i=p.a.initializeApp({apiKey:"AIzaSyDuu8Fpwa2gYlCKcL-LlN-uqH5seEJpk9w",authDomain:"itracker-development.firebaseapp.com",projectId:"itracker-development",storageBucket:"itracker-development.appspot.com",messagingSenderId:"57163396396",appId:"1:57163396396:web:dd800621173f5733a4a889"},"second");var r;i.auth().signInWithEmailAndPassword(a.email,a.password).then((()=>{r=i.auth().currentUser.uid,c().firestore().collection(a.masterCollection).doc(a.uid).collection("sub_accounts").doc(r).delete(),c().firestore().collection("users").doc(r).delete()})).then((()=>{i.auth().currentUser.delete()})).then((()=>{i.auth().signOut()})).then((()=>{i.delete()})).then((()=>{e({type:"DELETE_SUBACCOUNT"})})).catch((t=>{e({type:"DELETE_SUBACCOUNT_ERROR",err:t})}))}));var a},getFirestoreData:t=>e(vt(t)),changeConsumerPostcode:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection("marketplace").doc(e.uid).set({...e.upload},{merge:!0}).then((()=>{t({type:"CONSUMER_SUCCESS"})})).catch((e=>{console.log("err"),t({type:"CONSUMER_ERROR",err:e})}))})(t)),getConsumerPostcode:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection("marketplace").doc(e).get().then((e=>{t({type:"GET_DATA",payload:e.data()})})).catch((e=>{t({type:"GET_DATA_ERROR",err:e})}))})(t))}))),Object(da.firestoreConnect)((e=>{var t;switch(e.profile.type){case"business_admin":t="business_users";break;case"academic_admin":t="academic_users";break;case"farm_admin":t="farm_users";break;default:t="household_users"}return e.auth.uid?[{collection:t,doc:e.auth.uid,subcollections:[{collection:"sub_accounts"}],storeAs:"SubAccounts"}]:[]})))((function(e){const[t,a]=Object(s.useState)(!0);Object(s.useEffect)((()=>{setTimeout((()=>a(!1)),1500)}));const[c,i]=Object(s.useState)(e.profile.firstName),[r,o]=Object(s.useState)(e.profile.lastName),[l,d]=Object(s.useState)(e.auth.email),[b,h]=Object(s.useState)(""),[m,p]=Object(s.useState)(""),[g,O]=Object(s.useState)(""),[x,f]=Object(s.useState)(""),[y,v]=Object(s.useState)(""),[w,S]=Object(s.useState)(""),[C,k]=Object(s.useState)(),[N,E]=Object(s.useState)(e.profile.city),[T,_]=Object(s.useState)(e.profile.country),[D,F]=Object(s.useState)(e.profile.region),[R,P]=Object(s.useState)(""),[I,M]=Object(s.useState)(!0),[A,W]=Object(s.useState)(e.profile.isConsumer),[L,B]=Object(s.useState)(null),[G,U]=Object(s.useState)(""),[Y,q]=Object(s.useState)(!1),[H,V]=Object(s.useState)(""),[z,$]=Object(s.useState)(""),[K,J]=Object(s.useState)(""),[Q,Z]=Object(s.useState)(""),[ee,te]=Object(s.useState)("");function ae(e){L?L===e?B(null):L!==e&&L&&B(e):B(e)}function se(){var t={auth:e.auth,email:e.auth.email,newEmail:l,uid:e.auth.uid,password:b};e.updateEmail(t),e.authError?U(e.authError):q(!0)}Object(s.useEffect)((()=>{void 0!==e.data&&null!==e.data?k(e.data):k({})}),[e.data]),Object(s.useEffect)((()=>{P(e.postcodeData.postcode)}),[e.postcodeData]),Object(s.useEffect)((()=>{U(""),q(!1)}),[L]),Object(s.useEffect)((()=>{if(!e.auth.uid)return Object(u.jsx)(n.a,{to:"/login"})}),[e.auth.uid]),Object(s.useEffect)((()=>{i(e.profile.firstName),o(e.profile.lastName),d(e.profile.email),E(e.profile.city),_(e.profile.country),F(e.profile.region),V(e.profile.restaurantName),$(e.profile.regulatoryBody),J(e.profile.regulatoryBodyID),Z(e.profile.cuisine),te(e.profile.restaurantDescription),(e.profile.isConsumer||e.profile.isSeller)&&(W(!0),e.getConsumerPostcode(e.auth.uid),console.log(e.postcodeData))}),[e.profile]),Object(s.useEffect)((()=>{St.a.setApiKey("AIzaSyA7vyoyDlw8wHqveKrfkkeku_46bdR_aPk"),St.a.setLocationType("ROOFTOP")}),[]);const ie=e=>Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{children:Object(u.jsx)(j.a.Row,{children:Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Restaurant Name"}),Object(u.jsx)(j.a.Control,{type:"name",placeholder:"Enter name",defaultValue:e.restaurantName,id:"restaurantName",onChange:t=>e.setRestaurantName(t.target.value)})]})})})}),re=e=>Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{children:Object(u.jsx)(j.a.Row,{children:Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Regulatory Body"}),Object(u.jsx)(j.a.Control,{type:"name",placeholder:"Enter Name of Regulatory Body",defaultValue:e.regulatoryBody,id:"regulatoryBody",onChange:t=>e.setRegulatoryBody(t.target.value)})]})})})}),ne=e=>Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{children:Object(u.jsx)(j.a.Row,{children:Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Regulatory Body ID"}),Object(u.jsx)(j.a.Control,{type:"name",placeholder:"Enter Regulatory Body ID",defaultValue:e.regulatoryBodyID,id:"regulatoryBodyID",onChange:t=>e.setRegulatoryBodyID(t.target.value)})]})})})}),oe=e=>Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{children:Object(u.jsx)(j.a.Row,{children:Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Cuisine"}),Object(u.jsx)(j.a.Control,{type:"name",placeholder:"Enter Cuisine",defaultValue:e.cuisine,id:"cuisine",onChange:t=>e.setCuisine(t.target.value)})]})})})}),le=e=>Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{children:Object(u.jsx)(j.a.Row,{children:Object(u.jsxs)(j.a.Group,{className:"mb-3",style:{backgroundColor:"white"},as:Fe.a,children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Restaurant Description"}),Object(u.jsx)(j.a.Control,{type:"name",placeholder:"Enter Restaurant Description",defaultValue:e.restaurantDescription,id:"restaurantDescription",onChange:t=>e.setRestaurantDescription(t.target.value)})]})})})});if(!e.auth.uid)return Object(u.jsx)(n.a,{to:"/login"});if(t)return Object(u.jsx)(Vt,{});switch(L){case"changeName":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(ga,{firstName:c,setFirstName:i,lastName:r,setLastName:o,setForm:B}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:t=>{t.preventDefault(),function(){var t={uid:e.auth.uid,profile:{firstName:c,lastName:r,initials:c[0]+r[0]}};e.updateProfile(t),e.authError?U(e.authError):(q(!0),he("Success","Name Successfully Updated!"))}()}})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Change Success"}):null})]})});case"changeEmail":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(Oa,{email:l,setEmail:d,setPassword:h,setForm:B,HandleEmail:se}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:e=>{e.preventDefault(),se()}})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Your email has been updated!"}):null})]})});case"changePassword":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(xa,{setEmail:d}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:t=>{t.preventDefault(),function(){var t={email:l};l===e.auth.email?(e.resetPassword(t),he("Success","A Password reset Email has been sent!")):U("This email does not match this account.")}()}})}),Object(u.jsxs)("div",{className:"auth-error",children:[G?Object(u.jsxs)("p",{children:[" ",G]}):null,e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null]})]})});case"changeLocation":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(fa,{town:N,setTown:E,country:T,setCountry:_,region:D,setRegion:F,setForm:B,signedUpForPTS:A,postcode:R,setPostcode:P,validPostcode:I,setValidPostcode:M}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:t=>{t.preventDefault(),function(){St.a.fromAddress(N+" "+T).then((t=>{var a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:0,location:t.results[0].address_components[0].long_name,coords:[t.results[0].geometry.location.lat,t.results[0].geometry.location.lng]}};e.createMapData(a)}));var t={uid:e.auth.uid,profile:{city:N,country:T,region:D}};e.updateProfile(t),e.authError?U(e.authError):(q(!0),he("Success","Location Sucessfully Updated!"))}(),A&&function(){const t={uid:e.auth.uid,upload:{postcode:R}};e.changeConsumerPostcode(t)}()},disabled:!I})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Change Success"}):null})]})});case"changeSubAccounts":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,setForm:B,HandleButtonState:ae,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(ya,{setSubFirstName:p,setSubLastName:O,setSubEmail:f,setSubPassword:v,setSubRole:S,subAccounts:C,subFirstName:m,subLastName:g,subEmail:x,subPassword:y,subRole:w,profile:e.profile,uid:e.auth.uid,deleteSubAccount:e.deleteSubAccount}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Create Sub Account",onClick:t=>{t.preventDefault(),function(){var t,a;"business_admin"===e.profile.type?(t="business_users",a="business_sub"):"academic_admin"===e.profile.type?(t="academic_users",a="academic_sub"):"farm_admin"===e.profile.type?(t="farm_users",a="farm_sub"):"household_admin"===e.profile.type?(t="household_users",a="household_sub"):"restaurant_admin"===e.profile.type&&(t="restaurant_users",a="restaurant_sub");var s={masterCollection:t,uid:e.auth.uid,email:x,password:y,firstName:m,lastName:g,role:w,function:e.profile.buildingFunction,city:e.profile.city,country:e.profile.country,region:e.profile.region,type:a};""!==m&&""!==g&&""!=x&&""!==y&&""!==w?(e.createSubAccount(s),e.authError?U(e.authError):(q(!0),he("Success","Sub Account Sucessfully Created!"),p(""),O(""),f(""),v(""),S(""))):he("Error","Please ensure the form is completed.")}()}})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Account Created"}):null})]})});case"changeRestaurantName":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(ie,{restaurantName:H,setRestaurantName:V,setForm:B}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:t=>{t.preventDefault(),function(){var t={uid:e.auth.uid,profile:{restaurantName:H}};e.updateProfile(t),e.authError?U(e.authError):(q(!0),he("Success","Restaurant Name Successfully Updated!"))}()}})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Change Success"}):null})]})});case"changeRegulatoryBody":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(re,{regulatoryBody:z,setRegulatoryBody:$,setForm:B}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:t=>{t.preventDefault(),function(){var t={uid:e.auth.uid,profile:{regulatoryBody:z}};e.updateProfile(t),e.authError?U(e.authError):(q(!0),he("Success","Regulatory Body Successfully Updated!"))}()}})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Change Success"}):null})]})});case"changeRegulatoryBodyID":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(ne,{regulatoryBodyID:K,setRegulatoryBodyID:J,setForm:B}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:t=>{t.preventDefault(),function(){var t={uid:e.auth.uid,profile:{regulatoryBodyID:K}};e.updateProfile(t),e.authError?U(e.authError):(q(!0),he("Success","Regulatory Body ID Successfully Updated!"))}()}})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Change Success"}):null})]})});case"changeCuisine":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(oe,{cuisine:Q,setCuisine:Z,setForm:B}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:t=>{t.preventDefault(),function(){var t={uid:e.auth.uid,profile:{cuisine:Q}};e.updateProfile(t),e.authError?U(e.authError):(q(!0),he("Success","Cuisine Successfully Updated!"))}()}})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Change Success"}):null})]})});case"changeRestaurantDescription":return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsxs)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,buildingFunction:e.profile.buildingFunction,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,setForm:B,HandleButtonState:ae,type:e.profile.type,children:[Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsx)(le,{restaurantDescription:ee,setRestaurantDescription:te,setForm:B}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"blue",text:"Confirm",onClick:t=>{t.preventDefault(),function(){var t={uid:e.auth.uid,profile:{restaurantDescription:ee}};e.updateProfile(t),e.authError?U(e.authError):(q(!0),he("Success","Restaurant Description Successfully Updated!"))}()}})}),Object(u.jsx)("div",{className:"auth-error",children:e.authError?Object(u.jsxs)("p",{children:[" ",e.authError]}):null}),Object(u.jsx)("div",{className:"success",children:Y?Object(u.jsx)("p",{children:"Change Success"}):null})]})});default:return Object(u.jsx)(ke,{header:"Settings",subtitle:"What would you like to change?",goTo:"/account",children:Object(u.jsx)(pa,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.auth.email,town:e.profile.city,region:e.profile.region,country:e.profile.country,restaurantName:e.profile.restaurantName,regulatoryBody:e.profile.regulatoryBody,regulatoryBodyID:e.profile.regulatoryBodyID,cuisine:e.profile.cuisine,restaurantDescription:e.profile.restaurantDescription,buildingFunction:e.profile.buildingFunction,setForm:B,HandleButtonState:ae,HandleSignOut:e.signOut,type:e.profile.type})})}}));var wa=Object(m.b)((e=>({auth:e.firebase.auth})),(e=>({createResearchData:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection("data").doc(e.uid).collection("researchData").add(e.upload).then((()=>{t({type:"CREATE_DATA"})})).catch((e=>{t({type:"CREATE_DATA_ERROR",err:e})}))})(t))})))((function(e){const[t,a]=Object(s.useState)(Boolean),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(""),[d,b]=Object(s.useState)(""),[h,m]=Object(s.useState)(""),[p,g]=Object(s.useState)(!1);return Object(u.jsxs)(ke,{header:"Questionnaire",subtitle:"",goTo:"/settings",children:[Object(u.jsx)(j.a,{children:Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Are you 16 years old or above?"}),Object(u.jsx)(j.a.Check,{type:"radio",inline:!0,label:"Yes",name:"16 or above",id:"yes",onClick:e=>a(!0)}),Object(u.jsx)(j.a.Check,{type:"radio",inline:!0,label:"No",name:"16 or above",id:"no",onClick:e=>a(!1)})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"What is your current living arrangement?"}),Object(u.jsx)(j.a.Check,{label:"I live alone",name:"living arrangement",type:"radio",id:"alone",onClick:e=>i(e.target.id)}),Object(u.jsx)(j.a.Check,{label:"I live with family",name:"living arrangement",type:"radio",id:"family",onClick:e=>i(e.target.id)}),Object(u.jsx)(j.a.Check,{label:"Mixed residence",name:"living arrangement",type:"radio",id:"mixed",onClick:e=>i(e.target.id)})]}),"family"===c?Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Are there any children under 16 in your household?"}),Object(u.jsx)(j.a.Check,{label:"Yes",name:"Ages in household",type:"radio",id:"Living with under 16's",onClick:e=>n(e.target.id)}),Object(u.jsx)(j.a.Check,{label:"No",name:"Ages in household",type:"radio",id:"16+ household",onClick:e=>n(e.target.id)})]}):null,Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"What is your building type?"}),Object(u.jsx)(j.a.Check,{inline:!0,label:"Flat",name:"building type",type:"radio",id:"flat",onClick:e=>l(e.target.id)}),Object(u.jsx)(j.a.Check,{inline:!0,label:"House",name:"building type",type:"radio",id:"house",onClick:e=>l(e.target.id)}),Object(u.jsx)(j.a.Check,{inline:!0,label:"Other",name:"building type",type:"radio",id:"other",onClick:e=>l(e.target.id)})]}),Object(u.jsxs)(j.a.Group,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{children:"Where do you go shopping for your groceries?"}),Object(u.jsx)(rt,{id:"shopAt",styling:"grey",data:d,function:e=>{b(e)},items:["Aldi","Asda","Lidl","M&S","Sainsbury's","Tesco","Waitrose","Other"]})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"How often do you go shopping for groceries per week?"}),Object(u.jsx)(j.a.Check,{label:"1 or 2 visits",name:"how often",type:"radio",id:"1 or 2 visits",onClick:e=>m(e.target.id)}),Object(u.jsx)(j.a.Check,{label:"3 or more visits",name:"how often",type:"radio",id:"3 or more visits",onClick:e=>m(e.target.id)}),Object(u.jsx)(j.a.Check,{label:"Weekends only",name:"how often",type:"radio",id:"Weekends only",onClick:e=>m(e.target.id)})]})]},"inline-radio")}),Object(u.jsx)("div",{className:"success",children:p?Object(u.jsx)("p",{children:"Thanks!"}):null}),Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{styling:"green",text:"Submit",onClick:a=>{!function(){var a={uid:e.auth.uid,upload:{sixteenPlus:t,arrangement:c,ages:r,buildingType:o,shopAt:d,shopPerWeek:h}};e.createResearchData(a),he("Thanks!","By answering this questionnaire you have helped us conduct our research on how to arrange the food system in a more sustainable way!"),g(!0)}()}})})]})}));const Sa=Pe.a.div`
      .card{
        color: rgb(59, 59, 59);
        background-color: rgb(238, 238, 238);
        border: none;
        border-radius:5px;
        padding:70px 0 50px 0;
      }
      
      .card-body{
          height:200px;
      }

      `;var Ca=function(){return Object(u.jsx)(c.a.Fragment,{children:Object(u.jsxs)(De.a,{className:"mr-0 ml-0 mt-0 pt-0 mt-lg-5 pt-lg-5 justify-content-center align-items-center d-flex not-found",children:[Object(u.jsx)(Fe.a,{className:"mt-0 pt-0 mb-0 pb-0 mt-lg-2 pt-lg-2",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:" justify-content-center align-items-center d-block mt-5 pt-5 mt-lg-0 pt-lg-0",xs:12,lg:4,children:Object(u.jsx)(Sa,{children:Object(u.jsx)(Ie.a,{children:Object(u.jsx)(Ie.a.Body,{children:Object(u.jsxs)(Ie.a.Text,{className:"text-center",children:[Object(u.jsx)("h1",{className:"page-not-found",children:"404 - Page Not Found"}),Object(u.jsx)("h1",{className:"not-found-message",children:"The page you were looking for does not exist."})]})})})})}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12})]})})};class ka extends s.Component{constructor(){super(...arguments),this.state={email:""},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.handleSubmit=e=>{e.preventDefault(),this.props.resetPassword(this.state)}}render(){const{authError:e,auth:t}=this.props;return t.uid?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(c.a.Fragment,{children:Object(u.jsxs)(De.a,{className:"mr-0 ml-0 mt-0 pt-0 mt-lg-5 pt-lg-5 justify-content-center align-items-center d-flex frg-pass",children:[Object(u.jsx)(Fe.a,{className:"mt-0 pt-0 mb-0 pb-0 mt-lg-2 pt-lg-2",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:" justify-content-center align-items-center d-block mt-5 pt-5 mt-lg-0 pt-lg-0",xs:12,lg:4,children:Object(u.jsx)(Ea,{children:Object(u.jsx)(Ie.a,{children:Object(u.jsx)(Ie.a.Body,{children:Object(u.jsx)(Ie.a.Text,{children:Object(u.jsxs)(Na,{children:[Object(u.jsx)("h1",{className:"text-center",children:"Reset Password"}),Object(u.jsxs)(j.a,{onSubmit:this.handleSubmit,children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Email"}),Object(u.jsx)(j.a.Control,{type:"email",id:"email",placeholder:"Email",required:!0,onChange:this.handleChange})]}),Object(u.jsx)(j.a.Group,{controlId:"formActions",children:Object(u.jsx)(h.a,{variant:"dark",type:"submit",children:"Reset Password"})})]}),Object(u.jsx)("p",{className:"text-center rmb-pass",children:Object(u.jsx)(o.b,{to:"/login",className:"remember-password",children:"I remember my password."})}),Object(u.jsxs)("p",{className:"text-center no-acc",children:["Not got an account? ",Object(u.jsx)(o.b,{to:"/signup",className:"register",children:"Click here"})," to sign up today!"]}),Object(u.jsx)("div",{className:"auth-error",children:e?Object(u.jsxs)("p",{children:[" ",e]}):null})]})})})})})}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12})]})})}}const Na=Pe.a.div`
    form{
      margin:auto;
        padding:10px;
      width:100%;

    }

    input{
      border: 1px solid #62680a;
    }

    .btn-dark{
      background-color:#071850;
      color:whitesmoke;
      border: 1px solid #03091d;
      float:right;

      &:hover{
        background-color: #030d2b;
        border: 1px solid #03091d;
      }

      &:active{
        background-color: #030d2b;
        border: 1px solid #03091d;
      }
    }

`,Ea=Pe.a.div`
.card{
  color: rgb(59, 59, 59);
  background-color: rgb(238, 238, 238);
  border: none;
  border-radius:5px;
  padding:10px 0 10px 0;
}

`;var Ta=Object(m.b)((e=>({authError:e.auth.authError,auth:e.firebase.auth})),(e=>({resetPassword:t=>e(O(t))})))(ka),_a=a.p+"static/media/fr_positive-planet.8257fa0d.jpg",Da=a.p+"static/media/pts_plate_notebook.fd4f56df.png",Fa=a.p+"static/media/pts-banner.a6e618cb.png",Ra=a.p+"static/media/stfcfoodnetwork.8c8f186f.png",Pa=a(570);function Ia(){return Object(u.jsxs)(Ie.a,{className:"countdown-card",children:[Object(u.jsx)(Pa.a,{className:"countdown",date:"2022-06-30T23:59:59"}),Object(u.jsx)("span",{className:"label",children:"days : hrs : mins : secs"})]})}var Ma=Object(m.b)((e=>({profile:e.firebase.profile})))((function(e){const[t,a]=Object(s.useState)(!1),[c,i]=Object(s.useState)("/meal-plan");return Object(s.useEffect)((()=>{e.profile.buildingFunction,a(!0),e.profile.isConsumer?i("/meal-plan"):i("cons-auth")})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(ke,{header:"The Plan to Save Campaign",goTo:"/account",children:[Object(u.jsx)(Ia,{}),Object(u.jsx)("div",{className:"disclaimer",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"NOTE:"}),"This is part of the 'Fail to Plan, Plan to Fail' campaign. Click 'Plan to Save' to express interest in reserving food items from local sources, this countdown is representative of our target timeline for deploying the plan to save and coordinating food consumption between consumers and their local farmers."]})}),Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("img",{className:"large-img",src:Da,alt:""}),Object(u.jsx)("div",{className:"img-overlay blue",children:Object(u.jsx)("h2",{children:"How Does It Work?"})})]}),Object(u.jsx)("div",{className:"pts-p-div",children:Object(u.jsx)("p",{className:"pts-p",children:"If you can reserve your fresh food, local farmers can plan better in their food production to meet your need in the most sustainable way. By signing up to the Plan to Save campaign and reserving your weekly, fortnightly and monthly fresh food requirements, we will take the responsibility to identify local farmers around you or encourage the set up of local farmers to supply your reservation, ensuring the supply of nutritious food all year round."})}),(e.profile.buildingFunction,Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(X,{text:"Start your plan now!",goTo:"/meal-plan",styling:"green"})})),Object(u.jsx)("a",{href:"https://intellidigest.com/services/food-system-sustainability/food-waste-tracker/plan-to-save/",children:Object(u.jsx)("img",{className:"large-img",src:Fa,alt:"Plan to Save promotional banner"})})]}),Object(u.jsx)("div",{className:"support",children:Object(u.jsx)("h4",{children:"Supported By:"})}),Object(u.jsxs)(De.a,{style:{backgroundColor:"white"},children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)("img",{className:"small-img",src:Ra,alt:"STFC Food Network"})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)("img",{className:"small-img",src:_a,alt:"Positive Planet"})})]})]})}));class Aa extends s.Component{constructor(){super(...arguments),this.state={password:""},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.handleSubmit=e=>{e.preventDefault(),this.props.updatePassword(this.state)}}render(){const{auth:e,authError:t}=this.props;return e.uid?Object(u.jsx)(c.a.Fragment,{children:Object(u.jsxs)(De.a,{className:"mr-0 ml-0 mt-0 pt-0 mt-lg-5 pt-lg-5 justify-content-center align-items-center d-flex change-password",children:[Object(u.jsx)(Fe.a,{className:"mt-0 pt-0 mb-0 pb-0 mt-lg-2 pt-lg-2",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:" justify-content-center align-items-center d-block mt-5 pt-5 mt-lg-0 pt-lg-0",xs:12,lg:4,children:Object(u.jsx)(La,{children:Object(u.jsx)(Ie.a,{children:Object(u.jsx)(Ie.a.Body,{children:Object(u.jsx)(Ie.a.Text,{children:Object(u.jsxs)(Wa,{children:[Object(u.jsx)("div",{className:"text-center"}),Object(u.jsx)("h1",{className:"text-center",children:"Change Password"}),Object(u.jsxs)(j.a,{onSubmit:this.handleSubmit,children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"New Password"}),Object(u.jsx)(j.a.Control,{type:"password",id:"password",placeholder:"New Password",required:!0,onChange:this.handleChange})]}),Object(u.jsx)(j.a.Group,{controlId:"formActions",children:Object(u.jsx)(h.a,{variant:"dark",type:"submit",children:"Change Password"})})]}),Object(u.jsx)("p",{className:"text-center back-to-acc",children:Object(u.jsx)(o.b,{to:"/account",className:"cancel",children:"Cancel"})}),Object(u.jsx)("div",{className:"auth-error",children:t?Object(u.jsxs)("p",{children:[" ",t]}):null})]})})})})})}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12})]})}):Object(u.jsx)(n.a,{to:"/login"})}}const Wa=Pe.a.div`
  form {
    margin: auto;
    padding: 10px;
    width: 100%;
  }

  input {
    border: 1px solid #62680a;
  }

  .btn-dark {
    background-color: #071850;
    color: whitesmoke;
    border: 1px solid #03091d;
    float: right;

    &:hover {
      background-color: #030d2b;
      border: 1px solid #03091d;
    }

    &:active {
      background-color: #030d2b;
      border: 1px solid #03091d;
    }
  }
`,La=Pe.a.div`
  .card {
    color: rgb(59, 59, 59);
    background-color: rgb(238, 238, 238);
    border: none;
    border-radius: 5px;
    padding: 10px 0 10px 0;
  }
`;var Ba=Object(m.b)((e=>({authError:e.auth.authError,auth:e.firebase.auth})),(e=>({updatePassword:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;c().auth().currentUser.updatePassword(a.password).then((()=>{e({type:"CHANGE_SUCCESS"})})).catch((t=>{e({type:"CHANGE_ERROR",err:t})}))}));var a}})))(Aa),Ga=a(1035),Ua=a(1036),Ya=a(1037),qa=a(1038),Ha=a(75),Va=a.n(Ha),za=a(571),$a=a.n(za);a(811),a(812);var Ka=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,profile:e.firebase.profile,data:e.firestore.data.mapData})),(e=>({getMapData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;c().firestore().collection(a.masterCollection).get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_DATA",payload:a})})).catch((t=>{e({type:"GET_DATA_ERROR",err:t})}))}));var a}}))),Object(da.firestoreConnect)((e=>e.auth?[{collection:"mapData",storeAs:"mapData"}]:[])))((e=>{const[t,a]=Object(s.useState)([]);Object(s.useEffect)((()=>{a([]),null!==e.data&&void 0!==e.data&&c()}),[e.data]);const c=async()=>{var t=Object.values(e.data),s=[];t.forEach((e=>{var t=s.findIndex((t=>t.location===e.location)),a={foodWasteWeight:e.foodWasteWeight,location:e.location,coords:e.coords,users:1};-1===t?s.push(a):(s[t].foodWasteWeight+=e.foodWasteWeight,s[t].users+=1)})),s.forEach((e=>{try{var t={lat:e.coords[0],lng:e.coords[1],location:e.location,users:e.users,foodWasteWeight:e.foodWasteWeight};a((e=>[...e,t]))}catch(s){}}))},i={color:"#ffffff",fillColor:"#f5b041",fillOpacity:.5},r={color:"#ffffff",fillColor:"#58d68d",fillOpacity:.5};function o(e){var t;t=e.users<=10?r:i;var a="User";return e.users>1&&(a="Users"),Object(u.jsx)(Ga.a,{center:[e.lat,e.lng],pathOptions:t,radius:18,children:Object(u.jsxs)(Ua.a,{children:[e.location,": ",e.users," ",a]})})}return e.auth.uid?Object(u.jsx)(ke,{header:"Users Map",goTo:"/account",children:Object(u.jsxs)(Ya.a,{className:"map-data",center:[0,0],zoom:1.4,minZoom:1.4,maxZoom:12,scrollWheelZoom:!0,maxBounds:[[84.865782,-179.632962],[-84.865782,199.335822]],children:[Object(u.jsx)(qa.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> IntelliDigest - iTracker',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(u.jsx)($a.a,{iconCreateFunction:function(e){var t=e.getAllChildMarkers(),a=0;t.forEach((e=>{a+=e._tooltip.options.children[2]}));var s=" ";return s+=a<10?"small":"medium",Va.a.divIcon({html:`<b>${a}</b>`,className:"marker-cluster-custom"+s,iconSize:Va.a.point(40,40,!0)})},polygonOptions:{weight:2,opacity:1,fillOpacity:.5,smoothFactor:20},showCoverageOnHover:!0,maxClusterRadius:50,children:t.map(((e,t)=>{let{lat:a,lng:s,foodWasteWeight:c,location:i,users:r}=e;return Object(u.jsx)(o,{lat:a,lng:s,foodWasteWeight:c,location:i,users:r},t)}))})]})}):Object(u.jsx)(n.a,{to:"/login"})})),Ja=a(1060),Qa=a(569);a(813);var Za=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",fill:"none",viewBox:"0 0 17 17",children:Object(u.jsx)("path",{fill:"#3A3939",d:"M8.497 12.5L1.573 5.746l13.857.009L8.497 12.5z"})})},Xa=a(593);var es=function(){const e=Object(Xa.a)({initialValues:{pageNumber:""},onSubmit:e=>{console.log(e)}});return Object(u.jsxs)("div",{className:"paginator",children:[Object(u.jsx)("button",{onClick:e=>{},className:"paginatorBtn paginatorBtn-left",children:Object(u.jsx)(Za,{})}),Object(u.jsxs)("form",{onSubmit:e.handleSubmit,className:" paginator_form",action:"",children:[Object(u.jsx)("input",{id:"pageNumber",name:"pageNumber",type:"number",placeholder:"1",onChange:e.handleChange,value:e.values.pageNumber}),Object(u.jsx)("button",{type:"submit",className:" paginator_goBtn paginatorBtn ",children:"GO"})]}),Object(u.jsx)("button",{onClick:e=>{},className:"paginatorBtn paginatorBtn-right",children:Object(u.jsx)(Za,{})})]})},ts=a(574),as=a.n(ts);var ss=Object(m.b)((e=>({data:e.data.getData})),(e=>({sendToUser:t=>e((e=>(t,a,s)=>{let{getFirestore:c}=s;c().collection("marketplace").doc(e.uid).collection("messages").add(e.upload).then((a=>{c().collection("marketplace").doc(e.uid).collection("messages").doc(a.id).set({id:a.id},{merge:!0}),t({type:"SEND_TO_USER"})})).catch((e=>{t({type:"SEND_TO_USER_ERROR",err:e})}))})(t)),editPurchaseStatus:t=>e((e=>(t,a,s)=>{let{getFirestore:c}=s;c().collection("purchases").doc(e.refID).set({status:e.status},{merge:!0}).then((()=>t({type:"EDIT_PURCHASE",data:e}))).catch((e=>{t({type:"EDIT_PURCHASE_ERROR",err:e})}))})(t))})))((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"send Item to User",children:Object(u.jsx)(ie.a,{"aria-label":"send Item to User",sx:{ml:2},onClick:()=>{(async()=>{const t={uid:e.uid,refID:e.refID,status:"IN PROGRESS",upload:{cart:e.cart,refID:e.refID,status:"IN PROGRESS"}};console.log(">>>>>>>>>",t),e.sendToUser(t),e.editPurchaseStatus(t),he("Success"," Items has been sent to user!")})()},children:Object(u.jsx)(as.a,{fontSize:"50"})})})})})),cs=a(105),is=a.n(cs),rs=a(1039);const ns=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mySavedMeals").add(e.upload).then((a=>{c().firestore().collection("marketplace").doc(n).collection("mySavedMeals").doc(a.id).set({id:a.id},{merge:!0}),t({type:"CREATE_RECIPE",recipe:e})})).catch((e=>{t({type:"CREATE_RECIPE_ERROR",err:e})}))},os=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mySavedMeals").doc(e.id).set(e.upload,{merge:!0}).then((()=>console.log("successfully edited! "))).catch((e=>{t(console.log("Error editing document:",e))}))};var ls=Object(m.b)((e=>({data:e.data.getData})),(e=>({editPurchaseItem:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection("purchases").doc(e.id).set(e.upload,{merge:!0}).then((()=>t({type:"EDIT_MEAL",data:e}))).catch((e=>{t({type:"EDIT_MEAL_ERROR",err:e})}))})(t))})))((function(e){const[t,a]=Object(s.useState)(e.cart);return Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={id:e.id,upload:{cartList:t}};e.editPurchaseItem(a),he("Success"," Item has been edited!")})(),e.handleFormClose()},children:[t.map(((e,s)=>Object(u.jsxs)("div",{className:"form",children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Edit Items"}),Object(u.jsx)(j.a.Control,{type:"text",id:"data",onChange:c=>{a([...t.slice(0,s),{data:c.target.value,quantity:e.quantity,measure:e.measure,price:0,currency:"$"},...t.slice(s+1,t.length)])},defaultValue:e.data})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",onChange:c=>{a([...t.slice(0,s),{data:e.data,quantity:c.target.value,measure:e.measure,price:0,supplier:""},...t.slice(s+1,t.length)])},defaultValue:e.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:e.measure,items:["g","kg","/","mL","L","cups","pcs"],function:c=>a([...t.slice(0,s),{data:e.data,quantity:e.quantity,measure:c,price:0,supplier:""},...t.slice(s+1,t.length)])})]})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{type:"text",id:"price",onChange:c=>{a([...t.slice(0,s),{data:e.data,quantity:e.quantity,measure:e.measure,price:c.target.value,supplier:""},...t.slice(s+1,t.length)])},placeholder:"Enter price"})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{type:"text",id:"supplier",onChange:c=>{a([...t.slice(0,s),{data:e.data,quantity:e.quantity,measure:e.measure,price:0,supplier:c.target.value},...t.slice(s+1,t.length)])},placeholder:"Name of supplier"})})]},s))),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn",type:"submit",children:"Done"})})]})}));function ds(e){let{cart:t,id:a,show:s,setShow:c,forceUpdate:i,uid:r}=e;const n=()=>c(!1);return Object(u.jsxs)(oe.a,{show:s,onHide:n,size:"lg","aria-labelledby":"edit meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",children:"Edit Meal"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(ls,{cart:t,id:a,forceUpdate:i,handleFormClose:n,uid:r})})]})}var us=function(e){const[t,a]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Edit",children:Object(u.jsx)(ie.a,{className:"edit","aria-label":"Edit",sx:{ml:2},onClick:()=>{a(!0)},children:Object(u.jsx)(is.a,{fontSize:"inherit"})})}),Object(u.jsx)(ds,{show:t,setShow:a,cart:e.cart,id:e.id,uid:e.uid,forceUpdate:e.forceUpdate})]})};var bs=Object(m.b)((e=>({purchase:e.data.purchaseData})),(e=>({getPurchaseData:t=>e(((e,t,a)=>{let{getFirestore:s}=a;s().collection("purchases").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_PURCHASE_DATA",payload:a})})).catch((t=>{e({type:"GET_PURCHASE_DATA_ERROR",err:t})}))}))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(0);return Object(s.useEffect)((()=>{e.getPurchaseData()}),[e.data]),Object(s.useEffect)((()=>{(async()=>{a([]),e.purchase.forEach((e=>{var t=e.cartList,s=e.profile,c=e.date,i=e.status,r=e.id,n=e.uid;a((e=>[...e,{cartList:t,profile:s,date:c,status:i,id:r,uid:n}]))}))})(),console.log("xxxxxxx>>>>>>>>>",t)}),[e.purchase]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("header",{className:"admin_header"}),Object(u.jsxs)("div",{className:"adminCont",children:[Object(u.jsxs)("main",{className:"admin_left_section",children:[t.map(((e,t)=>Object(u.jsx)(Ja.a,{children:Object(u.jsxs)(Ie.a,{children:[Object(u.jsxs)(Ja.a.Toggle,{as:Ie.a.Header,eventKey:"0",children:[Object(u.jsx)("p",{children:e.date}),e.profile.firstName," ",e.profile.city,",",e.profile.country]}),Object(u.jsx)(Ja.a.Collapse,{eventKey:"0",children:Object(u.jsxs)(Ie.a.Body,{children:[Object(u.jsxs)(le.a,{striped:!0,bordered:!0,hover:!0,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Product"}),Object(u.jsx)("th",{children:"Quantity"}),Object(u.jsx)("th",{children:"Measure"}),Object(u.jsx)("th",{children:"Price"}),Object(u.jsx)("th",{children:"Supplier"})]})}),Object(u.jsx)("tbody",{children:e.cartList.map((e=>Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.data}),Object(u.jsx)("td",{children:e.quantity}),Object(u.jsx)("td",{children:e.measure}),e.price?Object(u.jsx)("td",{children:e.price}):Object(u.jsx)("td",{children:"0"}),e.supplier?Object(u.jsx)("td",{children:e.supplier}):Object(u.jsx)("td",{})]},`cart${t}`)))})]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:[Object(u.jsx)(ss,{refID:e.id,uid:e.uid,cart:e.cartList}),Object(u.jsx)(us,{id:e.id,uid:e.uid,cart:e.cartList})]}),Object(u.jsxs)($t.a,{className:"list-group-flush",children:[Object(u.jsxs)(Qa.a,{children:["Status: ",e.status]}),Object(u.jsx)(Qa.a,{children:"Link To Email"}),Object(u.jsxs)(Qa.a,{children:["Ref Number: ",e.id]})]})]})]})})]})},`item${t}`))),Object(u.jsx)("div",{className:"admin_paginator",children:Object(u.jsx)(es,{})})]}),Object(u.jsx)("div",{className:"admin_right_section",children:Object(u.jsx)("div",{className:"admin_calendar_mock"})})]})]})})}));const js=e=>{const[t,a]=Object(s.useState)(!0),c=()=>a(!1);return"Edible"===e.upload.edibleInedible?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(oe.a,{show:t,onHide:c,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Edible Waste"})}),Object(u.jsxs)(oe.a.Body,{children:[Object(u.jsx)("p",{children:"To add edible item to the food waste,"}),Object(u.jsx)("p",{children:"You need to add the item to your inventory "})]}),Object(u.jsx)(oe.a.Footer,{children:Object(u.jsx)(X,{text:"Go To Inventory",goTo:"/meal-plan",styling:"green"})})]})}):null},hs=e=>"Edible"===e.upload.edibleInedible?e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType&&""!==e.upload.expiryDate&&"Select Currency"!==e.upload.currency?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"}):e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});var ms=Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createFoodWasteData:t=>e(xt(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.profile.type&&(String(e.profile.type).includes("household")||String(e.profile.type).includes("user")||console.log(e.profile.type))}),[e.profile]);const c={edibleInedible:"Inedible",foodWasteWeight:0,weightType:"Select Unit",carbsContent:0,carbsPerUnit:"Select Unit",proteinContent:0,proteinPerUnit:"Select Unit",fatContent:0,fatPerUnit:"Select Unit",ghg:0,expiryDate:"",foodWasteCost:0,currency:"Select Currency"},i={weightMultiplier:0,currencyMultiplier:0,carbsMultiplier:0,proteinMultiplier:0,fatMultiplier:0},[r,o]=Object(s.useState)({...c}),[l,b]=Object(s.useState)({...i});Object(s.useEffect)((()=>{p()}),[r.edibleInedible,r.foodWasteWeight,r.weightType,r.currency,r.carbsContent,r.carbsPerUnit,r.proteinContent,r.proteinPerUnit,r.fatContent,r.fatPerUnit]);const h=e=>{e.target.textContent?o({...r,[e.target.id]:e.target.textContent}):o({...r,[e.target.id]:e.target.value})},m=e=>{let t,a=e.target.id.toString().split(/PerUnit|Type/)[0]+"Multiplier";switch(e.target.textContent){case"kg":case"l":case"GBP (\xa3)":default:t=1;break;case"g":case"ml":case"1l":case"1kg":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454;break;case"100g":case"100ml":t=.01;break;case"500g":case"500ml":t=.002;break;case"USD ($)":t=1.404;break;case"EUR (\u20ac)":t=1.161}b({...l,[a]:t})},p=()=>{var e=Number(r.foodWasteWeight*l.weightMultiplier*2.5);o({...r,ghg:e,foodWasteCost:(.85*Number(r.foodWasteWeight)*l.weightMultiplier*l.currencyMultiplier).toFixed(2)})};return e.auth.uid?t?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(ke,{header:"Update Food Waste",subtitle:"Upload Edible or Inedible Food Waste",goTo:"/account",children:Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Edible or Inedible"}),Object(u.jsx)(rt,{id:"edibleInedible",styling:"grey dropdown-input",data:r.edibleInedible,function:(e,t)=>{h(t)},items:["Edible","Inedible"]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Weight / Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWasteWeight",onChange:e=>{h(e)},value:r.foodWasteWeight}),Object(u.jsx)(rt,{id:"weightType",styling:"grey dropdown-input-right",data:r.weightType,function:(e,t)=>{m(t),h(t)},items:["kg","g","/","oz","lbs","/","l","ml"]})]})]}),Object(u.jsx)(js,{upload:r,multipliers:l,changeMultiplier:m,updateStateValue:h}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"GHG"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"ghg",value:r.ghg,title:r.ghg,readOnly:!0}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})]}),Object(u.jsx)(hs,{upload:r,handleFoodWasteSubmit:()=>{var t;switch(r.weightType){default:case"kg":case"l":t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454}const a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:r.foodWasteWeight*t}};var s,n;switch(e.profile.type){case"business_admin":n="business_users",s=e.auth.uid;break;case"business_sub":n="business_users",s=e.profile.admin;break;case"academic_admin":n="academic_users",s=e.auth.uid;break;case"academic_sub":n="academic_users",s=e.profile.admin;break;case"farm_admin":n="farm_users",s=e.auth.uid;break;case"farm_sub":n="farm_users",s=e.profile.admin;break;case"household_admin":n="household_users",s=e.auth.uid;break;case"household_sub":n="household_users",s=e.profile.admin;break;default:n="data",s=e.auth.uid}const l={uid:s,masterCollection:n,collection:"writtenFoodWasteData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),...r}};e.createFoodWasteData(l),e.createMapData(a),he("Success","Food Waste successfully uploaded!"),o(c),b(i)}})]})})}):Object(u.jsx)(n.a,{to:"/login"})}));const ps=e=>"Edible"===e.upload.edibleInedible?e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType&&""!==e.upload.expiryDate&&"Select Currency"!==e.upload.currency?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"}):e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createFoodWasteData:t=>e(xt(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.profile.type&&(String(e.profile.type).includes("household")||String(e.profile.type).includes("user")||console.log(e.profile.type))}),[e.profile]);const c={edibleInedible:"Inedible",foodWasteWeight:0,weightType:"Select Unit",carbsContent:0,carbsPerUnit:"Select Unit",proteinContent:0,proteinPerUnit:"Select Unit",fatContent:0,fatPerUnit:"Select Unit",ghg:0,expiryDate:"",foodWasteCost:0,currency:"Select Currency"},i={weightMultiplier:0,currencyMultiplier:0,carbsMultiplier:0,proteinMultiplier:0,fatMultiplier:0},[r,o]=Object(s.useState)({...c}),[l,b]=Object(s.useState)({...i});Object(s.useEffect)((()=>{p()}),[r.edibleInedible,r.foodWasteWeight,r.weightType,r.currency,r.carbsContent,r.carbsPerUnit,r.proteinContent,r.proteinPerUnit,r.fatContent,r.fatPerUnit]);const h=e=>{e.target.textContent?o({...r,[e.target.id]:e.target.textContent}):o({...r,[e.target.id]:e.target.value})},m=e=>{let t,a=e.target.id.toString().split(/PerUnit|Type/)[0]+"Multiplier";switch(e.target.textContent){case"kg":case"l":case"GBP (\xa3)":default:t=1;break;case"g":case"ml":case"1l":case"1kg":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454;break;case"100g":case"100ml":t=.01;break;case"500g":case"500ml":t=.002;break;case"USD ($)":t=1.404;break;case"EUR (\u20ac)":t=1.161}b({...l,[a]:t})},p=()=>{var e=Number(r.foodWasteWeight*l.weightMultiplier*2.5);o({...r,ghg:e,foodWasteCost:(.85*Number(r.foodWasteWeight)*l.weightMultiplier*l.currencyMultiplier).toFixed(2)})};return e.auth.uid?t?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(ke,{header:"Update Edible Food Waste",subtitle:"Upload Edible Food Waste",goTo:"/account",children:Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Weight / Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWasteWeight",onChange:e=>{h(e)},value:r.foodWasteWeight}),Object(u.jsx)(rt,{id:"weightType",styling:"grey dropdown-input-right",data:r.weightType,function:(e,t)=>{m(t),h(t)},items:["kg","g","/","oz","lbs","/","l","ml"]})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Cost"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"foodWasteCost",value:r.foodWasteCost,readOnly:!0}),Object(u.jsx)(rt,{id:"currency",styling:"grey dropdown-input-right",data:r.currency,function:(e,t)=>{m(t),h(t)},items:["GBP (\xa3)","USD ($)","EUR (\u20ac)"]})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"GHG"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"ghg",value:r.ghg,title:r.ghg,readOnly:!0}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})]}),Object(u.jsx)(ps,{upload:r,handleFoodWasteSubmit:()=>{var t;switch(r.weightType){default:case"kg":case"l":t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454}const a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:r.foodWasteWeight*t}};var s,n;switch(e.profile.type){case"business_admin":n="business_users",s=e.auth.uid;break;case"business_sub":n="business_users",s=e.profile.admin;break;case"academic_admin":n="academic_users",s=e.auth.uid;break;case"academic_sub":n="academic_users",s=e.profile.admin;break;case"farm_admin":n="farm_users",s=e.auth.uid;break;case"farm_sub":n="farm_users",s=e.profile.admin;break;case"household_admin":n="household_users",s=e.auth.uid;break;case"household_sub":n="household_users",s=e.profile.admin;break;default:n="data",s=e.auth.uid}const l={uid:s,masterCollection:n,collection:"writtenFoodWasteData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),...r}};e.createFoodWasteData(l),e.createMapData(a),he("Success","Food Waste successfully uploaded!"),o(c),b(i)}})]})})}):Object(u.jsx)(n.a,{to:"/login"})}));const gs=e=>"Edible"===e.upload.edibleInedible?e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType&&""!==e.upload.expiryDate&&"Select Currency"!==e.upload.currency?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"}):e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});var Os=Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createGiftFoodData:t=>e(ft(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.profile.type&&(String(e.profile.type).includes("household")||String(e.profile.type).includes("user")||console.log(e.profile.type))}),[e.profile]);const c={edibleInedible:"edible",foodWasteWeight:0,weightType:"Select Unit",carbsContent:0,carbsPerUnit:"Select Unit",proteinContent:0,proteinPerUnit:"Select Unit",fatContent:0,fatPerUnit:"Select Unit",ghg:0,expiryDate:"",foodWasteCost:0,currency:"Select Currency"},i={weightMultiplier:0,currencyMultiplier:0,carbsMultiplier:0,proteinMultiplier:0,fatMultiplier:0},[r,o]=Object(s.useState)({...c}),[l,b]=Object(s.useState)({...i});Object(s.useEffect)((()=>{p()}),[r.edibleInedible,r.foodWasteWeight,r.weightType,r.currency,r.carbsContent,r.carbsPerUnit,r.proteinContent,r.proteinPerUnit,r.fatContent,r.fatPerUnit]);const h=e=>{e.target.textContent?o({...r,[e.target.id]:e.target.textContent}):o({...r,[e.target.id]:e.target.value})},m=e=>{let t,a=e.target.id.toString().split(/PerUnit|Type/)[0]+"Multiplier";switch(e.target.textContent){case"kg":case"l":case"GBP (\xa3)":default:t=1;break;case"g":case"ml":case"1l":case"1kg":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454;break;case"100g":case"100ml":t=.01;break;case"500g":case"500ml":t=.002;break;case"USD ($)":t=1.404;break;case"EUR (\u20ac)":t=1.161}b({...l,[a]:t})},p=()=>{var e=Number(r.foodWasteWeight*l.weightMultiplier*2.5);o({...r,ghg:e,foodWasteCost:(.85*Number(r.foodWasteWeight)*l.weightMultiplier*l.currencyMultiplier).toFixed(2)})};return e.auth.uid?t?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(ke,{header:"Gifted Food",subtitle:"Upload Gifted Food Info",goTo:"/account",children:Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Weight / Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWasteWeight",onChange:e=>{h(e)},value:r.foodWasteWeight}),Object(u.jsx)(rt,{id:"weightType",styling:"grey dropdown-input-right",data:r.weightType,function:(e,t)=>{m(t),h(t)},items:["kg","g","/","oz","lbs","/","l","ml"]})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Cost"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"foodWasteCost",value:r.foodWasteCost,readOnly:!0}),Object(u.jsx)(rt,{id:"currency",styling:"grey dropdown-input-right",data:r.currency,function:(e,t)=>{m(t),h(t)},items:["GBP (\xa3)","USD ($)","EUR (\u20ac)"]})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"GHG"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"ghg",value:r.ghg,title:r.ghg,readOnly:!0}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})]}),Object(u.jsx)(gs,{upload:r,handleFoodWasteSubmit:()=>{var t;switch(r.weightType){default:case"kg":case"l":t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454}const a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:r.foodWasteWeight*t}};var s,n;switch(e.profile.type){case"business_admin":n="business_users",s=e.auth.uid;break;case"business_sub":n="business_users",s=e.profile.admin;break;case"academic_admin":n="academic_users",s=e.auth.uid;break;case"academic_sub":n="academic_users",s=e.profile.admin;break;case"farm_admin":n="farm_users",s=e.auth.uid;break;case"farm_sub":n="farm_users",s=e.profile.admin;break;case"household_admin":n="household_users",s=e.auth.uid;break;case"household_sub":n="household_users",s=e.profile.admin;break;default:n="data",s=e.auth.uid}const l={uid:s,masterCollection:n,collection:"writtenGiftFoodData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),...r}};e.createGiftFoodData(l),e.createMapData(a),he("Success","Food had been added to your gifted items!"),o(c),b(i)}})]})})}):Object(u.jsx)(n.a,{to:"/login"})}));const xs=e=>"Edible"===e.upload.edibleInedible?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Expiry Date"}),Object(u.jsx)(j.a.Control,{id:"expiryDate",placeholder:"DD/MM/YYYY",onChange:t=>{e.updateStateValue(t)},value:e.upload.expiryDate})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Cost"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"foodWasteCost",value:e.upload.foodWasteCost,readOnly:!0}),Object(u.jsx)(rt,{id:"currency",styling:"grey dropdown-input-right",data:e.upload.currency,function:(t,a)=>{e.changeMultiplier(a),e.updateStateValue(a)},items:["GBP (\xa3)","USD ($)","EUR (\u20ac)"]})]})]})]}):null,fs=e=>"Edible"===e.upload.edibleInedible?""!==e.upload.projectName&&""!==e.upload.foodName&&e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType&&""!==e.upload.expiryDate&&"Select Currency"!==e.upload.currency?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"}):""!==e.upload.projectName&&""!==e.upload.foodName&&e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});var ys=Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createFoodWasteData:t=>e(xt(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.profile.type&&(String(e.profile.type).includes("farm")||a(!0))}),[e.profile]);const c={edibleInedible:"Edible",foodName:"",foodWasteWeight:0,weightType:"Select Unit",expiryDate:"",ghg:0,foodWasteCost:0,currency:"Select Currency"},i={weightMultiplier:0,currencyMultiplier:0},[r,o]=Object(s.useState)(c),[l,b]=Object(s.useState)(i);Object(s.useEffect)((()=>{p()}),[r.edibleInedible,r.foodWasteWeight,r.weightType,r.currency]);const h=e=>{e.target.textContent?o({...r,[e.target.id]:e.target.textContent}):o({...r,[e.target.id]:e.target.value})},m=e=>{let t,a=e.target.id.toString().split(/PerUnit|Type/)[0]+"Multiplier";switch(e.target.textContent){case"kg":case"l":case"GBP (\xa3)":default:t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454;break;case"USD ($)":t=1.404;break;case"EUR (\u20ac)":t=1.161}b({...l,[a]:t})},p=()=>{o({...r,ghg:Number(r.foodWasteWeight*l.weightMultiplier*2.5),foodWasteCost:(.85*Number(r.foodWasteWeight)*l.weightMultiplier*l.currencyMultiplier).toFixed(2)})};return e.auth.uid?t?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(ke,{header:"Update Food Waste",subtitle:"Upload Edible or Inedible Food Waste",goTo:"/account",children:Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Food Name"}),Object(u.jsx)(j.a.Control,{type:"text",id:"foodName",onChange:e=>{h(e)},value:r.foodName})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Edible or Inedibe"}),Object(u.jsx)(rt,{id:"edibleInedible",styling:"grey dropdown-input",data:r.edibleInedible,function:(e,t)=>{h(t)},items:["Edible","Inedible"]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Weight / Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWasteWeight",onChange:e=>{h(e)},value:r.foodWasteWeight}),Object(u.jsx)(rt,{id:"weightType",styling:"grey dropdown-input-right",data:r.weightType,function:(e,t)=>{m(t),h(t)},items:["kg","g","/","oz","lbs","/","l","ml"]})]})]}),Object(u.jsx)(xs,{upload:r,multipliers:l,changeMultiplier:m,updateStateValue:h}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"GHG"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"ghg",value:r.ghg,title:r.ghg,readOnly:!0}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})]}),Object(u.jsx)(fs,{upload:r,handleFoodWasteSubmit:()=>{var t;switch(r.weightType){default:case"kg":case"l":t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454}const a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:r.foodWasteWeight*t}};var s,n;switch(e.profile.type){case"business_admin":n="business_users",s=e.auth.uid;break;case"business_sub":n="business_users",s=e.profile.admin;break;case"academic_admin":n="academic_users",s=e.auth.uid;break;case"academic_sub":n="academic_users",s=e.profile.admin;break;case"farm_admin":n="farm_users",s=e.auth.uid;break;case"farm_sub":n="farm_users",s=e.profile.admin;break;case"household_admin":n="household_users",s=e.auth.uid;break;case"household_sub":n="household_users",s=e.profile.admin;break;default:n="data",s=e.auth.uid}const l={uid:s,masterCollection:n,collection:"writtenFoodLossData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),...r}};e.createFoodWasteData(l),e.createMapData(a),he("Success","Food Loss successfully uploaded!"),o(c),b(i)}})]})})}):Object(u.jsx)(n.a,{to:"/login"})}));const vs=e=>"Edible"===e.upload.edibleInedible?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Expiry Date"}),Object(u.jsx)(j.a.Control,{id:"expiryDate",placeholder:"DD/MM/YYYY",onChange:t=>{e.updateStateValue(t)},value:e.upload.expiryDate})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Cost"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"foodWasteCost",value:e.upload.foodWasteCost,readOnly:!0}),Object(u.jsx)(rt,{id:"currency",styling:"grey dropdown-input-right",data:e.upload.currency,function:(t,a)=>{e.changeMultiplier(a),e.updateStateValue(a)},items:["GBP (\xa3)","USD ($)","EUR (\u20ac)"]})]})]})]}):null,ws=e=>"Edible"===e.upload.edibleInedible?e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType&&""!==e.upload.expiryDate&&"Select Currency"!==e.upload.currency?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"}):e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});var Ss=Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createFoodWasteData:t=>e(xt(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.profile.type&&(String(e.profile.type).includes("business")||a(!0))}),[e.profile]);const c={edibleInedible:"Edible",foodWasteWeight:0,weightType:"Select Unit",expiryDate:"",ghg:0,foodWasteCost:0,currency:"Select Currency",notes:""},i={weightMultiplier:0,currencyMultiplier:0},[r,o]=Object(s.useState)(c),[l,b]=Object(s.useState)(i),h=Object(s.useRef)(null);Object(s.useEffect)((()=>{g(),console.log(r.currency)}),[r.edibleInedible,r.foodWasteWeight,r.weightType,r.currency]);const m=e=>{e.target.textContent?o({...r,[e.target.id]:e.target.textContent}):o({...r,[e.target.id]:e.target.value})},p=e=>{let t,a=e.target.id.toString().split(/PerUnit|Type/)[0]+"Multiplier";switch(e.target.textContent){case"kg":case"l":case"GBP (\xa3)":default:t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454;break;case"USD ($)":t=1.404;break;case"EUR (\u20ac)":t=1.161}b({...l,[a]:t})},g=()=>{o({...r,ghg:Number(r.foodWasteWeight*l.weightMultiplier*2.5),foodWasteCost:(.85*Number(r.foodWasteWeight)*l.weightMultiplier*l.currencyMultiplier).toFixed(2)})};return e.auth.uid?t?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(ke,{header:"Update Food Waste",subtitle:"Upload Edible or Inedibe Food Waste",goTo:"/account",children:Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Edible or Inedibe"}),Object(u.jsx)(rt,{id:"edibleInedible",styling:"grey dropdown-input",data:r.edibleInedible,function:(e,t)=>{m(t)},items:["Edible","Inedible"]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Weight / Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWasteWeight",onChange:e=>{m(e)},value:r.foodWasteWeight}),Object(u.jsx)(rt,{id:"weightType",styling:"grey dropdown-input-right",data:r.weightType,function:(e,t)=>{p(t),m(t)},items:["kg","g","/","oz","lbs","/","l","ml"]})]})]}),Object(u.jsx)(vs,{upload:r,multipliers:l,changeMultiplier:p,updateStateValue:m}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"GHG"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"ghg",value:r.ghg,title:r.ghg,readOnly:!0}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Notes"}),Object(u.jsx)(j.a.Control,{as:"textarea",rows:3,id:"notes",ref:h,onChange:e=>{m(e)}})]}),Object(u.jsx)(ws,{upload:r,handleFoodWasteSubmit:()=>{var t;switch(r.weightType){default:case"kg":case"l":t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454}const a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:r.foodWasteWeight*t}};var s,n;switch(e.profile.type){case"business_admin":n="business_users",s=e.auth.uid;break;case"business_sub":n="business_users",s=e.profile.admin;break;case"academic_admin":n="academic_users",s=e.auth.uid;break;case"academic_sub":n="academic_users",s=e.profile.admin;break;case"farm_admin":n="farm_users",s=e.auth.uid;break;case"farm_sub":n="farm_users",s=e.profile.admin;break;case"household_admin":n="household_users",s=e.auth.uid;break;case"household_sub":n="household_users",s=e.profile.admin;break;default:n="data",s=e.auth.uid}const l={uid:s,masterCollection:n,collection:"writtenFoodWasteData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),...r}};e.createFoodWasteData(l),e.createMapData(a),he("Success","Food Waste successfully uploaded!"),o(c),b(i),h.current.value=""}})]})})}):Object(u.jsx)(n.a,{to:"/login"})})),Cs=a(594);const ks=e=>"Select Meal"!==e.upload.meal&&""!==e.upload.foodName?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:()=>{e.handleFoodIntakeSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});var Ns=Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createFoodWasteData:t=>e(xt(t))})))((e=>{const t={meal:"Select Meal",foodName:"",local:!0,eatingIn:!0},[a,c]=Object(s.useState)(!1),[i,r]=Object(s.useState)([]),[o,l]=Object(s.useState)(t),b=e=>{l({...o,[e.target.name]:!o[[e.target.name]]})},h=Object(s.useRef)();return e.auth.uid?Object(u.jsx)(ke,{header:"Update Food Intake",subtitle:"Upload Food Intake",goTo:"/account",children:Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Meal"}),Object(u.jsx)(nt,{id:"meal",function:e=>{(e=>{l({...o,[e.target.id]:e.target.value})})(e)},value:o.meal,placeholder:"Please select a meal",items:["Breakfast","Lunch","Dinner","Other"]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Food Name"}),Object(u.jsx)(Cs.a,{filterBy:()=>!0,id:"foodName",isLoading:a,labelKey:"name",minLength:3,onSearch:e=>{c(!0),fetch("https://web-wrggqo5tiq-lz.a.run.app/completion",{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`food=${e}`}).then((e=>e.json().then((t=>({data:t,status:e.status}))))).then((e=>{const t=e.data.map((e=>({food_id:e.food_id,name:e.name})));r(t),c(!1)})),l({...o,foodName:e})},onChange:e=>{l({...o,foodName:e[0].name})},options:i,placeholder:"Enter a food name",value:o.foodName,ref:h})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Local or Non-Local"}),Object(u.jsx)(j.a.Check,{name:"local",type:"radio",label:"Local",checked:o.local,onChange:e=>{b(e)}}),Object(u.jsx)(j.a.Check,{name:"local",type:"radio",label:"Non-Local",onChange:e=>{b(e)}})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Eating In or Eating Out"}),Object(u.jsx)(j.a.Check,{name:"eatingIn",type:"radio",label:"Eating In",checked:o.eatingIn,onChange:e=>{b(e)}}),Object(u.jsx)(j.a.Check,{name:"eatingIn",type:"radio",label:"Eating Out",onChange:e=>{b(e)}})]}),Object(u.jsx)(ks,{upload:o,handleFoodIntakeSubmit:()=>{var a,s;switch(e.profile.type){case"business_admin":s="business_users",a=e.auth.uid;break;case"business_sub":s="business_users",a=e.profile.admin;break;case"academic_admin":s="academic_users",a=e.auth.uid;break;case"academic_sub":s="academic_users",a=e.profile.admin;break;case"farm_admin":s="farm_users",a=e.auth.uid;break;case"farm_sub":s="farm_users",a=e.profile.admin;break;case"household_admin":s="household_users",a=e.auth.uid;break;case"household_sub":s="household_users",a=e.profile.admin;break;default:s="data",a=e.auth.uid}const c={uid:a,masterCollection:s,collection:"writtenFoodIntakeData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),name:e.profile.firstName+" "+e.profile.lastName,...o}};e.createFoodWasteData(c),he("Success","Food Diary successfully updated!"),l(t),h.current.clear()}})]})})}):Object(u.jsx)(n.a,{to:"/login"})})),Es=a.p+"static/media/tip1.04d20bae.jpg",Ts=a.p+"static/media/tip2.238da9ad.jpg",_s=a.p+"static/media/tip3.3622e4fa.jpg",Ds=a.p+"static/media/tip4.a95f5cac.jpg",Fs=a.p+"static/media/tip5.ee47f4f7.jpg";class Rs extends s.Component{render(){return Object(u.jsx)(ke,{header:"Reduction Tips",subtitle:"Food Waste Reduction Tips",goTo:"/account",children:Object(u.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[Object(u.jsxs)("p",{style:{textAlign:"left",padding:"10px 2% 0 2%"},children:["Food waste is a bigger problem than many people realize.",Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),"In fact, nearly one-third of all food produced in the world is discarded or wasted for various reasons. That equates to nearly"," ",Object(u.jsx)("b",{children:"1.3 billion tons"})," every year.",Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),"Not surprisingly, industrialized countries like the United States waste more food than developing nations. In 2010, the average American generated about 219 pounds (99 kg) of food waste, according to the US Environmental Protection Agency (EPA).",Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),"While you might not think food waste affects you, think again.",Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),"Tossing edible food doesn\u2019t just waste money. Discarded food is sent to landfills, where it rots and produces methane gas, which is the second most common greenhouse gas. In other words, throwing out your food contributes to climate change.",Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),"It wastes a huge amount of water, too. According to the World Resources Institute, 24% of all the water used for agriculture is lost through food waste every year. That\u2019s 45 trillion gallons (about 170 trillion liters).",Object(u.jsx)("br",{}),Object(u.jsx)("br",{})," These things will help to reduce food waste:-"," "]}),Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsxs)("p",{style:{textAlign:"left",padding:"10px 2% 0 2%"},children:[" ",Object(u.jsx)("h3",{children:"1. Shop Smart:-"})," ",Object(u.jsx)("img",{src:Es,alt:"tip1",className:"img-fluid rounded fix-image"})," ","Most people tend to buy more food than they need. Though buying in bulk may be convenient, research has shown that this shopping method leads to more food waste. To avoid buying more food than you need, make frequent trips to the grocery store every few days rather than doing a bulk shopping trip once a week. Make a point to use up all the food you purchased during the last trip to the market before buying more groceries. Additionally, try making a list of items that you need to buy and stick to that list. This will help you reduce impulse buying and reduce food waste as well"]}),Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsxs)("p",{style:{textAlign:"left",padding:"10px 2% 0 2%"},children:[" ",Object(u.jsx)("h3",{children:"2. Store Food Correctly:-"})," ",Object(u.jsx)("img",{src:Ts,alt:"tip2",className:"img-fluid rounded fix-image"})," ","Improper storage leads to a massive amount of food waste. According to the Natural Resource Defense Council, about two-thirds of household waste in the United Kingdom is due to food spoilage. Many people are unsure how to store fruits and vegetables, which can lead to premature ripening and, eventually, rotten produce. For instance, potatoes, tomatoes, garlic, cucumbers and onions should never be refrigerated. These items should be kept at room temperature. Separating foods that produce more ethylene gas from those that don\u2019t is another great way to reduce food spoilage. Ethylene promotes ripening in foods and could lead to spoilage."]}),Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsxs)("p",{style:{textAlign:"left",padding:"10px 2% 0 2%"},children:[Object(u.jsx)("h3",{children:"3. Learn to Preserve:-"})," ",Object(u.jsx)("img",{src:_s,alt:"tip3",className:"img-fluid rounded fix-image"})," ","While you might think fermenting and pickling are new fads, food preservation techniques like these have been used for thousands of years. Pickling, a type of preservation method using brine or vinegar, may have been used as far back as 2400 BC. Pickling, drying, canning, fermenting, freezing and curing are all methods you can use to make food last longer, thus reducing waste. Not only will these methods shrink your carbon footprint, they will save you money as well. What\u2019s more, most preservation techniques are simple and can be fun. For example, canning an excess of ripe apples and turning them into applesauce, or pickling fresh carrots from the market will provide you with a delicious and long-lasting treat that even kids will enjoy."]}),Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsxs)("p",{style:{textAlign:"left",padding:"10px 2% 0 2%"},children:[Object(u.jsx)("h3",{children:"4. Don\u2019t Be a Perfectionist:-"})," ",Object(u.jsx)("img",{src:Ds,alt:"tip4",className:"img-fluid rounded fix-image"})," ","Did you know that rummaging through a bin of apples until you find the most perfect-looking one contributes to food waste? Though identical in taste and nutrition, so-called \u201cugly\u201d fruits and vegetables get passed up for produce that is more pleasing to the eye. The consumer demand for flawless fruits and vegetables has led major grocery chains to buy only picture-perfect produce from farmers. This leads to tons of perfectly good food going to waste. It\u2019s such a big issue that major grocery chains like Walmart and Whole Foods have started offering \u201cugly\u201d fruits and vegetables at a discount in an attempt to reduce waste. Do your part by choosing slightly imperfect produce at the grocery store, or better yet, directly from the farmer."]}),Object(u.jsx)(ce.a,{variant:"middle"}),Object(u.jsxs)("p",{style:{textAlign:"left",padding:"10px 2% 50px 2%"},children:[Object(u.jsx)("h3",{children:"5. Keep Your Fridge Clutter-Free:-"})," ",Object(u.jsx)("img",{src:Fs,alt:"tip5",className:"img-fluid rounded fix-image"})," ","You\u2019ve probably heard the saying, \u201cout of sight, out of mind.\u201d This rings especially true when it comes to food. While having a well-stocked fridge can be a good thing, an overly filled fridge can be bad when it comes to food waste. Help avoid food spoilage by keeping your fridge organized so you can clearly see foods and know when they were purchased. A good way to stock your fridge is by using the FIFO method, which stands for \u201cfirst in, first out.\u201d For example, when you buy a new carton of berries, place the newer package behind the old one. This helps ensure that older food gets used, not wasted."]})]})})}}var Ps=Rs;class Is extends s.Component{renderTableData(){return this.props.users&&this.props.users.map(((e,t)=>{const{id:a,email:s,firstName:c,lastName:i,address:r,city:n,country:o,postcode:l,buildingFunction:d}=e;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:a}),Object(u.jsxs)("td",{children:[c," ",i]}),Object(u.jsx)("td",{children:s}),Object(u.jsx)("td",{children:d}),Object(u.jsxs)("td",{children:[r,", ",n,", ",o,", ",l]})]},a)}))}renderTableHeader(){}render(){return this.props.auth.uid?"user"===this.props.profile.type?Object(u.jsx)(n.a,{to:"/"}):Object(u.jsxs)("div",{style:{paddingBottom:"50px",paddingTop:"70px"},children:[Object(u.jsxs)("h1",{id:"title",children:["The People who have signed in -"," ",this.props.users?this.props.users.length:0]}),Object(u.jsx)("table",{id:"students",children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"ID"}),Object(u.jsx)("th",{children:"NAME"}),Object(u.jsx)("th",{children:"EMAIL"}),Object(u.jsx)("th",{children:"BUILDING FUNTION"}),Object(u.jsx)("th",{children:"ADDRESS"})]}),this.renderTableData()]})})]}):Object(u.jsx)(n.a,{to:"/login"})}}var Ms=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,profile:e.firebase.profile,users:e.firestore.ordered.users}))),Object(da.firestoreConnect)((e=>e.auth.uid?[{collection:"users",doc:e.auth.uid}]:[])))(Is),As=a(46);a(824);var Ws=e=>{const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[l,d]=Object(s.useState)(""),[b,j]=Object(s.useState)("");return Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:s=>{s.preventDefault();const o={title:t,amount:r,date:new Date(l),type:c,code:b};e.onSaveExpenseData(o),a(""),i(""),n(""),d(""),j("")},children:[Object(u.jsxs)("div",{className:"new-item__control",children:[Object(u.jsx)("div",{className:"item__actions",children:Object(u.jsx)("h2",{style:{fontWeight:600,marginBottom:"3.5%"},children:"Add a product"})}),Object(u.jsx)("label",{style:{marginBottom:"0.25%"},children:"Name"}),Object(u.jsx)("input",{type:"text",value:t,onChange:e=>{a(e.target.value)}}),Object(u.jsx)("label",{style:{marginTop:"2%",marginBottom:"0.25%"},children:"Type"}),Object(u.jsx)("input",{type:"text",value:c,onChange:e=>{i(e.target.value)}}),Object(u.jsx)("label",{style:{marginTop:"2%",marginBottom:"0.25%"},children:"Post Code"}),Object(u.jsx)("input",{type:"text",value:b,onChange:e=>{j(e.target.value)}}),Object(u.jsx)("label",{style:{marginTop:"2%",marginBottom:"0.25%"},children:"Amount"}),Object(u.jsx)("input",{type:"number",min:"0.01",step:"0.01",value:r,onChange:e=>{n(e.target.value)}}),Object(u.jsx)("label",{style:{marginTop:"2%",marginBottom:"0.25%"},children:"Date"}),Object(u.jsx)("input",{type:"date",min:"2019-01-01",max:"2022-12-31",value:l,onChange:e=>{d(e.target.value)},style:{marginBottom:"2.5%"}})]}),Object(u.jsx)("div",{className:"item__actions",children:Object(u.jsx)("button",{style:{marginBottom:"-1%"},type:"submit",children:"Add Product"})})]}),Object(u.jsx)("br",{}),Object(u.jsx)(o.b,{to:"/account",children:Object(u.jsx)("button",{type:"button",children:"Back"})})]})};a(825);var Ls=e=>Object(u.jsx)("div",{className:"new-item",children:Object(u.jsx)(Ws,{onSaveExpenseData:t=>{const a={...t,id:Math.random().toString()};e.onAddE(a)}})});a(826);var Bs=e=>{const t=e.date.toLocaleString("en-US",{month:"long"}),a=e.date.toLocaleString("en-US",{day:"2-digit"}),s=e.date.getFullYear();return Object(u.jsxs)("div",{className:"exp-date",children:[Object(u.jsx)("label",{children:"EXPIRY"}),Object(u.jsx)("div",{className:"exp-date__month",children:t}),Object(u.jsx)("div",{className:"exp-date__day",children:a}),Object(u.jsx)("div",{className:"exp-date__year",children:s})]})};a(827);var Gs=e=>{const t="card "+e.className;return Object(u.jsx)("div",{className:t,children:e.children})};a(828);var Us=e=>Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(As.BrowserView,{children:Object(u.jsx)(Gs,{className:"item",children:Object(u.jsxs)("div",{style:{height:"7rem"},children:[Object(u.jsx)(Bs,{date:e.date}),Object(u.jsxs)("div",{className:"item__description",style:{marginLeft:"17.5%",marginTop:"-12.5%"},children:[Object(u.jsxs)("label",{children:[Object(u.jsx)("b",{children:"Name: "}),e.title.toUpperCase()]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("b",{children:"Type: "}),e.type]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("b",{children:"Post code: "}),e.code]})]}),Object(u.jsxs)("div",{className:"item__price",style:{width:"10%",marginLeft:"85%",marginTop:"-100px"},children:["\xa3",e.amount]}),Object(u.jsx)("button",{className:"item-b",style:{width:"10%",marginLeft:"85%",marginTop:"5px"},children:"Buy"})]})})}),Object(u.jsx)(As.MobileView,{children:Object(u.jsx)(Gs,{className:"item",children:Object(u.jsxs)("div",{children:[Object(u.jsx)(Bs,{date:e.date}),Object(u.jsxs)("div",{className:"item__description",style:{marginLeft:"35%",marginTop:"-32.5%"},children:[Object(u.jsxs)("label",{children:[Object(u.jsx)("b",{children:"Name: "}),e.title.toUpperCase()]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("b",{children:"Type: "}),e.type]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("b",{children:"Post code: "}),e.code]}),Object(u.jsxs)("div",{className:"item__price",children:["\xa3",e.amount]}),Object(u.jsx)("button",{className:"item-b",children:"Buy"})]})]})})})]});a(829);var Ys=e=>Object(u.jsx)("div",{className:"Lbl",children:Object(u.jsx)("label",{children:"My products"})});a(830);var qs=e=>Object(u.jsx)("div",{children:Object(u.jsxs)(Gs,{className:"listings",children:[Object(u.jsx)(Ys,{}),e.items.map((e=>Object(u.jsx)(Us,{title:e.title,type:e.type,amount:e.amount,date:e.date,code:e.code})))]})});const Hs=[{id:"e1",title:"Minced beef",amount:4.12,date:new Date(2021,9,14),type:"Meat",code:"EH11 2AB"},{id:"e2",title:"Carrots",amount:9.49,date:new Date(2021,12,12),type:"Vegetable",code:"EH1 2CA"},{id:"e3",title:"Sausage",amount:2.67,date:new Date(2021,9,28),type:"Meat",code:"EH9 2AB"},{id:"e4",title:"Banana",amount:450,date:new Date(2021,5,12),type:"Fruit",code:"EH11 2AB"}];var Vs=()=>{const[e,t]=Object(s.useState)(Hs),a=e=>{t((t=>[e,...t]))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(As.MobileView,{children:Object(u.jsxs)("div",{style:{marginTop:"20%",marginBottom:"20%"},children:[Object(u.jsx)(Ls,{onAddE:a}),Object(u.jsx)(qs,{items:e})]})}),Object(u.jsx)(As.BrowserView,{children:Object(u.jsxs)("div",{style:{marginTop:"5%",marginBottom:"5%"},children:[Object(u.jsx)(Ls,{onAddE:a}),Object(u.jsx)(qs,{items:e})]})})]})},zs=a(1046),$s=a(107),Ks=a(115),Js=a(34),Qs=a(1057),Zs=a(1054),Xs=a(1045),ec=a(26),tc=a.n(ec);class ac extends s.Component{constructor(){super(...arguments),this.state={uid:this.props.auth.uid,item:"",itemWeight:0,weightType:"Select Unit",items:[],fromDate:"",toDate:"",frequency:"Select Frequency",formWidth:"",dropdownWidth:"",submissionType:"Reserve Items",submissionDay:tc()().format("ddd"),submissionWeek:tc()().format("W"),submissionMonth:tc()().format("MMM"),submissionDate:tc()().format("Do"),submissionYear:tc()().format("YYYY"),submissionFullDate:tc()().format("ddd MMM Do YYYY"),myReservations:[]},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.clearForm=()=>{this.setState({item:"",itemWeight:0,weightType:"Select Unit",items:[],fromDate:"",toDate:"",frequency:"Select Frequency",myReservations:[]}),this.fetchMyReservationsData()},this.showNotification=()=>{je()({title:"Success!",message:"Thank you for reserving items, you have helped a farmer plan their harvest more sustainably. We will contact you by the end of January via email about your reservation.",backgroundTop:"#9D5F1A",backgroundBottom:"#EA9434",closeButton:"Close",duration:2e4})},this.deleteReservation=e=>{const t=this.state.myReservations.filter((t=>t.resID!==e));this.setState({myReservations:t}),et.collection("data").doc(this.state.uid).collection("writtenFoodWasteData").doc(e).delete()},this.handleReserveItemSubmit=e=>{e.preventDefault(),this.setState({}),this.props.createReserveItemsData(this.state)},this.fetchMyReservationsData=async()=>{et.collection("data").doc(this.state.uid).collection("writtenFoodWasteData").get().then((e=>{e.forEach((e=>{var t=e.data().SUBMISSIONTYPE,a=e.data().ITEMLIST,s=e.data().FROMDATE,c=e.data().TODATE,i=e.data().FREQUENCY;"Reserve Items"===t&&this.setState((t=>({myReservations:t.myReservations.concat({itemList:a,fromDate:s,toDate:c,frequency:i,resID:e.id})})))}))})).catch((e=>console.log(e)))}}handleWeightUnitChange(e){this.setState({weightType:e})}handleFreqChange(e){this.setState({frequency:e})}isItemsEmpty(e){return 0===e.length}handleAddClick(){this.setState({itemWeight:0,weightType:"Select Unit"}),this.setState((e=>({items:e.items.concat({name:this.state.item,weight:this.state.itemWeight+this.state.weightType})})))}componentDidMount(){this.fetchMyReservationsData(),As.isMobile?this.setState({formWidth:"90vw",dropdownWidth:"241px"}):As.isBrowser&&this.setState({formWidth:"783px",dropdownWidth:"610px"})}render(){const{data:e,auth:t}=this.props;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(u.jsx)("h4",{className:"text-center",style:{marginTop:"5%",marginBottom:"2.5%",paddingTop:"8vh",fontWeight:600},children:"Plan, Reserve, Collect, Save"}),Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",width:"100%"},children:Object(u.jsx)(h.a,{style:{width:this.state.formWidth,borderColor:"#040335",backgroundColor:"#040335"},as:o.b,to:"/pts",children:"Back"})}),Object(u.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",width:"100%",height:"190%"},children:[Object(u.jsx)(Ie.a,{style:{width:this.state.formWidth,marginBottom:"10vh",backgroundColor:"#aab41e"},children:Object(u.jsxs)(j.a,{className:"form-layout",style:{padding:"10px"},children:[Object(u.jsx)("h5",{className:"text-center",style:{margin:"30px",fontSize:"15px",fontWeight:"600"},children:"Plan, Reserve, Collect, Save"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Select Items"}),Object(u.jsx)(As.BrowserView,{children:Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsx)(Qs.a,{freeSolo:!0,id:"item",options:sc.map((e=>e.title)),style:{width:"100%",backgroundColor:"white"},size:"small",onInputChange:e=>this.handleChange(e),onChange:e=>this.setState({item:e.target.textContent}),renderInput:e=>Object(u.jsx)(Zs.a,{...e,placeholder:"Enter Items",variant:"outlined"})})})}),Object(u.jsx)(As.MobileView,{children:Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsx)(Qs.a,{freeSolo:!0,id:"item",options:sc.map((e=>e.title)),style:{width:"70%",backgroundColor:"white"},size:"small",onInputChange:e=>this.handleChange(e),onChange:e=>this.setState({item:e.target.textContent}),renderInput:e=>Object(u.jsx)(Zs.a,{...e,label:"Enter Items",variant:"outlined"})})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Weight / Volume"}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"itemWeight",placeholder:"Enter weight",onChange:e=>{this.handleChange(e)},width:"100%",value:this.state.itemWeight}),Object(u.jsxs)(ct.a,{as:rs.a.Append,variant:"outline-secondary",title:Object(u.jsx)("span",{style:{color:"white"},children:this.state.weightType}),id:"wtdd",style:{backgroundColor:"#040335"},children:[Object(u.jsx)(it.a.Header,{children:"Weight (Solids)"}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent)},children:"kg"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent)},children:"g"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent)},children:"oz"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent)},children:"lbs"})}),Object(u.jsx)(it.a.Divider,{}),Object(u.jsx)(it.a.Header,{children:"Volume (Liquids)"}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent)},children:"l"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent)},children:"ml"})})]})]})}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:""!==this.state.item&&0!==this.state.itemWeight&&"Select Unit"!==this.state.weightType?Object(u.jsx)(h.a,{type:"button",style:{width:"50%",backgroundColor:"#040335"},onClick:()=>this.handleAddClick(),children:"Add"}):Object(u.jsx)(h.a,{type:"button",style:{width:"50%"},variant:"secondary",disabled:!0,children:"Add"})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Selected Items"}),Object(u.jsxs)("div",{style:{overflowY:"scroll",height:"85px",width:"80%",marginLeft:"10%",backgroundColor:"white",marginBottom:"10px"},children:[Object(u.jsx)($t.a,{children:Object(u.jsx)(Qa.a,{style:{textAlign:"center",backgroundColor:"rgb(13, 27, 92, 0.8)",color:"white",width:"100%",fontWeight:600,padding:"0 1px 0 1px",borderRadius:"0px"},children:"Items Added"})}),Object(u.jsx)(As.BrowserView,{children:Object(u.jsx)(le.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{style:{textAlign:"center",width:"50%"},children:Object(u.jsx)("b",{children:"Item Name"})}),Object(u.jsx)("th",{style:{textAlign:"center",width:"50%"},children:Object(u.jsx)("b",{children:"Weight / Volume"})})]}),this.state.items.map((e=>Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:e.name}),Object(u.jsx)("th",{children:e.weight})]})))]})})}),Object(u.jsx)(As.MobileView,{children:Object(u.jsx)(le.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{style:{textAlign:"center",width:"50%"},children:Object(u.jsx)("b",{style:{fontSize:"85%"},children:"Item Name"})}),Object(u.jsx)("th",{style:{textAlign:"center",width:"50%"},children:Object(u.jsx)("b",{style:{fontSize:"85%"},children:"Weight/Volume"})})]}),this.state.items.map((e=>Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:e.name}),Object(u.jsx)("th",{children:e.weight})]})))]})})})]}),Object(u.jsxs)(Xs.a,{style:{width:"80%",marginLeft:"10%",marginTop:"-10px",marginBottom:"10px"},children:[this.isItemsEmpty(this.state.items)?Object(u.jsx)(h.a,{variant:"secondary",style:{width:"50%",fontSize:"75%"},disabled:!0,children:"Remove Last Item"}):Object(u.jsx)(h.a,{style:{backgroundColor:"#040335",width:"50%",fontSize:"75%"},onClick:()=>this.setState({items:this.state.items.filter(((e,t)=>t!==this.state.items.length-1))}),children:"Remove Last Item"}),this.isItemsEmpty(this.state.items)?Object(u.jsx)(h.a,{variant:"secondary",style:{width:"50%",fontSize:"75%"},disabled:!0,children:"Clear"}):Object(u.jsx)(h.a,{style:{backgroundColor:"#040335",width:"50%",fontSize:"75%"},onClick:()=>this.setState({items:[]}),children:"Clear"})]}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"From"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)(j.a.Control,{id:"fromDate",type:"date",min:"2022-06-01",placeholder:"DD/MM/YYYY",onChange:e=>this.handleChange(e),width:"100%",value:this.state.fromDate})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"To"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)(j.a.Control,{id:"toDate",type:"date",min:"2022-07-01",placeholder:"DD/MM/YYYY",onChange:e=>this.handleChange(e),width:"100%",value:this.state.toDate})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Frequency"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)(cc,{children:Object(u.jsxs)(it.a,{children:[Object(u.jsx)(Ks.a,{variant:"secondary",width:"100%",className:"dd",children:this.state.frequency}),Object(u.jsxs)($s.b,{children:[Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>this.handleFreqChange(e.target.textContent),children:"Weekly"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>this.handleFreqChange(e.target.textContent),children:"Fortnightly"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>this.handleFreqChange(e.target.textContent),children:"Monthly"})})]})]})})})}),Object(u.jsx)(zs.a,{style:{marginBottom:"10px"}}),this.state.items!==[]&&""!==this.state.fromDate&&""!==this.state.toDate&&"Select Frequency"!==this.state.frequency?Object(u.jsx)(h.a,{style:{margin:"0 10% 0 10%",backgroundColor:"#040335",width:"80%",marginTop:"5px"},onClick:e=>{this.handleReserveItemSubmit(e),this.clearForm(),this.showNotification()},variant:"secondary",type:"button",children:"Reserve"}):Object(u.jsx)(h.a,{style:{margin:"0 10% 0 10%",width:"80%",marginTop:"5px"},variant:"secondary",disabled:!0,children:"Reserve"})]})]})}),Object(u.jsxs)(Ie.a,{style:{width:this.state.formWidth,height:"720px",marginBottom:"10vh",backgroundColor:"#040335",overflowY:"auto"},children:[Object(u.jsx)("h5",{className:"text-center",style:{fontWeight:600,color:"white",marginTop:"2.5%",marginBottom:"5%"},children:"My Reservations"}),Object(u.jsx)("div",{children:this.state.myReservations.map((e=>Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(As.BrowserView,{children:Object(u.jsxs)(Ie.a,{style:{width:"95%",marginLeft:"2.5%",backgroundColor:"rgb(38, 120, 214)",height:"160px",marginBottom:"50px"},children:[Object(u.jsxs)("div",{className:"text-center",style:{marginBottom:"7.5px"},children:[Object(u.jsxs)("span",{style:{marginRight:"20%"},children:[Object(u.jsx)("b",{children:"From: "})," ",e.fromDate]})," ",Object(u.jsx)("b",{children:"To: "})," ",e.toDate]}),Object(u.jsx)("div",{onClick:()=>this.deleteReservation(e.resID),style:{fontSize:"150%",fontWeight:600,marginLeft:"97.5%",marginTop:"-4.5%"},children:"X"}),Object(u.jsxs)("div",{className:"text-center",style:{marginBottom:"10px"},children:[Object(u.jsx)("b",{children:"Frequency: "})," ",e.frequency," ",e.resID]}),Object(u.jsxs)("div",{style:{overflowY:"scroll",marginBottom:"10px"},children:[Object(u.jsx)($t.a,{children:Object(u.jsx)(Qa.a,{style:{textAlign:"center",backgroundColor:"rgb(13, 27, 92, 0.8)",color:"white",width:"99.5%",marginLeft:"0.5%",fontWeight:600,padding:"0 1px 0 1px",borderRadius:"0px"},children:"Items Reserved"})}),Object(u.jsx)(le.a,{striped:!0,bordered:!0,hover:!0,size:"sm",style:{width:"99.5%",marginLeft:"0.5%",height:"50px",backgroundColor:"white"},children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{style:{textAlign:"center",width:"50%"},children:Object(u.jsx)("b",{children:"Item Name"})}),Object(u.jsx)("th",{style:{textAlign:"center",width:"50%"},children:Object(u.jsx)("b",{children:"Weight / Volume"})})]}),e.itemList.map((e=>Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:e.name}),Object(u.jsx)("th",{children:e.weight})]})})))]})})]})]})}),Object(u.jsx)(As.MobileView,{children:Object(u.jsxs)(Ie.a,{style:{width:"95%",marginLeft:"2.5%",backgroundColor:"rgb(38, 120, 214)",height:"160px",marginBottom:"50px"},children:[Object(u.jsxs)("div",{className:"text-center",style:{marginBottom:"5px"},children:[Object(u.jsxs)("span",{style:{marginRight:"8.5%"},children:[Object(u.jsx)("b",{children:"From: "})," ",e.fromDate," "]})," ",Object(u.jsx)("b",{children:"To: "})," ",e.toDate]}),Object(u.jsx)("div",{onClick:()=>this.deleteReservation(e.resID),style:{marginLeft:"95%",marginTop:"-10%",fontWeight:600,fontSize:"150%"},children:"X"}),Object(u.jsxs)("div",{className:"text-center",style:{marginBottom:"10px"},children:[Object(u.jsx)("b",{children:"Frequency: "})," ",e.frequency]}),Object(u.jsxs)("div",{style:{overflowY:"scroll",marginBottom:"10px"},children:[Object(u.jsx)($t.a,{children:Object(u.jsx)(Qa.a,{style:{textAlign:"center",backgroundColor:"rgb(13, 27, 92, 0.8)",color:"white",width:"99.5%",marginLeft:"0.25%",fontWeight:600,padding:"0 1px 0 1px",borderRadius:"0px"},children:"Items Reserved"})}),Object(u.jsx)(le.a,{striped:!0,bordered:!0,hover:!0,size:"sm",style:{width:"99.5%",marginLeft:"0.25%",height:"50px",backgroundColor:"white"},children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{style:{textAlign:"center",width:"50%"},children:Object(u.jsx)("b",{style:{fontSize:"85%"},children:"Item Name"})}),Object(u.jsx)("th",{style:{textAlign:"center",width:"50%"},children:Object(u.jsx)("b",{style:{fontSize:"85%"},children:"Weight/Volume"})})]}),e.itemList.map((e=>Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:e.name}),Object(u.jsx)("th",{children:e.weight})]})))]})})]})]})})]})))})]})]})]})})}}const sc=[{title:"Ham"},{title:"Beef"},{title:"Chicken"},{title:"Pork"},{title:"Cod"},{title:"Haddock"},{title:"Lamb"},{title:"Apple"},{title:"Banana"},{title:"Orange"},{title:"Pear"},{title:"Grapes"},{title:"Potato"},{title:"Milk"},{title:"Onion"},{title:"Cucumber"},{title:"Peppers"},{title:"Cabbage"}],cc=Pe.a.div`
  .dd {
    background-color: white;
    color: grey;
    border-color: grey;
  }
`;var ic=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({startData:t=>e(Ot(t)),createReserveItemsData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;t().firebase.profile;const i=t().firebase.auth,r=a.submissionType,n=a.items,o=a.fromDate,l=a.toDate,d=a.frequency,u=a.submissionDay,b=a.submissionWeek,j=a.submissionMonth,h=a.submissionDate,m=a.submissionYear,p=a.submissionFullDate,g=(new Date).getHours();let O="";O=g>=0&&g<6?"T1":g>=6&&g<12?"T2":g>=12&&g<18?"T3":"T4",c().firestore().collection("data").doc(i.uid).collection("writtenReserveFoodData").add({date:c().firestore.Timestamp.fromDate(new Date),type:O,SUBMISSIONTYPE:r,ITEMLIST:n,FROMDATE:o,TODATE:l,FREQUENCY:d,WDAY:u,WEEK:b,MONTH:j,MDATE:h,YEAR:m,FULLDATE:p}).then((()=>{e({type:"CREATE_DATA"})})).catch((t=>{e({type:"CREATE_DATA_ERROR",err:t})}))}));var a}}))),Object(da.firestoreConnect)((e=>e.auth.uid?[{collection:"data",doc:e.auth.uid}]:[])))(ac);a(415);var rc=()=>{const[e,t]=Object(s.useState)({zip:""}),[a,c]=Object(s.useState)("");let i="5e08f390d68d20c770a7727d2bafe3b1";const r=`http://api.openweathermap.org/geo/1.0/zip?zip=${e.zip},GB&appid=${i}`,n=`https://api.openweathermap.org/data/2.5/onecall?exclude=minutely,hourly&&units=metric&lat=${e.lat}&lon=${e.lon}&&appid=${i}`;Object(s.useEffect)((()=>{e.lat&&fetch(n).then((e=>e.json())).then((e=>{let t="";e.daily.forEach(((e,a)=>{t+="Day "+(a+1)+": "+e.weather[0].main+" "})),c({message:t,class:"success"})})).catch((e=>{c({message:"Weather fetch error",class:"danger"})}))}),[e.lat]);const o=a=>{t({...e,lat:a.coords.latitude,lon:a.coords.longitude})};return Object(u.jsxs)("section",{id:"weather",className:"mb-4",children:[Object(u.jsx)("h5",{className:"mt-3",children:"Weather Forecast"}),Object(u.jsx)("input",{type:"text",name:"location",id:"location",placeholder:"Post code",className:"p-1 pl-2",onChange:a=>{t({...e,zip:a.target.value})},value:e.zip}),Object(u.jsx)("button",{id:"getWeather",className:"ml-3 mr-1 btn blue-btn",onClick:a=>{a.preventDefault(),fetch(r).then((e=>e.json())).then((a=>{console.log(a),a.zip?t({...e,lat:a.lat,lon:a.lon}):c({message:"Invalid postcal code",class:"danger"})})).catch((e=>{c({message:"Geolocation fetch error",class:"danger"})}))},children:"Get weather for post code"}),Object(u.jsx)("button",{className:"btn green-btn",onClick:e=>{e.preventDefault(),navigator.geolocation?navigator.geolocation.getCurrentPosition(o):c({message:"geolocation not supported",class:"danger"})},children:"Use my location"}),a&&Object(u.jsx)("p",{className:`alert alert-${a.class} mb-2 mt-2`,children:a.message})]})};const nc=e=>Object(u.jsx)("div",{style:{overflowY:"scroll",height:"20rem",marginBottom:"2%"},children:Object(u.jsxs)(ye.a,{children:[e.category&&e.category.map((e=>Object(u.jsx)(ve.a,{children:Object(u.jsx)("a",{href:`https://www.google.com/search?q=${e}`,children:e})},e))),!e.category&&Object(u.jsx)("p",{children:"No data available"})]})});var oc=e=>Object(u.jsxs)(ye.a,{children:[e.data.phosphorus&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h3",{children:["Phosphorus: ",e.data.phosphorus," Kg/Ha"]}),Object(u.jsxs)("h3",{children:["Potassium: ",e.data.potassium," Kg/Ha"]}),Object(u.jsxs)("h3",{children:["Potassium: ",e.data.potassium," Kg/Ha"]})]}),!e.data.phosphorus&&Object(u.jsx)("p",{children:"No data available"})]}),lc=a(582),dc=a.n(lc),uc=a(583),bc=a.n(uc);const jc=a(520);var hc=e=>{const[t,c]=Object(s.useState)(""),[i,r]=Object(s.useState)(0),[n,o]=Object(s.useState)((100/e.rows).toFixed(0)),[l,d]=Object(s.useState)(!1),[b,m]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.setRowTotal(n,e.index),p()}),[n,e.unit,e.land]),Object(s.useEffect)((()=>{var a=-1;jc.categories[e.cat].find(((e,s)=>{if(e.crop===t)return a=s,s}));r(a),p()}),[t]);const p=()=>{const a=e.land*(n/100);let s=[...e.farmPlan],c={...s[e.index]};c={crop:t,percentOfTotal:n,landMass:a.toFixed(3)},s[e.index]=c,e.setFarmPlan(s)};return Object(u.jsxs)(De.a,{className:"farm-row",children:[Object(u.jsxs)(Fe.a,{children:[Object(u.jsx)("img",{src:a(831)(`./${e.cat}-01.png`).default,alt:e.cat,height:70,width:70}),e.index+1]}),Object(u.jsxs)(Fe.a,{children:[Object(u.jsx)(rt,{id:"crop",styling:"green",data:`Select ${e.cat}`,function:e=>{c(e)},items:jc.categories[e.cat].map((e=>e.crop))}),Object(u.jsx)(j.a.Control,{type:"text",id:"food",className:"mt-2",onChange:e=>c(e.target.value),value:t,required:!0})]}),Object(u.jsxs)(Fe.a,{children:[Object(u.jsxs)("label",{htmlFor:"amount",children:[Object(u.jsx)(dc.a,{name:"amount",min:0,max:100,value:n,onChange:e=>o(Number(e).toFixed(1))}),Object(u.jsx)("span",{children:"%"})]}),Object(u.jsx)(bc.a,{value:n,className:"slider",onChange:e=>o(Number(e.target.value).toFixed(1))})]}),Object(u.jsx)(Fe.a,{children:Object(u.jsxs)("div",{className:"d-grid gap-2",children:[Object(u.jsx)(h.a,{onClick:()=>{d(!0)},className:"sub-btn blue-btn",children:"Pests"}),Object(u.jsx)(h.a,{onClick:()=>{m(!0)},className:"sub-btn green-light-btn",children:"Nutrient requirement"})]})}),Object(u.jsxs)(oe.a,{show:l,onHide:()=>d(!1),children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:t?Object(u.jsxs)("p",{children:["Common pests in ",t]}):Object(u.jsx)("p",{children:"No data"})})}),Object(u.jsx)(oe.a.Body,{children:t&&jc.categories[e.cat][i]&&Object(u.jsx)(nc,{category:jc.categories[e.cat][i].pests})}),Object(u.jsx)(oe.a.Footer,{children:Object(u.jsx)(h.a,{variant:"secondary",onClick:()=>d(!1),children:"Close"})})]}),Object(u.jsxs)(oe.a,{show:b,onHide:()=>m(!1),children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:t?Object(u.jsxs)("p",{children:["Soil nutrient requirements to grow ",t]}):Object(u.jsx)("p",{children:"No data"})})}),Object(u.jsx)(oe.a.Body,{children:t&&jc.categories[e.cat][i]&&Object(u.jsx)(oc,{data:jc.categories[e.cat][i]})}),Object(u.jsx)(oe.a.Footer,{children:Object(u.jsx)(h.a,{variant:"secondary",onClick:()=>m(!1),children:"Close"})})]})]},e.cat)};const mc=a(520),pc=(a(838),["Km\xb2","M\xb2","Hct"]);var gc=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,profile:e.firebase.profile})),(e=>({createMarketplaceData:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection("marketplace").doc(e.uid).collection("farmPlanData").add(e.upload).then((()=>{t({type:"CREATE_DATA"})})).catch((e=>{t({type:"CREATE_DATA_ERROR",err:e})}))})(t))}))),Object(da.firestoreConnect)((e=>e.auth.uid?[{collection:"data",doc:e.auth.uid}]:[])))((e=>{const[t,a]=Object(s.useState)(0),[c,i]=Object(s.useState)(pc[0]),[r,n]=Object(s.useState)([]),[o,l]=Object(s.useState)(6),[b,m]=Object(s.useState)(100),[p,g]=Object(s.useState)([]),[O,x]=Object(s.useState)(!1),[f,y]=Object(s.useState)(!1),[v,w]=Object(s.useState)(""),S=(e,t)=>{p[t]=Number(e);const a=p.reduce(((e,t)=>e+t),0);m(a)};return Object(s.useEffect)((()=>{e.auth.error&&w("There was an error connnecting to the database - please try again")}),[e.auth.error]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(j.a,{onSubmit:function(a){if(a.preventDefault(),b>100)w("Total crop volume exceed 100%");else{var s={uid:e.auth.uid,upload:{...r,totalLand:t,landUnits:c,comment:O}};e.createMarketplaceData(s),y(!0)}},children:[Object(u.jsx)("p",{children:"We recommend that you plant a range of different crops within your field. Crop rotation has been proven to increase yield and minimise the damage of pests and disease."}),Object(u.jsxs)(j.a.Group,{className:"mb-3 land",children:[Object(u.jsx)(j.a.Label,{children:"Amount of land"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"land-size",onChange:e=>a(e.target.value),value:t,min:1,max:1e4,required:!0}),Object(u.jsx)(rt,{id:"land-unit",styling:"green dropdown-input-right",data:c,function:e=>{i(e)},items:pc})]})]}),Object(u.jsxs)(d.a,{className:"p-0 text-center ",children:[Object(u.jsxs)(De.a,{className:"mb-2 farm-row farm-header d-none d-sm-flex",children:[Object(u.jsx)(Fe.a,{children:"Plot"}),Object(u.jsx)(Fe.a,{children:"Crop"}),Object(u.jsx)(Fe.a,{children:"% of total land"}),Object(u.jsx)(Fe.a,{children:"Info"})]}),Object.keys(mc.categories).map(((e,a)=>Object(u.jsx)(hc,{rows:o,cat:e,index:a,setRowTotal:S,setFarmPlan:n,farmPlan:r,land:t,unit:c},e)))]}),Object(u.jsxs)("h3",{className:b>100?"auth-error":"success",children:["Total of land used: ",b.toFixed(0),"%"]}),Object(u.jsx)(rc,{}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{as:"textarea",rows:6,placeholder:"Comments",id:"comment",name:"comment",onChange:e=>{x(e.target.value)}})}),v&&Object(u.jsx)("p",{className:"auth-error",children:v}),Object(u.jsx)(h.a,{type:"submit",className:"sub-btn blue-btn",children:"Save Plan"})]}),Object(u.jsx)(Ut,{open:f,onClose:()=>{y(!1)},children:"Successfully Saved!"})]})}));function Oc(e){let{sector:t}=e;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"basic-title",children:["We are sorry.",Object(u.jsxs)("p",{children:["Planning for ",t," is currrently in development, we'll let you know when it's ready to go."]})]})})}var xc=Object(m.b)((e=>({data:e.data.getData,profile:e.firebase.profile})),(e=>({getFarmerData:()=>e(((e,t,a)=>{let{getFirebase:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){default:case"farm_admin":r=i;break;case"farm_sub":r=c.admin}s().firestore().collection("marketplace").doc(r).get().then((t=>{const a=[];a.push(t.data()),e({type:"GET_DATA",payload:a})})).catch((t=>{e({type:"GET_DATA_ERROR",err:t})}))}))})))((function(e){const[t,a]=Object(s.useState)(!0);Object(s.useEffect)((()=>{setTimeout((()=>a(!1)),1500)})),Object(s.useEffect)((()=>{e.getFarmerData()}),[]);const c=()=>{switch(e.data[0].sector){default:case"Horticulture":return Object(u.jsx)(gc,{});case"Livestock":case"Aquaculture":case"Insect Farm":return Object(u.jsx)(Oc,{sector:e.data[0].sector})}};return Object(u.jsx)(u.Fragment,{children:t?Object(u.jsx)(Vt,{}):Object(u.jsx)(ke,{header:"My Farm Plan",goTo:"/account",children:Object(u.jsx)(c,{})})})}));function fc(e){let{setForm:t,existing:a,setExisting:s}=e;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(j.a,{children:Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Are you an existing farmer and registered?"}),Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)(j.a.Check,{required:!0,type:"radio",name:"register",label:"Yes",onClick:()=>{t(1),s(!0)}})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(j.a.Check,{required:!0,type:"radio",name:"register",label:"No",onClick:()=>{t(3),s(!1)}})})]})]})})})}function yc(e){let{setForm:t,association:a,setAssociation:c}=e;const[i,r]=Object(s.useState)(!1);return Object(u.jsxs)(j.a,{onSubmit:()=>t(2),children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Are you a member of a local food system association?"}),Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)(j.a.Check,{required:!0,type:"radio",name:"member",label:"Yes",onClick:()=>{c(!0),r(!0)}})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(j.a.Check,{required:!0,type:"radio",name:"member",label:"No",onClick:()=>{c(!1),r(!0)}})})]})]}),i?Object(u.jsx)(u.Fragment,{children:a?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(j.a.Control,{required:!0,type:"text",placeholder:"Which local food system association?",id:"food-system-association",onChange:e=>c(e.target.value)}),Object(u.jsx)(h.a,{type:"submit",className:"blue-btn mt-3",children:"Next"})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"We recommend joining an organisation such as the NFU or Soil Association."}),Object(u.jsx)(h.a,{type:"submit",className:"blue-btn mt-3",children:"Next"})]})}):null]})}function vc(e){let{certificate:t,setCertificate:a,setForm:c}=e;const[i,r]=Object(s.useState)(0),[n,o]=Object(s.useState)(!1),[l,d]=Object(s.useState)(!1);Object(s.useEffect)((()=>{100===i&&o(!0)}),[i]);return Object(u.jsxs)(j.a,{onSubmit:()=>{c(3)},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"If registered, please upload your certificate of incorporation."}),Object(u.jsx)(j.a.Control,{required:!0,type:"file",id:"certificate",onInput:e=>{a(e.target.files[0])}}),Object(u.jsxs)("p",{style:{color:"rgb(131, 131, 131)"},children:["Uploaded ",i,"%"]})]}),n?Object(u.jsx)(h.a,{type:"submit",className:"blue-btn mt-3 shadow-none",children:"Next"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h.a,{className:"green-btn mt-3 shadow-none",onClick:e=>{t?(e.preventDefault(),(e=>{Qe.ref(`farmer-auth/${e.name}`).put(e).on("state_changed",(e=>{const t=Math.round(e.bytesTransferred/e.totalBytes*100);r(t)}),(e=>console.log(e)),(()=>{Qe.ref("farmer-auth").child(e.name).getDownloadURL().then((e=>console.log(e)))}))})(t)):(e.preventDefault(),d(!0))},children:"Submit Certificate"}),l?Object(u.jsx)("div",{className:"err",children:Object(u.jsx)("p",{children:"please upload a certificate of incorporation"})}):null]})]})}function wc(e){const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(!1);Object(s.useEffect)((()=>{if(e.country){let t=Ct.find((t=>t.name===e.country));a(t.code)}}),[e.country]),Object(s.useEffect)((()=>{Object(ja.b)(t)?Object(ja.a)(e.postcode,t)?i(!1):i(!0):i(!1)}),[e.postcode]);return Object(u.jsxs)(j.a,{onSubmit:()=>{c||e.setForm(4)},children:[e.existing?Object(u.jsx)("h5",{className:"mb-3",children:"Farm Location"}):Object(u.jsx)("h5",{className:"mb-3",children:"We would like to take your details now in order to connect you to your local community and have everything in place for when your farm is ready."}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Farm Name",id:"farm-name",onChange:t=>e.setFarm(t.target.value)})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Address line 1",id:"address-1",onChange:t=>e.setAddress1(t.target.value),required:!0})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Address line 2",id:"address-2",onChange:t=>e.setAddress2(t.target.value)})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Town",id:"town",onChange:t=>e.setTown(t.target.value),required:!0})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(nt,{id:"country",function:t=>{e.setCountry(t.target.value)},value:e.country,placeholder:"Country",items:Nt})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Control,{type:"text",placeholder:"Postcode",id:"postcode",onChange:t=>e.setPostcode(t.target.value),required:!0})}),c&&Object(u.jsx)("div",{className:"err",children:" Please enter a valid postcode"}),Object(u.jsx)(h.a,{type:"submit",className:"blue-btn shadow-none",children:"Next"})]})}function Sc(e){let{setForm:t,sector:a,setSector:s}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h5",{children:"What Farming Sector?"}),Object(u.jsxs)(j.a,{onSubmit:()=>t(5),children:[Object(u.jsx)(rt,{required:!0,id:"category",styling:"green",data:a,function:e=>{s(e)},items:["Horticulture","Livestock","Aquaculture","Insect farm","Other"]}),Object(u.jsx)(h.a,{className:"blue-btn shadow-none mt-3",type:"submit",children:"Next"})]})]})}const Cc=e=>Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:e.label}),e.list.map(((t,a)=>Object(u.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:Object(u.jsx)(j.a.Check,{type:"checkbox",label:t,id:t,checked:e.checkedState[a],onChange:()=>(t=>{const a=e.checkedState.map(((e,a)=>a===t?!e:e));e.setCheckedState(a)})(a)},t)})))]});function kc(e){let{setForm:t,practices:a,practice:c,setPractice:i}=e;const[r,n]=Object(s.useState)(!1),[o,l]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h5",{children:"Do you follow any of these sustainable farming practices? Select everything that applies;"}),Object(u.jsxs)(j.a,{children:[Object(u.jsx)(Cc,{list:a,checkedState:c,setCheckedState:i}),Object(u.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:Object(u.jsx)(j.a.Check,{type:"checkbox",label:"None of the above",id:"none",onChange:()=>n(!0)},"none")}),Object(u.jsx)(h.a,{className:"blue-btn shadow-none mt-3",onClick:e=>{c.every((e=>!1===e))?r?t(5.1):l(!0):(e.preventDefault(),t(6))},children:"Next"}),o&&Object(u.jsx)("div",{className:"err",children:Object(u.jsx)("p",{children:"Please select something."})})]})]})}function Nc(e){let{setForm:t,practices:a,futurePractice:c,setFuturePractice:i}=e;const[r,n]=Object(s.useState)(!1),[o,l]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h5",{children:'You selected "None of the above". Do you have a plan to adopt any of the following sustainable farming practices in the future?'}),Object(u.jsxs)(j.a,{children:[Object(u.jsx)(Cc,{list:a,checkedState:c,setCheckedState:i}),Object(u.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:Object(u.jsx)(j.a.Check,{type:"checkbox",label:"None of the above",id:"none",onChange:()=>n(!0)})}),Object(u.jsx)(h.a,{className:"blue-btn shadow-none mt-3",onClick:e=>{c.every((e=>!1===e))?r?t(5.3):l(!0):(e.preventDefault(),t(5.2))},children:"Next"}),o&&Object(u.jsx)("div",{className:"err",children:Object(u.jsx)("p",{children:"Please select something."})})]})]})}function Ec(e){let{setForm:t,setEffective:a}=e;return Object(u.jsxs)(j.a,{onSubmit:()=>t(6),children:[Object(u.jsx)("h5",{children:"When are you effecting the sustainable farming practice(s)?"}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Check,{required:!0,type:"radio",name:"effective",label:"Now",onClick:()=>a("Now")}),Object(u.jsx)(j.a.Check,{required:!0,type:"radio",name:"effective",label:"3 months time",onClick:()=>a("3months")}),Object(u.jsx)(j.a.Check,{required:!0,type:"radio",name:"effective",label:"6 months time",onClick:()=>a("6months")}),Object(u.jsx)(j.a.Check,{required:!0,type:"radio",name:"effective",label:"12 months time",onClick:()=>a("12months")})]}),Object(u.jsx)(h.a,{type:"submit",className:"blue-btn shadow-none mt-3",children:"Next"})]})}var Tc=a(1066);function _c(e){return Object(u.jsxs)(oe.a,{...e,size:"lg","aria-labelledby":"terms-cons-modal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"terms-cons-modal",children:"PLEASE READ THESE TERMS AND CONDITIONS CAREFULLY BEFORE USING THIS MARKETPLACE"})}),Object(u.jsxs)(oe.a.Body,{contentClassName:"modal",children:[Object(u.jsx)("h4",{children:"What\u2019s in these terms?"}),Object(u.jsx)("p",{children:Object(u.jsxs)("ol",{children:[Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"Who we are and how to contact us"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"By using our site you accept these terms"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"There are other terms that may apply to you"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"We may make changes to these terms"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"We may make changes to our site"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"We may suspend or withdraw our site"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"We may transfer this agreement to someone else"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"You must keep your account details safe"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"How you may use material on our site"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"Do not rely on information on our site"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"We are not responsible for websites we link to"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"User-generated content is not approved by us"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"How to complain about content uploaded by other users"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"Our responsibility for loss or damage suffered by you"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"How we may use your personal information"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"Uploading content to our site"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"Rights you are giving us to use material you upload"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"We are not responsible for viruses and you must not introduce them"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"Rules about linking to our site"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"Which country\u2019s laws apply to any disputes?"})}),Object(u.jsx)("li",{children:Object(u.jsx)("b",{children:"Our trademarks are registered"})})]})}),Object(u.jsx)("h4",{children:"Who we are and how to contact us"}),Object(u.jsxs)("p",{children:[Object(u.jsxs)("a",{href:"//intellidigest.com/",style:{color:"#AFBA15"},children:["https://intellidigest.com/"," "]}),Object(u.jsx)("b",{children:"and any other website "})," operated by IntelliDigest Ltd (\u201cWe\u201d). We are registered in Scotland under company number SC544884 and have our registered office at Edinburgh Business School Incubator, Heriot Watt University, Riccarton, Currie EH14 4AS. Our main trading address is Royal Academy of Engineering, Enterprise Hub, 4 Carlton House Terrace, London, SW1Y 5DG, United Kingdom."]}),Object(u.jsx)("p",{children:"Our VAT number is 342981288."}),Object(u.jsx)("p",{children:"We are a limited company."}),Object(u.jsxs)("p",{children:["To contact us, please email ",Object(u.jsx)("b",{children:"Info@IntelliDigest.com"})," or telephone our customer service line on ",Object(u.jsx)("b",{children:"0333 242 0822"}),"."]}),Object(u.jsx)("h4",{children:"By using our site you accept these terms"}),Object(u.jsx)("p",{children:"By using our site, you confirm that you accept these terms of use and that you agree to comply with them. If you do not agree to these terms, you must not use our site. We recommend that you print a copy of these terms for future reference."}),Object(u.jsx)("h4",{children:"There are other terms that may apply to you."}),Object(u.jsx)("p",{children:"These terms of use refer to the following additional terms, which also apply to your use of our site:"}),Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{children:["Our Privacy Policy"," ",Object(u.jsxs)("a",{href:" //intellidigest.com/privacy-policy/",style:{color:"#AFBA15"},children:[" ","https://intellidigest.com/privacy-policy/"]})," ","See further under ",Object(u.jsx)("b",{children:"How we may use your personal information."})," "]}),Object(u.jsx)("li",{children:"Our Cookie Policy which sets out information about the cookies on our site."}),Object(u.jsx)("li",{children:"Our Acceptable Use Policy which sets out the permitted uses and prohibited uses of our site. When using our site, you must comply with this Acceptable Use Policy."}),Object(u.jsx)("li",{children:"If you purchase goods from our site, our Terms and conditions of supply will apply to the sales."})]}),Object(u.jsx)("h4",{children:"We may make changes to these terms"}),Object(u.jsx)("p",{children:"We amend these terms from time to time. Every time you wish to use our site, please check these terms to ensure you understand the terms that apply at that time."}),Object(u.jsx)("h4",{children:"We may make changes to our site"}),Object(u.jsx)("p",{children:"We may update and change our site from time to time to reflect changes to our products, our users\u2019 needs and our business priorities."}),Object(u.jsx)("h4",{children:"We may suspend or withdraw our site"}),Object(u.jsx)("p",{children:"Our site is made available free of charge. We do not guarantee that our site, or any content on it, will always be available or be uninterrupted. We may suspend or withdraw or restrict the availability of all or any part of our site for business and operational reasons. We will try to give you reasonable notice of any suspension or withdrawal."}),Object(u.jsx)("p",{children:"You are also responsible for ensuring that all persons who access our site through your internet connection are aware of these terms of use and other applicable terms and conditions, and that they comply with them."}),Object(u.jsx)("h4",{children:"We may transfer this agreement to someone else"}),Object(u.jsx)("p",{children:"We may transfer our rights and obligations under these terms to another organisation. We will always tell you in writing if this happens and we will ensure that the transfer will not affect your rights under the contract."}),Object(u.jsx)("h4",{children:"You must keep your account details safe"}),Object(u.jsx)("p",{children:"If you choose, or you are provided with, a user identification code, password or any other piece of information as part of our security procedures, you must treat such information as confidential. You must not disclose it to any third party."}),Object(u.jsx)("p",{children:"We have the right to disable any user identification code or password, whether chosen by you or allocated by us, at any time, if in our reasonable opinion you have failed to comply with any of the provisions of these terms of use."}),Object(u.jsxs)("p",{children:["If you know or suspect that anyone other than you knows your user identification code or password, you must promptly notify us at"," ",Object(u.jsx)("b",{children:"info@IntelliDigest.com"}),"."]}),Object(u.jsx)("h4",{children:"You must keep your account details safe"}),Object(u.jsx)("p",{children:"We are the owner or the licensee of all intellectual property rights in our site, and in the material published on it. Those works are protected by copyright laws and treaties around the world. All such rights are reserved."}),Object(u.jsx)("p",{children:"You may print off one copy, and may download extracts, of any page(s) from our site for your personal use and you may draw the attention of others within your organisation to content posted on our site."}),Object(u.jsx)("p",{children:"You must not modify the paper or digital copies of any materials you have printed off or downloaded in any way, and you must not use any illustrations, photographs, video or audio sequences or any graphics separately from any accompanying text."}),Object(u.jsx)("p",{children:"Our status (and that of any identified contributors) as the authors of content on our site must always be acknowledged."}),Object(u.jsx)("p",{children:"You must not use any part of the content on our site for commercial purposes without obtaining a licence to do so from us or our licensors."}),Object(u.jsx)("p",{children:"If you print off, copy or download any part of our site in breach of these terms of use, your right to use our site will cease immediately and you must, at our option, return or destroy any copies of the materials you have made."}),Object(u.jsx)("h4",{children:"Do not rely on information on this site"}),Object(u.jsx)("p",{children:"The content on our site is provided for general information only. It is not intended to amount to advice on which you should rely. You must obtain professional or specialist advice before taking, or refraining from, any action on the basis of the content on our site."}),Object(u.jsx)("p",{children:"Although we make reasonable efforts to update the information on our site, we make no representations, warranties or guarantees, whether express or implied, that the content on our site is accurate, complete or up to date."}),Object(u.jsx)("h4",{children:"We are not responsible for websites we link to"}),Object(u.jsx)("p",{children:"Where our site contains links to other sites and resources provided by third parties, these links are provided for your information only. Such links should not be interpreted as approval by us of those linked websites or information you may obtain from them. We have no control over the contents of those sites or resources."}),Object(u.jsx)("h4",{children:"User-generated content is not approved by us"}),Object(u.jsx)("p",{children:"This website may include information and materials uploaded by other users of the site, including to bulletin boards and chat rooms. This information and these materials have not been verified or approved by us. The views expressed by other users on our site do not represent our views or values."}),Object(u.jsx)("h4",{children:"How to complain about content uploaded by other users"}),Object(u.jsxs)("p",{children:["If you wish to complain about content uploaded by other users, please contact us on"," ",Object(u.jsx)("a",{href:"//intellidigest.com/contact/",style:{color:"#AFBA15"},children:"https://intellidigest.com/contact/"}),"."]}),Object(u.jsx)("h4",{children:"Our responsibility for loss or damage suffered by you"}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Whether you are a consumer or a business user:"})}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"We do not exclude or limit in any way our liability to you where it would be unlawful to do so. This includes liability for death or personal injury caused by our negligence or the negligence of our employees, agents or subcontractors and for fraud or fraudulent misrepresentation."}),Object(u.jsx)("li",{children:"Different limitations and exclusions of liability will apply to liability arising as a result of the supply of any products to you, which will be set out in our Terms and conditions of supply."})]}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"If you are a business user:"})}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"We exclude all implied conditions, warranties, representations or other terms that may apply to our site or any content on it."}),Object(u.jsxs)("li",{children:["We will not be liable to you for any loss or damage, whether in contract, tort (including negligence), breach of statutory duty, or otherwise, even if foreseeable, arising under or in connection with:",Object(u.jsxs)("ol",{children:[Object(u.jsx)("li",{children:"use of, or inability to use, our site; or"}),Object(u.jsx)("li",{children:"use of or reliance on any content displayed on our site."})]})]}),Object(u.jsxs)("li",{children:["In particular, we will not be liable for:",Object(u.jsxs)("ol",{children:[Object(u.jsx)("li",{children:"loss of profits, sales, business, or revenue;"}),Object(u.jsx)("li",{children:"business interruption;"}),Object(u.jsx)("li",{children:"loss of anticipated savings;"}),Object(u.jsx)("li",{children:"loss of business opportunity, goodwill or reputation; or"}),Object(u.jsx)("li",{children:"any indirect or consequential loss or damage."})]})]})]}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"If you are a consumer user:"})}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"Please note that we only provide our site for domestic and private use. You agree not to use our site for any commercial or business purposes, and we have no liability to you for any loss of profit, loss of business, business interruption, or loss of business opportunity."}),Object(u.jsx)("li",{children:"If defective digital content that we have supplied, damages a device or digital content belonging to you and this is caused by our failure to use reasonable care and skill, we will either repair the damage or pay you compensation. However, we will not be liable for damage that you could have avoided by following our advice to apply an update offered to you free of charge or for damage that was caused by you failing to correctly follow installation instructions or to have in place the minimum system requirements advised by us."})]}),Object(u.jsx)("h4",{children:"How we may use your personal information"}),Object(u.jsxs)("p",{children:["We will only use your personal information as set out in our"," ",Object(u.jsxs)("a",{href:" //intellidigest.com/privacy-policy/",style:{color:"#AFBA15"},children:[" ","https://intellidigest.com/privacy-policy/"]})," "]}),Object(u.jsx)("h4",{children:"Uploading content to our site"}),Object(u.jsx)("p",{children:"Whenever you make use of a feature that allows you to upload content to our site, or to make contact with other users of our site, you must comply with the content standards set out in our Acceptable Use Policy."}),Object(u.jsx)("p",{children:"You warrant that any such contribution does comply with those standards, and you will be liable to us and indemnify us for any breach of that warranty. This means you will be responsible for any loss or damage we suffer as a result of your breach of warranty."}),Object(u.jsxs)("p",{children:["Any content you upload to our site will be considered non-proprietary. You retain all of your ownership rights in your content, but you are required to grant us and other users of our site a limited licence to use, store and copy that content and to distribute and make it available to third parties. The rights you license to us are described in ",Object(u.jsx)("b",{children:"Rights you are giving us to use material you upload"}),"."]}),Object(u.jsx)("p",{children:"We also have the right to disclose your identity to any third party who is claiming that any content posted or uploaded by you to our site constitutes a violation of their intellectual property rights, or of their right to privacy."}),Object(u.jsx)("p",{children:"We have the right to remove any posting you make on our site if, in our opinion, your post does not comply with the content standards set out in our Acceptable Use Policy."}),Object(u.jsx)("p",{children:"You are solely responsible for securing and backing up your content."}),Object(u.jsx)("p",{children:"We do not store terrorist content."}),Object(u.jsx)("h4",{children:"Rights you are giving us to use material you upload"}),Object(u.jsx)("p",{children:"When you upload or post content to our site, you grant us the following rights to use that content:"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"LICENCES GRANTED TO THE WEBSITE OWNER."}),Object(u.jsx)("li",{children:"LICENCES GRANTED TO OTHER USERS OF THE SITE OR TO THIRD PARTIES."})]}),Object(u.jsx)("h4",{children:"We are not responsible for viruses and you must not introduce them"}),Object(u.jsx)("p",{children:"We do not guarantee that our site will be secure or free from bugs or viruses. You are responsible for configuring your information technology, computer programmes and platform to access our site. You should use your own virus protection software."}),Object(u.jsx)("p",{children:"You must not misuse our site by knowingly introducing viruses, trojans, worms, logic bombs or other material that is malicious or technologically harmful. You must not attempt to gain unauthorised access to our site, the server on which our site is stored or any server, computer or database connected to our site. You must not attack our site via a denial-of-service attack or a distributed denial-of service attack. By breaching this provision, you would commit a criminal offence under the Computer Misuse Act 1990. We will report any such breach to the relevant law enforcement authorities and we will co-operate with those authorities by disclosing your identity to them. In the event of such a breach, your right to use our site will cease immediately."}),Object(u.jsx)("h4",{children:"Rules about linking to our site"}),Object(u.jsx)("p",{children:"You may link to our home page, provided you do so in a way that is fair and legal and does not damage our reputation or take advantage of it."}),Object(u.jsx)("p",{children:"You must not establish a link in such a way as to suggest any form of association, approval or endorsement on our part where none exists."}),Object(u.jsx)("p",{children:"You must not establish a link to our site in any website that is not owned by you."}),Object(u.jsx)("p",{children:"Our site must not be framed on any other site, nor may you create a link to any part of our site other than the home page."}),Object(u.jsx)("p",{children:"We reserve the right to withdraw linking permission without notice."}),Object(u.jsx)("p",{children:"The website in which you are linking must comply in all respects with the content standards set out in our Acceptable Use Policy."}),Object(u.jsxs)("p",{children:["If you wish to link to or make any use of content on our site other than that set out above, please contact ",Object(u.jsx)("b",{children:"info@IntelliDigest.com"}),"."," "]}),Object(u.jsx)("h4",{children:"Which country\u2019s laws apply to any disputes?"}),Object(u.jsx)("p",{children:"If you are a consumer, please note that these terms of use, their subject matter and their formation, are governed by Scottish law. You and we both agree that the courts of Scotland will have exclusive jurisdiction except that if you are a resident of Northern Ireland you may also bring proceedings in Northern Ireland, and if you are resident of England or Wales, you may also bring proceedings in England or Wales."}),Object(u.jsx)("p",{children:"If you are a business, these terms of use, their subject matter and their formation (and any non-contractual disputes or claims) are governed by Scottish law. We both agree to the exclusive jurisdiction of the courts of Scotland."}),Object(u.jsx)("h4",{children:"Our trade marks are registered"}),Object(u.jsxs)("p",{children:["IntelliDigest is an international registered trademark of IntelliDigest Ltd. You are not permitted to use them without our approval, unless they are part of material you are using as permitted under ",Object(u.jsx)("b",{children:"How you may use material on our site."})]})]}),Object(u.jsx)(oe.a.Footer,{children:Object(u.jsx)(Tc.a,{onClick:e.onHide,children:"Close"})})]})}function Dc(){const[e,t]=c.a.useState(!1);return Object(u.jsxs)("div",{children:[Object(u.jsx)(Tc.a,{onClick:()=>t(!0),children:"TERMS AND CONDITIONS"}),Object(u.jsx)(_c,{show:e,onHide:()=>t(!1)})]})}function Fc(e){let{handleSubmit:t}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h5",{children:"You're all set! Please accept the terms and conditions to continue."}),Object(u.jsx)(Dc,{}),Object(u.jsx)(j.a,{onSubmit:e=>t(e),children:Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Check,{type:"checkbox",label:"I accept the terms and conditions.",required:!0}),Object(u.jsx)(h.a,{className:"blue-btn shadow-none mt-3",type:"submit",children:"Start"})]})})]})}var Rc=Object(m.b)((e=>({auth:e.firebase.auth,profile:e.firebase.profile})),(e=>({becomeSeller:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"farm_admin":default:n=r;break;case"farm_sub":n=i.admin}const o=c().firestore();o.collection("users").doc(n).set({...e.profile},{merge:!0}).then((()=>o.collection("marketplace").doc(n).set({...e.info},{merge:!0}))).then((()=>{t({type:"SELLER_SUCCESS"})})).catch((e=>{console.log("err"),t({type:"SELLER_ERROR",err:e})}))})(t))})))((function(e){const[t,a]=Object(s.useState)(0),c=t=>{let a;e.certificate?(a={profile:{isSeller:!0},info:{email:e.auth.email,association:e.association,certificate:`/farmer-auth/${e.certificate.name}`,location:[e.farm,e.address1,e.address2,e.town,e.country,e.postcode],sector:e.sector,practice:e.practice,futurePractice:e.futurePractice,effective:e.effective}},t.preventDefault(),e.becomeSeller(a),he("Success!","Thanks for joining the plan to Save")):(a={profile:{isSeller:!0},info:{email:e.auth.email,location:[e.farm,e.address1,e.address2,e.town,e.country,e.postcode],sector:e.sector,practice:e.practice,futurePractice:e.futurePractice,effective:e.effective}},t.preventDefault(),e.becomeSeller(a))};switch(Object(s.useEffect)((()=>{}),[t]),t){case 0:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(fc,{setForm:a,existing:e.existing,setExisting:e.setExisting})});case 1:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(yc,{setForm:a,setAssociation:e.setAssociation,association:e.association})});case 2:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(vc,{setForm:a,certificate:e.certificate,setCertificate:e.setCertificate})});case 3:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(wc,{setForm:a,farm:e.farm,setFarm:e.setFarm,address1:e.address1,setAddress1:e.setAddress1,address2:e.address2,setAddress2:e.setAddress2,town:e.town,setTown:e.setTown,country:e.country,setCountry:e.setCountry,postcode:e.postcode,setPostcode:e.setPostcode,existing:e.existing})});case 4:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(Sc,{setForm:a,sector:e.sector,setSector:e.setSector})});case 5:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(kc,{setForm:a,practices:e.practices,practice:e.practice,setPractice:e.setPractice})});case 5.1:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(Nc,{setForm:a,practices:e.practices,futurePractice:e.futurePractice,setFuturePractice:e.setFuturePractice})});case 5.2:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(Ec,{setForm:a,setEffective:e.setEffective})});case 5.3:return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"basic-text",children:"Thanks for your interest in the World Food tracker. We only engage with sustainable farmers. Please, get back to us once you decide to farm sustainably."}),Object(u.jsx)("div",{className:"basic-text mb-2",children:"We are here to support you."}),Object(u.jsxs)("div",{className:"basic-text mb-2",children:["To learn more about our approach to sustainability, check out the Food Industry Sustainability Index on our website"," ",Object(u.jsx)("a",{href:"https://intellidigest.com/services/food-system-sustainability/food-industry-sustainability-index/?doing_wp_cron=1657288516.7443490028381347656250",children:"here"}),"."]})]});case 6:return Object(u.jsx)("div",{className:"auth",children:Object(u.jsx)(Fc,{handleSubmit:c})});default:return Object(u.jsx)("div",{className:"basic-title",children:"We're sorry, you cannot make a plan with us at this time."})}}));function Pc(){const[e,t]=Object(s.useState)(!1),[a,c]=Object(s.useState)(!1),[i,r]=Object(s.useState)(""),[n,o]=Object(s.useState)(""),[l,d]=Object(s.useState)(""),[b,j]=Object(s.useState)(""),[h,m]=Object(s.useState)(""),[p,g]=Object(s.useState)(""),[O,x]=Object(s.useState)(""),[f,y]=Object(s.useState)("Horticulture");let v;switch(f){default:case"Horticulture":v=["Permaculture","Biodynamic Farming","Agroforestry","Food forestry","Poly culture","Regenerative agriculture","Crop rotation","Mulching/ground cover","Growth of heirlooms","Natural pest management","Others"];break;case"Livestock":v=["Permaculture","Natural animal raising","Others"];break;case"Aquaculture":v=["Permaculture","Natural fish harvest","Others"];break;case"Insect Farm":v=["Permaculture","Others"];break;case"Other":v=["Permaculture","Biodynamic Farming","Agroforestry","Food forestry","Poly culture","Regenerative agriculture","Crop rotation","Mulching/ground cover","Growth of heirlooms","Natural animal raising","Natural pest management","Natural fish harvest","Others"]}const[w,S]=Object(s.useState)([]),[C,k]=Object(s.useState)([]),[N,E]=Object(s.useState)("");return Object(s.useEffect)((()=>{S(new Array(v.length).fill(!1)),k(new Array(v.length).fill(!1)),console.log(w)}),[f]),Object(u.jsx)(ke,{goTo:"/account",header:"My Farm Plan",subtitle:"Build your plan",children:Object(u.jsx)(Rc,{existing:e,setExisting:t,association:a,setAssociation:c,certificate:i,setCertificate:r,farm:n,setFarm:o,address1:l,setAddress1:d,address2:b,setAddress2:j,town:h,setTown:m,country:p,setCountry:g,postcode:O,setPostcode:x,sector:f,setSector:y,practices:v,practice:w,setPractice:S,futurePractice:C,setFuturePractice:k,effective:N,setEffective:E})})}function Ic(e){let t;return t=e.items.map(((e,t)=>Object(u.jsx)("li",{children:e},t))),Object(u.jsx)("div",{style:{padding:"0 0 0 4%"},children:Object(u.jsx)("ul",{children:t})})}const Mc=e=>Object(u.jsxs)(ke,{goTo:"/account",header:"My Meal Plan",subtitle:"Plan To Save",children:[Object(u.jsx)("p",{children:e.message}),Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Add preferred location(s) for pick up."}),Object(u.jsxs)(rs.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Control,{type:"text",placeholder:"City",id:"pick-up-location"}),Object(u.jsx)(h.a,{className:"green-btn",id:"cities",onClick:t=>{e.addCity([...e.cities,t.target.previousSibling.value])},children:"Add"})]}),Object(u.jsx)(Ic,{items:e.cities})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Add preferred pick up day(s)"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(nt,{id:"choose-day",function:t=>{e.setDay(t.target.value)},value:e.day,placeholder:"Choose available days",items:["Mondays","Tuesdays","Wednesdays","Thursdays","Fridays"]}),Object(u.jsx)(h.a,{className:"green-btn",id:"days",onClick:t=>{e.addDay([...e.days,t.target.previousSibling.value])},children:"Add"})]}),Object(u.jsx)(Ic,{items:e.days})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Add preferred pick up times(s) (24 hr)"}),Object(u.jsxs)(rs.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Control,{type:"time",placeholder:"City",id:"pick-up-location"}),Object(u.jsx)(h.a,{className:"green-btn",id:"times",onClick:t=>{e.addTime([...e.times,t.target.previousSibling.value])},children:"Add"})]}),Object(u.jsx)(Ic,{items:e.times})]})]}),Object(u.jsx)(h.a,{className:"green-btn",onClick:t=>e.setForm("autoCreate"),children:"Next"})]});var Ac=Object(m.b)((e=>({auth:e.firebase.auth,profile:e.firebase.profile})),(e=>({becomeConsumer:t=>e(g(t))})))((e=>{const[t,a]=Object(s.useState)("start"),[c,i]=Object(s.useState)([]),[r,n]=Object(s.useState)([]),[o,l]=Object(s.useState)(""),[d,b]=Object(s.useState)([]);Object(s.useEffect)((()=>{}),[t]);const m=t=>{var a={uid:e.auth.uid,upload:{email:e.auth.email,cities:c,days:r,times:d},profile:{isConsumer:!0}};e.becomeConsumer(a)};switch(t){default:case"start":return Object(u.jsx)(ke,{goTo:"account",header:"My Meal Plan",subtitle:"Plan To Save",children:Object(u.jsxs)(j.a,{children:[Object(u.jsx)(j.a.Label,{children:"Do you have a meal preparation plan?"}),Object(u.jsx)(j.a.Check,{type:"radio",name:"meal-plan",label:"Yes",onClick:m}),Object(u.jsx)(j.a.Check,{type:"radio",name:"meal-plan",label:"No",onClick:()=>a("location")})]})});case"location":return Object(u.jsx)(Mc,{setForm:a,addCity:i,cities:c,setDay:l,day:o,addDay:n,days:r,addTime:b,times:d,message:"Thanks for choosing Plan To Save. To serve you better, we need to know a preferred location, day and time for picking up your food item. It may be close to work or home; whatever works best for you."});case"autoCreate":return Object(u.jsx)(ke,{goTo:"/account",header:"My Meal Plan",subtitle:"Plan To Save",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Do you want the tracker to work with you in the next 4 weeks to develop a plan?"}),Object(u.jsx)(j.a.Check,{type:"radio",name:"develop-plan",label:"Yes"}),Object(u.jsx)(j.a.Check,{type:"radio",name:"develop-plan",label:"No"})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Do you want us to create a plan for you based on your availability for pickup and your local suppliers?"}),Object(u.jsx)(j.a.Check,{type:"radio",name:"create-plan",label:"Yes",onClick:e=>a("develop-plan")}),Object(u.jsx)(j.a.Check,{type:"radio",name:"develop-plan",label:"No",onClick:m})]})]})});case"develop-plan":return Object(u.jsxs)(ke,{goto:"/account",header:"My Meal Plan",subtitle:"Plan To Save",children:[Object(u.jsx)("p",{children:"We are onboarding farmers in your location to create a plan for you. Check back soon."}),Object(u.jsx)(h.a,{className:"green-btn",onClick:m,children:"Okay"})]})}})),Wc=(a(521),a(1070)),Lc=a(1051);var Bc=Object(m.b)((e=>({profile:e.firebase.profile})),(e=>({recommend:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;c().firestore().collection("recommendations").add(e).then((()=>{t({type:"CREATE_DATA"})})).catch((e=>{t({type:"CREATE_DATA_ERROR",err:e})}))})(t))})))((function(e){const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)("");return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"basic-title-left",children:[Object(u.jsx)("div",{className:"mb-3",children:"We have not identified a sustainable restaurant in your location, please, recommend a restaurant or check back later."}),Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={restaurant:t,email:c,location:r};e.recommend(a)})(),e.handleFormClose()},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Restaurant Name."}),Object(u.jsx)(j.a.Control,{type:"text",onChange:e=>a(e.target.value)})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Location."}),Object(u.jsx)(j.a.Control,{type:"text",onChange:e=>n(e.target.value)})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Their email address."}),Object(u.jsx)(j.a.Control,{type:"text",onChange:e=>i(e.target.value)})]}),Object(u.jsx)(h.a,{className:"green-btn",type:"submit",children:"Submit"})]})]})})}));function Gc(e){let{setMealType:t}=e;const[a,c]=Object(s.useState)("Any");Object(s.useEffect)((()=>{(()=>{switch(a){default:case"Any":t("");break;case"Breakfast":t("Breakfast");break;case"Lunch":t("Lunch");break;case"Dinner":t("Dinner");break;case"Snack":t("Snack")}})()}),[a]);return Object(u.jsx)(rt,{id:"meal-type",styling:"green dropdown-input",data:a,items:["Any","Breakfast","Lunch","Dinner","Snack"],function:e=>c(e)})}const Uc=async(e,t)=>{const a=`https://api.edamam.com/auto-complete?app_id=e61e6c91&app_key=25fbf2bfe68aaeac0f67859971acbee0&q=${e}&limit=5`,s=await fetch(a);t(await s.json())};var Yc=a(1059),qc=a(1055);function Hc(e){let{handleFoodSearch:t}=e;const[a,c]=Object(s.useState)(""),[i,r]=Object(s.useState)([]);let n;return Object(s.useEffect)((()=>{Uc(a,r)}),[a]),n=""===a?["..."]:i,Object(u.jsx)(u.Fragment,{children:a?Object(u.jsx)(Yc.a,{onInputChange:e=>{c(e.target.value),t(e)},onChange:e=>{t(e)},id:"food",options:n,freeSolo:!0,sx:{width:"100%",lineHeight:"calc(1.5em + .75rem + 2px)"},renderInput:e=>Object(u.jsx)(qc.a,{...e,label:"Item"})}):Object(u.jsx)(Yc.a,{onInputChange:e=>{c(e.target.value),t(e)},onChange:e=>{t(e)},id:"food",freeSolo:!0,options:n,getOptionDisabled:e=>e===n[0],sx:{width:"100%",lineHeight:"calc(1.5em + .75rem + 2px)"},renderInput:e=>Object(u.jsx)(qc.a,{...e,label:"Item"})})})}const Vc=e=>(t,a,s)=>{let{getFirestore:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}e.upload.item;c().collection("marketplace").doc(n).collection("shoppingList").doc(e.week).collection(e.week).add(e.upload).then((a=>{c().collection("marketplace").doc(n).collection("shoppingList").doc(e.week).collection(e.week).doc(a.id).set({id:a.id},{merge:!0}),t({type:"CREATE_SHOP"})})).catch((e=>{t({type:"CREATE_SHOP_ERROR",err:e})}))},zc=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("shoppingList").doc(e.week).collection(e.week).doc(e.id).delete().then((()=>t({type:"DELETE_SHOP"}))).catch((e=>{t({type:"DELETE_SHOP_ERROR",err:e})}))},$c=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("newShoppingList").doc(e.week).collection(e.week).doc(e.id).delete().then((()=>t({type:"DELETE_NEW_SHOP"}))).catch((e=>{t({type:"DELETE_BEW_SHOP_ERROR",err:e})}))},Kc=async(e,t)=>{const a=`https://api.edamam.com/api/food-database/v2/parser?app_id=e61e6c91&app_key=25fbf2bfe68aaeac0f67859971acbee0&ingr=${e}&nutrition-type=cooking`,s=await fetch(a);t((await s.json()).hints[0].food.foodId)};var Jc=Object(m.b)(null,(e=>({createMealPlanData:t=>e(de(t)),createRecipe:t=>e(ns(t)),addToShoppingList:t=>e(Vc(t))})))((function(e){const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(!0),d={food:"",quantity:0,measure:"g",foodId:""},[b,m]=Object(s.useState)(d),p=e=>{m({...b,foodId:e})},[g,O]=Object(s.useState)([]);Object(s.useEffect)((()=>{console.log("ingredients",g)}),[g]);const x=g.map(((e,t)=>Object(u.jsxs)("li",{children:[e.food,": ",e.quantity,e.measure]},t))),[f,y]=Object(s.useState)(0),v=()=>{const a={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{meal:t,mealType:c,ingredients:g}};console.log("checking props:",e),e.createMealPlanData(a),y(f+1),o&&e.createRecipe(a),e.addToShoppingList(a)};return Object(u.jsxs)(j.a,{onSubmit:t=>{t.preventDefault(),v(),e.handleFormClose()},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Meal Name"}),Object(u.jsx)(j.a.Control,{type:"text",id:"mealName",onChange:e=>{a(e.target.value)},required:!0})]}),Object(u.jsx)(Gc,{setMealType:i,ownRecipe:!0}),Object(u.jsx)("div",{style:{padding:"0 0 0 4%"},children:Object(u.jsx)("ul",{children:x})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(Hc,{handleFoodSearch:e=>{e.target.textContent?m({...b,food:e.target.textContent}):m({...b,food:e.target.value})}})}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Weight/Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",onChange:e=>(e=>{e.target.textContent?m({...b,[e.target.id]:e.target.textContent}):m({...b,[e.target.id]:e.target.value})})(e),value:b.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:b.measure,items:["g","kg","/","mL","L","/","tsp","tbsp","cups","units","pcs","oz","lbs"],function:e=>{m({...b,measure:e})}})]})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(h.a,{className:"green-btn shadow-none",id:"add ingredient",onClick:()=>{(async()=>{""!==b.food?Kc(b.food,p).then((()=>{O((e=>[...e,b])),m(d)})):n("Please input an ingredient to add.")})()},children:"Add Ingredient"})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(j.a.Check,{type:"checkbox",defaultChecked:!0,label:"Save meal",onClick:()=>{l(!o)}})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Done"})})]})})),Qc=a(596);const Zc="html5qr-code-full-region";var Xc=e=>(Object(s.useEffect)((()=>{const t=(e=>{let t={};return e.fps&&(t.fps=e.fps),e.qrbox&&(t.qrbox=e.qrbox),e.aspectRatio&&(t.aspectRatio=e.aspectRatio),void 0!==e.disableFlip&&(t.disableFlip=e.disableFlip),t})(e),a=!0===e.verbose;if(!e.qrCodeSuccessCallback)throw"qrCodeSuccessCallback is required callback.";const s=new Qc.a(Zc,t,a);return s.render(e.qrCodeSuccessCallback,e.qrCodeErrorCallback),()=>{s.clear().catch((e=>{console.error("Failed to clear html5QrcodeScanner. ",e)}))}}),[]),Object(u.jsx)("div",{id:Zc}));class ei extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){const{hasError:e,error:t}=this.state;return e?Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Something went wrong \ud83d\ude2d"}),t.message&&Object(u.jsxs)("span",{children:["Here's the error: ",t.message]})]}):this.props.children}}a(245);var ti=a(1048);const ai="5532003c",si="511d39184173c54ebc5d02a5063a7b87";var ci=Object(m.b)(null,(e=>({createMealPlanData:t=>e(de(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(null),[o,l]=Object(s.useState)([]),[d,b]=Object(s.useState)([]),[m,p]=Object(s.useState)([]),[g,O]=Object(s.useState)([]),[x,f]=Object(s.useState)([]),[y,v]=Object(s.useState)([]),[w,S]=Object(s.useState)([]),[C,k]=Object(s.useState)([]),N={food:"",quantity:0,measure:"g",foodId:""},[E,T]=Object(s.useState)(N);Object(s.useEffect)((()=>{console.log("ingredients",o)}),[o]);const[_,D]=Object(s.useState)(0),F=()=>{const t={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{meal:c,ingredients:o,mealType:g,totalDaily:x,totalNutrients:y,url:C,recipeYield:w}};e.createMealPlanData(t),D(_+1)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Xc,{fps:10,qrbox:250,disableFlip:!1,qrCodeSuccessCallback:(e,t)=>{fetch(`https://world.openfoodfacts.org/api/v0/product/${t.decodedText}.json`).then((e=>e.json())).then((e=>{let t;return void 0==e.product.product_name_en?(t=e.product.product_name,i(t)):(t=e.product.product_name_en,i(t)),fetch(`https://api.edamam.com/api/recipes/v2?app_id=${ai}&app_key=${si}&type=public&q=${t}`)})).then((e=>e.json())).then((e=>{console.log("name:",e.hits),p(e.hits)})).catch((e=>{console.log(e.message),n(e.message)})).catch((e=>{console.log(e.message),n(e.message)}))}}),Object(u.jsx)("p",{style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:c}),Object(u.jsxs)(ti.a,{variant:"success",children:[Object(u.jsx)(ti.a.Heading,{children:"Missing some items in your meal plan?"}),Object(u.jsx)("p",{children:"The scanner allows you to add more items to your meal plan"})]}),Object(u.jsxs)(j.a,{onSubmit:t=>{t.preventDefault(),F(),e.handleFormClose()},children:[Object(u.jsx)(j.a.Group,{children:Object(u.jsx)("li",{children:m&&m.map((e=>Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:Object(u.jsx)("div",{class:"card",children:Object(u.jsxs)("div",{class:"card-body",children:[Object(u.jsx)("h5",{class:"card-title",children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:null===e||void 0===e?void 0:e.recipe.label}),Object(u.jsx)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",style:{alignItems:"right",marginLeft:"20px"},value:null===e||void 0===e?void 0:e.recipe.label,onClick:t=>{(e=>{i(e.target.value)})(t),O(null===e||void 0===e?void 0:e.recipe.mealType),f(null===e||void 0===e?void 0:e.recipe.totalDaily),v(null===e||void 0===e?void 0:e.recipe.totalNutrients),S(null===e||void 0===e?void 0:e.recipe.yield),k(null===e||void 0===e?void 0:e.recipe.url)}})]})}),Object(u.jsx)("p",{class:"card-text",children:null===e||void 0===e?void 0:e.recipe.ingredientLines.map((e=>Object(u.jsx)("ul",{children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",children:e}),Object(u.jsx)("input",{class:"form-check-input",type:"checkbox",value:e,id:"flexCheckDefault",style:{alignItems:"right",marginLeft:"20px",alignItems:"left"},onClick:e=>{(e=>{T(E.food=e.target.value),l((e=>[...e,E])),T(N)})(e)}})]})})))})]})})})})))})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Save"})})]}),r&&Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Oops..Could not fetch food item, pls try another barcode..\ud83d\ude2d"})})]})}));const ii="5532003c",ri="511d39184173c54ebc5d02a5063a7b87";Object(m.b)(null,(e=>({createMealPlanData:t=>e(de(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(null),[o,l]=Object(s.useState)([]),[d,b]=Object(s.useState)([]),[m,p]=Object(s.useState)([]),[g,O]=Object(s.useState)([]),[x,f]=Object(s.useState)([]),[y,v]=Object(s.useState)([]),[w,S]=Object(s.useState)([]),[C,k]=Object(s.useState)([]),N={food:"",quantity:0,measure:"g",foodId:""},[E,T]=Object(s.useState)(N);Object(s.useEffect)((()=>{console.log("ingredients",o)}),[o]);const[_,D]=Object(s.useState)(0),F=()=>{const t={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{meal:c,ingredients:o,mealType:g,totalDaily:x,totalNutrients:y,url:C,recipeYield:w}};e.createMealPlanData(t),D(_+1)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Xc,{fps:10,qrbox:250,disableFlip:!1,qrCodeSuccessCallback:(e,t)=>{fetch(`https://world.openfoodfacts.org/api/v0/product/${t.decodedText}.json`).then((e=>e.json())).then((e=>{let t;return void 0==e.product.product_name_en?(t=e.product.product_name,i(t)):(t=e.product.product_name_en,i(t)),fetch(`https://api.edamam.com/api/recipes/v2?app_id=${ii}&app_key=${ri}&type=public&q=${t}`)})).then((e=>e.json())).then((e=>{console.log("name:",e.hits),p(e.hits)})).catch((e=>{console.log(e.message),n(e.message)})).catch((e=>{console.log(e.message),n(e.message)}))}}),Object(u.jsx)("p",{style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:c}),Object(u.jsxs)(ti.a,{variant:"success",children:[Object(u.jsx)(ti.a.Heading,{children:"Missing some items in your meal plan?"}),Object(u.jsx)("p",{children:"The scanner allows you to add more items to your meal plan"})]}),Object(u.jsxs)(j.a,{onSubmit:t=>{t.preventDefault(),F(),e.handleFormClose()},children:[Object(u.jsx)(j.a.Group,{children:Object(u.jsx)("li",{children:m&&m.map((e=>Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:Object(u.jsx)("div",{class:"card",children:Object(u.jsxs)("div",{class:"card-body",children:[Object(u.jsx)("h5",{class:"card-title",children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:null===e||void 0===e?void 0:e.recipe.label}),Object(u.jsx)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",style:{alignItems:"right",marginLeft:"20px"},value:null===e||void 0===e?void 0:e.recipe.label,onClick:t=>{(e=>{i(e.target.value)})(t),O(null===e||void 0===e?void 0:e.recipe.mealType),f(null===e||void 0===e?void 0:e.recipe.totalDaily),v(null===e||void 0===e?void 0:e.recipe.totalNutrients),S(null===e||void 0===e?void 0:e.recipe.yield),k(null===e||void 0===e?void 0:e.recipe.url)}})]})}),Object(u.jsx)("p",{class:"card-text",children:null===e||void 0===e?void 0:e.recipe.ingredientLines.map((e=>Object(u.jsx)("ul",{children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",children:e}),Object(u.jsx)("input",{class:"form-check-input",type:"checkbox",value:e,id:"flexCheckDefault",style:{alignItems:"right",marginLeft:"20px",alignItems:"left"},onClick:e=>{(e=>{T(E.food=e.target.value),l((e=>[...e,E])),T(N)})(e)}})]})})))})]})})})})))})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Save"})})]}),r&&Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Oops..Could not fetch food item, pls try another barcode..\ud83d\ude2d"})})]})}));function ni(e){let{value:t}=e;const[a,c]=Object(s.useState)("unconfirmed"),[i,r]=Object(s.useState)(!0),[n,o]=Object(s.useState)(!1),[l,d]=Object(s.useState)("+ scan from barcode"),b=()=>{r(!1),c("unconfirmed")};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>r(!0)})})}),Object(u.jsxs)(oe.a,{show:i,onHide:b,size:"lg","aria-labelledby":"add meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",className:"basic-title-left basic-lg",children:"Add new meal for"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsxs)(oi,{eatLater:a,setEatLater:c,handleFormClose:b,value:t,children:[Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>(o(!n),void d(n?"+ scan from barcode":"- input manually")),children:l}),n?Object(u.jsx)(ci,{value:t,handleFormClose:b}):Object(u.jsx)(Jc,{value:t,handleFormClose:b})]})})]})]})}function oi(e){switch(e.eatLater){default:case"unconfirmed":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"basic-title-left",children:"Eat Now or Later"}),Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{styling:"green",text:"Eat Now",onClick:()=>e.setEatLater("no")})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{styling:"green",text:"Eat Later",onClick:()=>e.setEatLater("yes")})})]})]});case"no":case"yes":return Object(u.jsx)(u.Fragment,{children:e.children})}}function li(e){let{value:t}=e;const[a,c]=Object(s.useState)("unconfirmed"),[i,r]=Object(s.useState)(!0),[n,o]=Object(s.useState)(!1),[l,d]=Object(s.useState)("+ scan from barcode"),b=()=>{r(!1),c("unconfirmed")};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>r(!0)})})}),Object(u.jsxs)(oe.a,{show:i,onHide:b,size:"lg","aria-labelledby":"add meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",className:"basic-title-left basic-lg",children:"Eat Now or Add Recipe"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsxs)(di,{eatRecipe:a,setEatRecipe:c,handleFormClose:b,value:t,children:[Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>(o(!n),void d(n?"+ scan from barcode":"- input manually")),children:l}),n?Object(u.jsx)(ci,{value:t,handleFormClose:b}):Object(u.jsx)(Jc,{value:t,handleFormClose:b})]})})]})]})}function di(e){switch(e.eatRecipe){default:case"unconfirmed":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"basic-title-left",children:"Eat Now or Add Recipe"}),Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{styling:"green",text:"Eat Now",onClick:()=>e.setEatRecipe("no")})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{styling:"green",text:"Add Recipe",onClick:()=>e.setEatRecipe("yes")})})]})]});case"no":case"yes":return Object(u.jsx)(u.Fragment,{children:e.children})}}function ui(e){let{value:t}=e;const[a,c]=Object(s.useState)("unconfirmed"),[i,r]=Object(s.useState)(!0),[n,o]=Object(s.useState)(!1),[l,d]=Object(s.useState)("+ scan from barcode"),b=()=>{r(!1),c("unconfirmed")};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>r(!0)})})}),Object(u.jsxs)(oe.a,{show:i,onHide:b,size:"lg","aria-labelledby":"add meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",className:"basic-title-left basic-lg",children:"Add new meal for"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsxs)(bi,{raw:a,setRaw:c,handleFormClose:b,value:t,children:[Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>(o(!n),void d(n?"+ scan from barcode":"- input manually")),children:l}),n?Object(u.jsx)(ci,{value:t,handleFormClose:b}):Object(u.jsx)(Jc,{value:t,handleFormClose:b})]})})]})]})}function bi(e){switch(e.raw){default:case"unconfirmed":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"basic-title-left",children:"Prepared Or Raw"}),Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{styling:"green",text:"Prepared",onClick:()=>e.setRaw("no")})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{styling:"green",text:"Raw",onClick:()=>e.setRaw("yes")})})]})]});case"no":return Object(u.jsx)(ni,{value:e.value,handleFormClose:e.handleFormClose});case"yes":return Object(u.jsx)(li,{value:e.value,handleFormClose:e.handleFormClose})}}function ji(e){let{show:t,setShow:a,value:c}=e;const[i,r]=Object(s.useState)("unconfirmed"),[n,o]=Object(s.useState)("+ scan from barcode"),l=()=>{a(!1),r("unconfirmed")};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>a(!0)})})}),Object(u.jsxs)(oe.a,{show:t,onHide:l,size:"lg","aria-labelledby":"add meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsxs)(oe.a.Title,{id:"add-meal",className:"basic-title-left basic-lg",children:["Add new meal for ",c.format("DD/MM")]})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(hi,{eatingOut:i,setEatingOut:r,handleFormClose:l,value:c})})]})]})}function hi(e){switch(e.eatingOut){default:case"unconfirmed":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"basic-title-left",children:"Are you cooking at home or eating out?"}),Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{styling:"green",text:"At Home",onClick:()=>e.setEatingOut("no")})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{styling:"green",text:"Eating Out",onClick:()=>e.setEatingOut("yes")})})]})]});case"yes":return Object(u.jsx)(Bc,{handleFormClose:e.handleFormClose});case"no":return Object(u.jsx)(ui,{value:e.value})}}function mi(e){const t=e.clone().startOf("month").startOf("week"),a=e.clone().endOf("month").endOf("week"),s=t.clone().subtract(1,"day"),c=[];for(;s.isBefore(a,"day");)c.push(Array(7).fill(0).map((()=>s.add(1,"day").clone())));return c}function pi(e){return e.isBefore(new Date,"day")}function gi(e,t){return pi(e)?"before":function(e,t){return t.isSame(e,"day")}(e,t)?"selected":function(e){return e.isSame(new Date,"day")}(e)?"today":""}function Oi(e){let{value:t,setValue:a}=e;function s(){return t.isSame(new Date,"month")}return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("div",{className:"previous",onClick:()=>!s()&&a(t.clone().subtract(1,"month")),children:s()?null:String.fromCharCode(171)}),Object(u.jsxs)("div",{className:"current",children:[t.format("MMMM")," ",t.format("YYYY")]}),Object(u.jsx)("div",{className:"next",onClick:()=>a(t.clone().add(1,"month")),children:String.fromCharCode(187)})]})}var xi=a(1082),fi=a(336),yi=a.n(fi);const vi=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealPlannerData").add(e.upload).then((a=>{c().firestore().collection("marketplace").doc(n).collection("mealPlannerData").doc(a.id).set({id:a.id},{merge:!0}),t({type:"CREATE_MEAL_PLANNER",mealPlanner:e})})).catch((e=>{t({type:"CREATE_MEAL_PLANNER_ERROR",err:e})}))},wi=e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}console.log("this is day",e.day),c().firestore().collection("marketplace").doc(n).collection("newPlan").where("day","==",e.day).get().then((e=>{const a=[];e.forEach((e=>{a.push(e.data())})),t({type:"GET_WEEK_PLANS",payload:a})})).catch((e=>{t({type:"GET_WEEK_PLANS_ERROR",err:e})}))},Si=e=>({type:"GET_ALL_MEAL_PLAN",plan:e});var Ci=Object(m.b)((e=>({data:e.data.getData})),(e=>({deleteMealData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealDiary").doc(a.month).collection(a.day).doc(a.id).delete().then((()=>e({type:"DELETE_MEAL",mealPlan:a}))).catch((t=>{e({type:"DELETE_MEAL_ERROR",err:t})}))}));var a},deleteSavedMeal:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mySavedMeals").doc(a.id).delete().then((()=>e({type:"DELETE_RECIPE",recipe:a}))).catch((t=>{e({type:"DELETE_RECIPE_ERROR",err:t})}))}));var a}})))((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Delete",children:Object(u.jsx)(ie.a,{"aria-label":"Delete",sx:{ml:2},onClick:()=>{(t=>{const a={month:e.value.format("YYYYMM"),day:e.value.format("DD"),id:t};e.saved?(e.deleteSavedMeal(a),e.forceUpdate()):(e.deleteMealData(a),e.forceUpdate())})(e.id)},children:Object(u.jsx)(yi.a,{fontSize:"inherit"})})})})}));var ki=Object(m.b)((e=>({data:e.data.getData})),(e=>({editMealData:t=>e(ue(t)),editSavedMeal:t=>e(os(t))})))((function(e){const[t,a]=Object(s.useState)(e.meal),[c,i]=Object(s.useState)(e.ingredient);return Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={month:e.value.format("YYYYMM"),day:e.value.format("DD"),id:e.id,upload:{meal:t,ingredients:c,id:e.id}};e.saved?(e.editSavedMeal(a),e.forceUpdate()):(e.editMealData(a),e.forceUpdate())})(),e.handleFormClose()},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Meal Name"}),Object(u.jsx)(j.a.Control,{type:"text",id:"mealName",defaultValue:t,onChange:e=>{a(e.target.value)}})]}),c.map(((e,t)=>Object(u.jsxs)("div",{className:"form",children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Ingredients"}),Object(u.jsx)(j.a.Control,{type:"text",id:"food",onChange:a=>{i([...c.slice(0,t),{food:a.target.value,quantity:e.quantity,measure:e.measure},...c.slice(t+1,c.length)])},defaultValue:e.food})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",onChange:a=>{i([...c.slice(0,t),{food:e.food,quantity:a.target.value,measure:e.measure},...c.slice(t+1,c.length)])},defaultValue:e.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:e.measure,items:["g","kg","/","mL","L","cups","pcs"],function:a=>i([...c.slice(0,t),{food:e.food,quantity:e.quantity,measure:a},...c.slice(t+1,c.length)])})]})})]},t))),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn",type:"submit",children:"Done"})})]})}));function Ni(e){let{meal:t,ingredients:a,id:s,show:c,setShow:i,value:r,forceUpdate:n,saved:o}=e;const l=()=>i(!1);return Object(u.jsxs)(oe.a,{show:c,onHide:l,size:"lg","aria-labelledby":"edit meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",children:"Edit Meal"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(ki,{meal:t,ingredient:a,id:s,forceUpdate:n,value:r,handleFormClose:l,saved:o})})]})}var Ei=function(e){const[t,a]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Edit",children:Object(u.jsx)(ie.a,{className:"edit","aria-label":"Edit",sx:{ml:2},onClick:()=>{a(!0)},children:Object(u.jsx)(is.a,{fontSize:"inherit"})})}),Object(u.jsx)(Ni,{value:e.value,show:t,setShow:a,meal:e.meal,ingredients:e.ingredients,id:e.id,forceUpdate:e.forceUpdate,saved:e.saved})]})},Ti=a(584),_i=a.n(Ti);a(840);var Di=Object(m.b)(null,(e=>({createMealPlanData:t=>e(de(t)),addToShoppingList:t=>e(Vc(t))})))((function(e){const[t,a]=Object(s.useState)([]),c=()=>e.setShow(!1);return Object(s.useEffect)((()=>{a(mi(e.value))}),[e.value]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(oe.a,{show:e.show,onHide:c,size:"lg","aria-labelledby":"add-to-calendar",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsxs)(oe.a.Title,{id:"add-to-calendar",children:["Add ",e.selected.meal," to Calendar"]})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"calendar",style:{maxWidth:"100%"},children:[Object(u.jsx)(Oi,{value:e.value,setValue:e.onChange}),Object(u.jsxs)("div",{className:"body",children:[Object(u.jsx)("div",{className:"day-names",children:["S","M","T","W","T","F","S"].map(((e,t)=>Object(u.jsx)("div",{className:"week",children:e},t)))}),t.map((t=>Object(u.jsx)("div",{children:t.map((t=>Object(u.jsx)("div",{className:"day",onClick:()=>!pi(t)&&e.onChange(t),children:Object(u.jsx)("div",{className:gi(t,e.value),children:t.format("D").toString()})},t.format("D").toString())))},t)))]})]}),Object(u.jsx)(X,{styling:"green",text:"Add",onClick:t=>{t.preventDefault(),(()=>{let t;t=e.saved&&!e.selected.nonNativeData?{year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{meal:e.selected.meal,mealType:e.selected.mealType,ingredients:e.selected.ingredients}}:{year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{meal:e.selected.meal,ingredients:e.selected.ingredients,mealType:e.selected.mealType,totalNutrients:e.selected.totalNutrients,totalDaily:e.selected.totalDaily,yield:e.selected.yield,url:e.selected.url,nonNativeData:!0}},e.createMealPlanData(t),e.addToShoppingList(t)})(),c()}})]})})]})})}));var Fi=function(e){const[t,a]=Object(s.useState)(!1),[c,i]=Object(s.useState)({});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Add to Calendar",children:Object(u.jsx)(ie.a,{"aria-label":"Add to Calendar",sx:{ml:2},onClick:()=>{a(!0),(async()=>{e.saved?e.nonNativeData?i({meal:e.meal,mealType:e.mealType,ingredients:e.ingredients,id:e.id,nonNativeData:e.nonNativeData,totalDaily:e.totalDaily,totalNutrients:e.totalNutrients,url:e.url,yield:e.recipeYield}):i({meal:e.meal,mealType:e.mealType,ingredients:e.ingredients,id:e.id}):i({meal:e.meal,mealType:e.mealType,ingredients:e.ingredients,url:e.url,totalNutrients:e.totalNutrients,totalDaily:e.totalDaily,yield:e.yield})})()},children:Object(u.jsx)(_i.a,{fontSize:"20"})})}),Object(u.jsx)(Di,{value:e.value,onChange:e.onChange,show:t,setShow:a,selected:c,saved:e.saved})]})};var Ri=Object(m.b)((e=>({data:e.data.getData,inventory:e.mealPlan.inventory,singleMealDiary:e.mealPlan.singleMealDiary})),(e=>({getInventory:()=>e(((e,t,a)=>{let{getFirestore:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().collection("marketplace").doc(r).collection("inventory").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_INVENTORY",payload:a})})).catch((t=>{e({type:"GET_INVENTORY_ERROR",err:t})}))})),removeFromInventory:t=>e(Oe(t)),editMealData:t=>e(ue(t)),editDiaryData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealDiary").doc(a.month).collection(a.day).doc(a.id).set(a.upload,{merge:!0}).then((()=>e({type:"EDIT_DIARY_MEAL",mealPlan:a}))).catch((t=>{e({type:"EDIT_DIARY_MEAL_ERROR",err:t})}))}));var a},getSingleMealDiary:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealDiary").doc(e.month).collection(e.day).where("id","==",e.id).get().then((e=>{let a;e.forEach((e=>a=e.data())),t({type:"GET_SINGLE_MEAL_DIARY",payload:a})})).catch((e=>{t({type:"GET_SINGLE_MEAL_DIARY_ERROR",err:e})}))})(t)),updateQuantity:t=>e(xe(t))})))((function(e){const[t,a]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{(t=>{e.meal;const a={month:e.value.format("YYYYMM"),day:e.value.format("DD"),id:e.id};e.getSingleMealDiary(a)})()}),[e.editDiaryData]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Mark meal as eaten",children:Object(u.jsx)(ie.a,{"aria-label":"Mark meal as eaten",sx:{ml:2},onClick:()=>{(t=>{he("Geddit","Food has just been marked as eaten");var a=e.meal;a.ingredients.forEach((t=>{const a={id:t.food,quantity:t.quantity};e.updateQuantity(a)}));const s={month:e.value.format("YYYYMM"),day:e.value.format("DD"),id:e.id,upload:{eaten:!0,meal:a.meal,ingredients:a.ingredients,id:a.id,nn:a.nn,url:a.url,totalNutrients:a.totalNutrients,totalDaily:a.totalDaily,recipeYield:a.recipeYield}};e.editMealData(s)})(),(t=>{e.meal;const a={month:e.value.format("YYYYMM"),day:e.value.format("DD"),id:e.id,upload:{eaten:!0}};e.editDiaryData(a)})()},children:1==e.singleMealDiary.eaten?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(ia.a,{fontSize:"inherit",color:"secondary"})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(ia.a,{fontSize:"inherit"})})})})})}));var Pi=Object(m.b)((e=>({data:e.data.getData,inventory:e.mealPlan.inventory,singleMealPlan:e.mealPlanner.singleMealPlan,newPlan:e.mealPlanner.newPlan})),(e=>({getInventory:()=>e(((e,t,a)=>{let{getFirestore:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().collection("marketplace").doc(r).collection("inventory").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_INVENTORY",payload:a})})).catch((t=>{e({type:"GET_INVENTORY_ERROR",err:t})}))})),removeFromInventory:t=>e(Oe(t)),editMealData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}console.log("check:",a),c().firestore().collection("marketplace").doc(n).collection("mealPlanData").doc(a.month).collection(a.day).doc(a.id).set(a.upload,{merge:!0}).then((()=>e({type:"EDIT_MEAL",mealPlan:a}))).catch((t=>{e({type:"EDIT_MEAL_ERROR",err:t})}))}));var a},editNewPlanData:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("newPlan").doc(e.id).set(e.upload,{merge:!0}).then((()=>t({type:"EDIT_MEAL",data:e}))).catch((e=>{t({type:"EDIT_MEAL_ERROR",err:e})}))})(t)),updateQuantity:t=>e(xe(t)),getSingleMealPlan:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("newPlan").where("id","==",e.id).get().then((e=>{let a;e.forEach((e=>a=e.data())),t({type:"GET_SINGLE_MEAL_PLAN",payload:a})})).catch((e=>{t({type:"GET_SINGLE_MEAL_PLAN_ERROR",err:e})}))})(t)),getPlanData:t=>e(((e,t,a)=>{let{getFirebase:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().firestore().collection("marketplace").doc(r).collection("newPlan").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_NEW_PLANS",payload:a})})).catch((t=>{e({type:"GET_NEW_PLANS_ERROR",err:t})}))}))})))((function(e){const[t,a]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{}),[e.editMealData]),Object(s.useEffect)((()=>{}),[e.inventory]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Mark meal as eaten",children:Object(u.jsx)(ie.a,{"aria-label":"Mark meal as eaten",sx:{ml:2},onClick:()=>{(t=>{he("Success","Food has been marked as eaten");var a=e.meal;console.log("grr =====>",a),a.ingredients.forEach((t=>{const a={id:t.food,quantity:t.quantity};e.updateQuantity(a)}));const s={month:e.value.format("YYYYMM"),day:e.value.format("DD"),id:e.id,upload:{eaten:!0,meal:a.meal,ingredients:a.ingredients,id:a.id,nn:a.nn,url:a.url,totalNutrients:a.totalNutrients,totalDaily:a.totalDaily,recipeYield:a.recipeYield}};e.editMealData(s)})(),(t=>{e.meal;const a={id:e.id,upload:{eaten:!0}};e.editNewPlanData(a)})(),(t=>{const a={id:e.id};e.getSingleMealPlan(a)})()},children:1==e.singleMealPlan.eaten?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(ia.a,{fontSize:"inherit",color:"secondary"})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(ia.a,{fontSize:"inherit"})})})})})}));function Ii(e){return console.log("let fetch what weekly props is ==> ",e.meals),Object(u.jsxs)(u.Fragment,{children:[e.weeklyMeals.map(((t,a)=>Object(u.jsx)("div",{className:"meal-box",children:Object(u.jsx)("div",{className:"ingredients",children:Object(u.jsxs)(ye.a,{styles:{paddingTop:0,paddingBottom:0,margin:0},children:[Object(u.jsxs)(xi.a,{className:"heading",children:[Object(u.jsx)("div",{className:"meal-name",children:t.meal}),t.mealType?Object(u.jsx)("div",{className:"meal-type",children:t.mealType}):null,Object(u.jsxs)("div",{className:"icons",children:[e.saved?Object(u.jsx)(Fi,{value:e.value,meal:t.meal,ingredients:t.ingredients,mealType:t.mealType,id:t.id,onChange:e.onChange,saved:e.saved,nonNativeData:t.nonNativeData,totalDaily:t.totalDaily,totalNutrients:t.totalNutrients,url:t.url,recipeYield:t.recipeYield}):null,t.nonNativeData?null:Object(u.jsx)(Ei,{value:e.value,meal:t.meal,ingredients:t.ingredients,id:t.id,forceUpdate:e.forceUpdate,saved:e.saved}),e.isMealPlan?Object(u.jsx)(Pi,{meal:t,value:e.value,id:t.id}):null]})]}),t.ingredients.map(((e,a)=>Object(u.jsx)(ve.a,{className:"list",style:{alignItems:"baseline"},children:t.nn?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("p",{children:e.text})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("p",{children:[e.food,": ",e.quantity,e.measure]})})},`item${a}`))),Object(u.jsx)(ve.a,{children:t.url?Object(u.jsx)("a",{href:t.url,children:t.url}):null})]},`ingrs${a}`)})},`meal-box${a}`))),e.meals.map(((t,a)=>Object(u.jsx)("div",{className:"meal-box",children:Object(u.jsx)("div",{className:"ingredients",children:Object(u.jsxs)(ye.a,{styles:{paddingTop:0,paddingBottom:0,margin:0},children:[Object(u.jsxs)(xi.a,{className:"heading",children:[Object(u.jsx)("div",{className:"meal-name",children:t.meal}),t.mealType?Object(u.jsx)("div",{className:"meal-type",children:t.mealType}):null,Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(Ci,{value:e.value,id:t.id,forceUpdate:e.forceUpdate,saved:e.saved}),e.saved?Object(u.jsx)(Fi,{value:e.value,meal:t.meal,ingredients:t.ingredients,mealType:t.mealType,id:t.id,onChange:e.onChange,saved:e.saved,nonNativeData:t.nonNativeData,totalDaily:t.totalDaily,totalNutrients:t.totalNutrients,url:t.url,recipeYield:t.recipeYield}):null,t.nonNativeData?null:Object(u.jsx)(Ei,{value:e.value,meal:t.meal,ingredients:t.ingredients,id:t.id,forceUpdate:e.forceUpdate,saved:e.saved}),e.isMealPlan||1==t.eaten?Object(u.jsx)(Ri,{meal:t,value:e.value,id:t.id,eaten:!0}):null]})]}),t.ingredients.map(((e,a)=>Object(u.jsx)(ve.a,{className:"list",style:{alignItems:"baseline"},children:t.nn?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("p",{children:e.text})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("p",{children:[e.food,": ",e.quantity,e.measure]})})},`item${a}`))),Object(u.jsx)(ve.a,{children:t.url?Object(u.jsx)("a",{href:t.url,children:t.url}):null})]},`ingrs${a}`)})},`meal-box${a}`)))]})}var Mi=a(157),Ai=a.n(Mi);var Wi=Object(m.b)((e=>({mealDiary:e.mealPlan.mealDiary,mealPlanner:e.mealPlanner.plans,weekPlans:e.mealPlanner.weekPlans})),(e=>({getMealDiary:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealDiary").doc(e.month).collection(e.day).get().then((e=>{const a=[];e.forEach((e=>{a.push(e.data())})),t({type:"GET_MEAL_DIARY",payload:a})})).catch((e=>{t({type:"GET_MEAL_DIARY_ERROR",err:e})}))})(t)),getMealPlannerData:t=>e(((e,t,a)=>{let{getFirebase:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().firestore().collection("marketplace").doc(r).collection("mealPlannerData").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_MEAL_PLANS",payload:a})})).catch((t=>{e({type:"GET_MEAL_PLANS_ERROR",err:t})}))})),getWeeklyPlan:t=>e(wi(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)([]),[r,n]=Object(s.useState)(0),o=()=>{n(r+1)};function l(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Refresh",children:Object(u.jsx)(ie.a,{"aria-label":"Refresh",sx:{ml:2},onClick:()=>{o()},children:Object(u.jsx)(Ai.a,{style:{fontSize:35}})})})})}return Object(s.useEffect)((()=>{const t={month:e.value.format("YYYYMM"),day:e.value.format("DD-MM-yyyy")};e.getWeeklyPlan(t)}),[e.value,r]),Object(s.useEffect)((()=>{const t={month:e.value.format("YYYYMM"),day:e.value.format("DD")};e.getMealDiary(t),e.getMealPlannerData(t)}),[e.value,r]),Object(s.useEffect)((()=>{(async()=>{a([]),e.mealDiary.forEach((e=>{var t=e.meal,s=e.ingredients,c=e.id,i=e.mealType,r=e.url,n=e.totalNutrients,o=e.totalDaily,l=e.recipeYield;let d;d=!!e.nonNativeData&&e.nonNativeData,a((e=>[...e,{meal:t,mealType:i,ingredients:s,id:c,nn:d,url:r,totalNutrients:n,totalDaily:o,recipeYield:l}]))}))})()}),[e.mealPlan,e.mealPlanner]),Object(s.useEffect)((()=>{(async()=>{i([]),e.weekPlans.forEach((e=>{var t=e.meal,a=e.ingredients,s=e.id,c=e.url,r=e.totalNutrients,n=e.totalDaily,o=e.recipeYield;let l=e.nn;i((e=>[...e,{meal:t,ingredients:a,id:s,nn:l,url:c,totalNutrients:r,totalDaily:n,recipeYield:o}]))}))})()}),[e.weekPlans]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(l,{}),c.length?Object(u.jsx)("div",{children:Object(u.jsx)(Ii,{forceUpdate:o,meals:t,weeklyMeals:c,saved:!1,value:e.value,isMealPlan:!0})}):Object(u.jsx)("div",{className:"empty basic-title-left",children:Object(u.jsx)("p",{children:" No meal yet \ud83d\ude42 use the add button "})})]})}));const Li=e=>{let{value:t,onChange:a}=e;const[c,i]=Object(s.useState)([]),[r,n]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{i(mi(t))}),[t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"calendar",children:[Object(u.jsx)(Oi,{value:t,setValue:a}),Object(u.jsxs)("div",{className:"body",children:[Object(u.jsx)("div",{className:"day-names",children:["S","M","T","W","T","F","S"].map(((e,t)=>Object(u.jsx)("div",{className:"week",children:e},t)))}),c.map((e=>Object(u.jsx)("div",{children:e.map((e=>Object(u.jsx)("div",{className:"day",onClick:()=>a(e),children:Object(u.jsx)("div",{className:gi(e,t),children:e.format("D").toString()})},e.format("D").toString())))},e)))]})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-8",style:{textAlign:"left"},children:"Add casual meals to your calendar or edit added meals \ud83d\ude42"}),Object(u.jsx)("div",{className:"col-4",style:{textAlign:"right"},children:Object(u.jsx)(ji,{value:t,show:r,setShow:n})})]}),Object(u.jsx)("div",{}),Object(u.jsxs)("div",{className:"plan-box",children:[Object(u.jsx)("div",{className:"header",children:t.format("dddd DD/MM")}),Object(u.jsx)(Wi,{value:t,show:r})]})]})},Bi="5532003c",Gi="511d39184173c54ebc5d02a5063a7b87";var Ui=Object(m.b)(null,(e=>({addToInventory:t=>e(pe(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(null),[o,l]=Object(s.useState)([]),[d,b]=Object(s.useState)([]),[m,p]=Object(s.useState)([]),[g,O]=Object(s.useState)([]),[x,f]=Object(s.useState)([]),[y,v]=Object(s.useState)([]),[w,S]=Object(s.useState)([]),C={food:"",quantity:0,measure:"g",foodId:""},[k,N]=Object(s.useState)(C);Object(s.useEffect)((()=>{console.log("ingredients",o)}),[o]);const[E,T]=Object(s.useState)(0),_=()=>{o.forEach((t=>{const a={upload:{ingredients:t.food}};console.log("data is:",a),e.addToInventory(a),T(E+1)}))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Xc,{fps:10,qrbox:250,disableFlip:!1,qrCodeSuccessCallback:(e,t)=>{fetch(`https://world.openfoodfacts.org/api/v0/product/${t.decodedText}.json`).then((e=>e.json())).then((e=>{let t;return void 0==e.product.product_name_en?(t=e.product.product_name,i(t)):(t=e.product.product_name_en,i(t)),fetch(`https://api.edamam.com/api/recipes/v2?app_id=${Bi}&app_key=${Gi}&type=public&q=${t}`)})).then((e=>e.json())).then((e=>{console.log("name:",e.hits),p(e.hits)})).catch((e=>{console.log(e.message),n(e.message)})).catch((e=>{console.log(e.message),n(e.message)}))}}),Object(u.jsx)("p",{style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:c}),Object(u.jsxs)(ti.a,{variant:"success",children:[Object(u.jsx)(ti.a.Heading,{children:"Missing some items in your meal plan?"}),Object(u.jsx)("p",{children:"The scanner allows you to add more items to your meal plan"})]}),Object(u.jsxs)(j.a,{onSubmit:e=>{e.preventDefault(),_()},children:[Object(u.jsx)(j.a.Group,{children:Object(u.jsx)("li",{children:m&&m.map((e=>Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:Object(u.jsx)("div",{class:"card",children:Object(u.jsxs)("div",{class:"card-body",children:[Object(u.jsx)("h5",{class:"card-title",children:Object(u.jsx)("div",{class:"form-check",children:Object(u.jsx)("h5",{children:null===e||void 0===e?void 0:e.recipe.label})})}),Object(u.jsx)("p",{class:"card-text",children:null===e||void 0===e?void 0:e.recipe.ingredientLines.map((e=>Object(u.jsx)("ul",{children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",children:e}),Object(u.jsx)("input",{class:"form-check-input",type:"checkbox",value:e,id:"flexCheckDefault",style:{alignItems:"right",marginLeft:"20px",alignItems:"left"},onClick:e=>{(e=>{N(k.food=e.target.value),l((e=>[...e,k])),N(C)})(e)}})]})})))})]})})})})))})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Save"})})]}),r&&Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Oops..Could not fetch food item, pls try another barcode..\ud83d\ude2d"})})]})}));var Yi=Object(m.b)((e=>({profile:e.firebase.profile})),(e=>({addToShoppingList:t=>e(Vc(t))})))((e=>{const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(0),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(!1),[d,b]=Object(s.useState)("+ scan from barcode"),[m,p]=Object(s.useState)(!0),[g,O]=Object(s.useState)(new Date),[x,f]=Object(s.useState)(""),[y,v]=Object(s.useState)({food:"",quantity:0,measure:"g",foodId:""}),[w,S]=Object(s.useState)(0),C=()=>{S(w+1)};return Object(s.useEffect)((()=>{C()}),[]),Object(u.jsx)("div",{children:o?Object(u.jsx)(Ui,{handleFormClose:()=>{p(!1)}}):Object(u.jsxs)(j.a,{onSubmit:t=>{t.preventDefault(),(()=>{const t={week:e.value.format("w"),upload:{ingredient:{food:y.food+" "+y.quantity+y.measure,data:y.food,measure:y.measure,quantity:y.quantity,week:e.value.format("w")}}};e.addToShoppingList(t),he("Success","Item added to Shopping List!"),C()})(),e.handleFormClose()},children:[Object(u.jsx)(Hc,{handleFoodSearch:e=>{e.target.textContent?v({...y,food:e.target.textContent}):v({...y,food:e.target.value})}}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Amount"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",onChange:e=>(e=>{e.target.textContent?v({...y,[e.target.id]:e.target.textContent}):v({...y,[e.target.id]:e.target.value})})(e),value:y.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:y.measure,items:["g","kg","/","mL","L","/","tsp","tbsp","cups","units","pcs","oz","lbs"],function:e=>{v({...y,measure:e})}})]})]}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none mt-3",type:"submit",children:"Done"})})]})})})),qi=a(136),Hi=a.n(qi);const Vi="5532003c",zi="511d39184173c54ebc5d02a5063a7b87";var $i=Object(m.b)(null,(e=>({addToShoppingList:t=>e(Vc(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(null),[o,l]=Object(s.useState)([]),[d,b]=Object(s.useState)([]),[m,p]=Object(s.useState)([]),[g,O]=Object(s.useState)(""),[x,f]=Object(s.useState)(""),[y,v]=Object(s.useState)(""),w={food:"",quantity:0,measure:"g",foodId:"",expiry:tc()(x).format("DD/MM/yyyy")},[S,C]=Object(s.useState)(w);Object(s.useEffect)((()=>{console.log("ingredients",o)}),[o]);const[k,N]=Object(s.useState)(0),E=()=>{const t={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{meal:c,ingredients:o,purchase:g,expiry:tc()(x).format("DD/MM/yyyy"),storage:y}};N(k+1),e.addToShoppingList(t)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Xc,{fps:10,qrbox:250,disableFlip:!1,qrCodeSuccessCallback:(e,t)=>{fetch(`https://world.openfoodfacts.org/api/v0/product/${t.decodedText}.json`).then((e=>e.json())).then((e=>{let t;return void 0==e.product.product_name_en?(t=e.product.product_name,i(t)):(t=e.product.product_name_en,i(t)),fetch(`https://api.edamam.com/api/recipes/v2?app_id=${Vi}&app_key=${zi}&type=public&q=${t}`)})).then((e=>e.json())).then((e=>{console.log("name:",e.hits),p(e.hits)})).catch((e=>{console.log(e.message),n(e.message)})).catch((e=>{console.log(e.message),n(e.message)}))}}),Object(u.jsx)("p",{style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:c}),Object(u.jsxs)(ti.a,{variant:"success",children:[Object(u.jsx)(ti.a.Heading,{children:"Missing some items in your meal plan?"}),Object(u.jsx)("p",{children:"The scanner allows you to add more items to your meal plan"})]}),Object(u.jsxs)(j.a,{onSubmit:t=>{t.preventDefault(),E(),e.handleFormClose()},children:[Object(u.jsx)(j.a.Group,{children:Object(u.jsx)("li",{children:m&&m.map((e=>Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:Object(u.jsx)("div",{class:"card",children:Object(u.jsxs)("div",{class:"card-body",children:[Object(u.jsx)("h5",{class:"card-title",children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:null===e||void 0===e?void 0:e.recipe.label}),Object(u.jsx)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",style:{alignItems:"right",marginLeft:"20px"},value:null===e||void 0===e?void 0:e.recipe.label,onClick:e=>{(e=>{i(e.target.value)})(e)}})]})}),Object(u.jsx)("p",{class:"card-text",children:null===e||void 0===e?void 0:e.recipe.ingredientLines.map((e=>Object(u.jsx)("ul",{children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",children:e}),Object(u.jsx)("input",{class:"form-check-input",type:"checkbox",value:e,id:"flexCheckDefault",style:{alignItems:"right",marginLeft:"20px",alignItems:"left"},onClick:e=>{(e=>{C(S.food=e.target.value),C(S.expiry=x),l((e=>[...e,S])),C(w)})(e)}})]})})))})]})})})})))})}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Where did you purchase this item?"}),Object(u.jsx)(j.a.Control,{type:"text",id:"purchasePlace",onChange:e=>{O(e.target.value)}})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"What is the Expiry date of this item?"}),Object(u.jsx)(Hi.a,{selected:x,onChange:e=>f(e),dateFormat:"dd/MM/yyyy"})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"How do you store this item?"}),Object(u.jsx)(j.a.Control,{type:"text",id:"storageMethod",onChange:e=>{v(e.target.value)}})]}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Save"})})]}),r&&Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Oops..Could not fetch food item, pls try another barcode..\ud83d\ude2d"})})]})}));function Ki(e){let{show:t,setShow:a,value:c}=e;const[i,r]=Object(s.useState)("unconfirmed"),[n,o]=Object(s.useState)(!1),[l,d]=Object(s.useState)("+ scan from barcode"),b=()=>{a(!1),r("unconfirmed")};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>a(!0)})})}),Object(u.jsxs)(oe.a,{show:t,onHide:b,size:"lg","aria-labelledby":"add meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsxs)(oe.a.Title,{id:"add-meal",className:"basic-title-left basic-lg",children:["Add new meal for ",c.format("DD/MM")]})}),Object(u.jsxs)(oe.a.Body,{children:[Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>(o(!n),void d(n?"+ scan from barcode":"- input manually")),children:l}),n?Object(u.jsx)($i,{value:c,handleFormClose:b}):Object(u.jsx)(Yi,{value:c,handleFormClose:b})]})]})]})}function Ji(e){let{value:t,setValue:a}=e;const s=t.clone().startOf("week"),c=t.clone().endOf("week");return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("div",{className:"previous",onClick:()=>a(t.clone().subtract(7,"days")),children:String.fromCharCode(171)}),Object(u.jsxs)("div",{className:"current",children:["Shopping list for ",s.format("DD MMMM")," -"," ",c.format("DD MMMM")]}),Object(u.jsx)("div",{className:"next",onClick:()=>a(t.clone().add(7,"days")),children:String.fromCharCode(187)})]})}var Qi=a(585),Zi=a.n(Qi);var Xi=Object(m.b)((e=>({data:e.data.getData})),(e=>({addToInventory:t=>e(pe(t)),removeFromShop:t=>e(zc(t)),newRemoveFromShop:t=>e($c(t))})))((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Bought Item",children:Object(u.jsx)(ie.a,{"aria-label":"Bought Item",sx:{ml:2},onClick:()=>{(async()=>{const t={week:e.value.format("w")-1,day:e.value.format("DD"),upload:{ingredients:e.food,item:e.item,measure:e.measure,quantity:e.quantity}};e.addToInventory(t),he("Success",`${t.upload.item} added to Inventory!`)})(),(t=>{const a={week:e.value.format("w"),id:t};e.removeFromShop(a),e.newRemoveFromShop(a),e.setUpdate(e.update+1)})(e.id)},children:Object(u.jsx)(Zi.a,{fontSize:"25"})})})})})),er=a(264),tr=a.n(er),ar=a(340),sr=a.n(ar);Object(m.b)((e=>({data:e.data.getData})),(e=>({addToInventory:t=>e(pe(t)),removeFromShop:t=>e(zc(t)),newRemoveFromShop:t=>e($c(t))})))((function(e){const[t,a]=Object(s.useState)([]);return t.map(((e,s)=>Object(u.jsx)(ye.a,{children:Object(u.jsxs)(ve.a,{className:"list",style:{alignItems:"flex-end"},children:[Object(u.jsxs)("b",{children:[`${e.data}: `,"  "]})," \xa0 ",`${e.quantity} ${e.measure}`," \xa0",Object(u.jsx)(sr.a,{onClick:()=>(e=>{let s=[...t];s=s.filter((t=>t.id!==e.id)),a(s)})(e)})]},`ingr${s}`)}))),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Add to cart",children:Object(u.jsx)(ie.a,{"aria-label":"Add to cart",sx:{ml:2},onClick:()=>{he(`${e.item} added to cart`)},children:Object(u.jsx)(tr.a,{fontSize:"25"})})})})}));var cr=Object(m.b)(null,(e=>({editShoppingListData:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}console.log("----\x3e>>>>>",e),c().firestore().collection("marketplace").doc(n).collection("newShoppingList").doc(`${e.week}`).collection(`${e.week}`).doc(e.id).set(e.upload,{merge:!0}).then((()=>t({type:"EDIT_SHOPPING_LIST",payload:e}))).catch((e=>{t({type:"EDIT_SHOPPING_LIST_ERROR",err:e})}))})(t))})))((function(e){const[t,a]=Object(s.useState)(e.food),[c,i]=Object(s.useState)(e.data),[r,n]=Object(s.useState)(e.quantity),[o,l]=Object(s.useState)(e.measure);return Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={week:e.week,id:e.id,upload:{id:e.id,ingredient:{food:t,data:c,quantity:r,measure:o,week:e.week}}};e.editShoppingListData(a)})(),e.handleFormClose()},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Ingredient"}),Object(u.jsx)(j.a.Control,{type:"text",id:"food",defaultValue:c,onChange:e=>{i(e.target.value)}})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Weight/volume - Meal plan"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",defaultValue:r,onChange:e=>n(e.target.value)}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:o,items:["g","kg","/","mL","L","/","tsp","tbsp","cups","units"],function:e=>{l(e)}})]})]}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn",type:"submit",children:"Done"})})]})}));function ir(e){let{food:t,data:a,quantity:s,measure:c,week:i,id:r,show:n,setShow:o,value:l,update:d,setUpdate:b,saved:j}=e;const h=()=>o(!1);return Object(u.jsxs)(oe.a,{show:n,onHide:h,size:"lg","aria-labelledby":"edit meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",children:"Edit Item"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(cr,{food:t,data:a,week:i,measure:c,quantity:s,id:r,update:d,setUpdate:b,value:l,handleFormClose:h,saved:j})})]})}var rr=function(e){const[t,a]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Edit",children:Object(u.jsx)(ie.a,{className:"edit","aria-label":"Edit",sx:{ml:2},onClick:()=>{a(!0)},children:Object(u.jsx)(is.a,{fontSize:"inherit"})})}),Object(u.jsx)(ir,{show:t,setShow:a,food:e.food,data:e.data,week:e.week,measure:e.measure,quantity:e.quantity,id:e.id,update:e.update,setUpdate:e.setUpdate})]})};var nr=Object(m.b)(null,(e=>({editShoppingListDataAddedItems:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}console.log("----\x3e>>>>>",e),c().firestore().collection("marketplace").doc(n).collection("shoppingList").doc(`${e.week}`).collection(`${e.week}`).doc(e.id).set(e.upload,{merge:!0}).then((()=>t({type:"EDIT_SHOPPING_LIST",payload:e}))).catch((e=>{t({type:"EDIT_SHOPPING_LIST_ERROR",err:e})}))})(t))})))((function(e){const[t,a]=Object(s.useState)(e.food),[c,i]=Object(s.useState)(e.data),[r,n]=Object(s.useState)(e.quantity),[o,l]=Object(s.useState)(e.measure);return Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={week:e.week,id:e.id,upload:{id:e.id,ingredient:{food:t,data:c,quantity:r,measure:o,week:e.week}}};e.editShoppingListDataAddedItems(a)})(),e.handleFormClose()},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Ingredient"}),Object(u.jsx)(j.a.Control,{type:"text",id:"food",defaultValue:c,onChange:e=>{i(e.target.value)}})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Weight/volume - Meal plan"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",defaultValue:r,onChange:e=>n(e.target.value)}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:o,items:["g","kg","/","mL","L","/","tsp","tbsp","cups","units"],function:e=>{l(e)}})]})]}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn",type:"submit",children:"Done"})})]})}));function or(e){let{food:t,data:a,quantity:s,measure:c,week:i,id:r,show:n,setShow:o,value:l,update:d,setUpdate:b,saved:j}=e;const h=()=>o(!1);return Object(u.jsxs)(oe.a,{show:n,onHide:h,size:"lg","aria-labelledby":"edit meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",children:"Edit Item"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(nr,{food:t,data:a,week:i,measure:c,quantity:s,id:r,update:d,setUpdate:b,value:l,handleFormClose:h,saved:j})})]})}var lr=function(e){const[t,a]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Edit",children:Object(u.jsx)(ie.a,{className:"edit","aria-label":"Edit",sx:{ml:2},onClick:()=>{a(!0)},children:Object(u.jsx)(is.a,{fontSize:"inherit"})})}),Object(u.jsx)(or,{show:t,setShow:a,food:e.food,data:e.data,week:e.week,measure:e.measure,quantity:e.quantity,id:e.id,update:e.update,setUpdate:e.setUpdate})]})},dr=a(1083),ur=a(1049);var br=Object(m.b)((e=>({UpdatedShoppingList:e.mealPlan.shoppingList,newShoppingList:e.mealPlan.newShoppingList,shoppingList:e.mealPlanner.allItems,newPlans:e.mealPlanner.newPlans,profile:e.firebase.profile,inventory:e.mealPlan.inventory})),(e=>({getShoppingList:t=>{return e((a=t,(e,t,s)=>{let{getFirestore:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}console.log("----",a),c().collection("marketplace").doc(n).collection("shoppingList").doc(a.week).collection(a.week).get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_SHOPPING_LIST",payload:a})})).catch((t=>{e({type:"GET_SHOPPING_LIST_ERROR",err:t})}))}));var a},getShoppingListUpdate:t=>{return e((a=t,(e,t,s)=>{let{getFirestore:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().collection("marketplace").doc(n).collection("newShoppingList").doc(a.week).collection(a.week).get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_NEW_SHOPPING_LIST",payload:a})})).catch((t=>{e({type:"GET_NEW_SHOPPING_LIST_ERROR",err:t})}))}));var a},getAllItems:t=>e(Si(t)),addToShoppingListUpdate:t=>e((e=>(t,a,s)=>{let{getFirestore:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}const o=e.upload.result,l=c(),d=l.batch();o.forEach((t=>{var a=l.collection("marketplace").doc(n).collection("newShoppingList").doc(e.week).collection(e.week).doc();d.set(a,{id:a.id,ingredient:t})})),d.commit().then((()=>{t({type:"CREATE_NEW_SHOP",ingr:o})})).catch((e=>{t({type:"CREATE_NEW_SHOP_ERROR",err:e})}))})(t)),getPlanData:t=>e(((e,t,a)=>{let{getFirebase:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().firestore().collection("marketplace").doc(r).collection("newPlan").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_NEW_PLANS",payload:a})})).catch((t=>{e({type:"GET_NEW_PLANS_ERROR",err:t})}))})),addToPurchaseItems:t=>e(ge(t)),getInventory:t=>e(((e,t,a)=>{let{getFirestore:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().collection("marketplace").doc(r).collection("inventory").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_INVENTORY",payload:a})})).catch((t=>{e({type:"GET_INVENTORY_ERROR",err:t})}))}))})))((function(e){const[t,a]=Object(s.useState)([]),[i,r]=Object(s.useState)([]),[n,o]=Object(s.useState)([]),[l,d]=Object(s.useState)([]),[b,j]=Object(s.useState)(!1),[m,p]=Object(s.useState)(!1),[g,O]=c.a.useState(!1),[x,f]=Object(s.useState)([]),[y,v]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.getInventory()}),[e.value,e.update]),Object(s.useEffect)((()=>{C()}),[e.data]),Object(s.useEffect)((()=>{(async()=>{d([]),e.inventory.forEach((e=>{var t=e.item,a=e.measure,s=e.quantity;d((e=>[...e,{item:t,quantity:s,measure:a}]))}))})()}),[e.update]);const[w,S]=Object(s.useState)(0),C=()=>{S(w+1)};function k(e){he(`${e} added to cart`)}function N(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Refresh",children:Object(u.jsx)(ie.a,{"aria-label":"Refresh",sx:{ml:2},onClick:()=>{C(),he("Refreshing..")},children:Object(u.jsx)(Ai.a,{style:{fontSize:35}})})})})}const[E,T]=Object(s.useState)([]),_=E.map(((e,t)=>Object(u.jsx)(ye.a,{children:Object(u.jsxs)(ve.a,{className:"list",style:{alignItems:"flex-end"},children:[Object(u.jsxs)("b",{children:[`${e.data}: `,"  "]})," \xa0 ",`${e.quantity} ${e.measure}`," \xa0",Object(u.jsx)(Q.a,{title:"Remove",children:Object(u.jsx)(ie.a,{"aria-label":"Remove",sx:{ml:2},onClick:()=>{(e=>{let t=[...E];t=t.filter((t=>t.id!==e.id)),T(t)})(e)},children:Object(u.jsx)(sr.a,{fontSize:"50"})})})]},`ingr${t}`)})));function D(){return t.filter((t=>e.value.format("w")==t.week))}Object(s.useEffect)((()=>{console.log("cart",E)}),[E]),Object(s.useEffect)((()=>{const t={month:e.value.format("YYYYMM"),day:e.value.format("DD-MM-yyyy")};e.getPlanData(t)}),[e.value,w]),Object(s.useEffect)((()=>{const t={week:e.value.format("w")};e.getShoppingList(t),e.getShoppingListUpdate(t)}),[e.value,w]),Object(s.useEffect)((()=>{(async()=>{r([]),e.UpdatedShoppingList.forEach((e=>{var t=e.id,a=e.ingredient.food,s=e.ingredient.data,c=e.ingredient.quantity,i=e.ingredient.measure,n=e.ingredient.week;r((e=>[...e,{food:a,data:s,measure:i,quantity:c,week:n,id:t}]))}))})(),(async()=>{o([]),e.newShoppingList.forEach((e=>{var t=e.id,a=e.ingredient.food,s=e.ingredient.data,c=e.ingredient.quantity,i=e.ingredient.measure,r=e.ingredient.week;o((e=>[...e,{food:a,data:s,measure:i,quantity:c,week:r,id:t}]))}))})()}),[e.UpdatedShoppingList,e.newShoppingList]),Object(s.useEffect)((()=>{(async()=>{if(a([]),void 0==e.newPlans||""==e.newPlans)return Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Loading..."})});e.newPlans.forEach((e=>{e.ingredients.forEach((t=>{var s=tc()(e.start).utc().format("YYYY-MM-DD"),c=t.food,i=t.quantity,r=t.measure;a((e=>[...e,{week:tc()(s,"YYYY-MM-DD").week(),data:c,food:c+" "+i+" "+r,measure:r,quantity:i}]))}))}))})()}),[e.newPlans,w]),Object(s.useEffect)((()=>{D()}),[e.newPlans]);const F=Object.values(D().reduce(((e,t)=>(e[t.data]=e[t.data]?{...t,quantity:t.quantity+e[t.data].quantity}:t,e)),{})),R=()=>j(!1),P=()=>j(!0),I=()=>p(!1),M=()=>{O(!0)},A=()=>{O(!1)};Object(s.useEffect)((()=>{!function(){let e=[];F.filter((e=>{let{data:t}=e;return!l.some((e=>{let{item:a}=e;return a===t}))})).forEach((t=>{e.push(t)})),F.forEach((t=>{l.forEach((a=>{t.data==a.item&&e.push({data:t.data,food:t.food,measure:t.measure,quantity:t.quantity-a.quantity,week:t.week})}))})),f(e)}()}),[e.newPlans]);const W=()=>{const t={week:e.value.format("w"),upload:{result:x}};e.addToShoppingListUpdate(t),j(!1)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h.a,{className:"blue-btn shadow-none",variant:"contained",onClick:M,children:"All"}),Object(u.jsx)(N,{}),n.length?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ye.a,{children:i.map(((t,a)=>Object(u.jsxs)(ve.a,{className:"list",style:{alignItems:"flex-end"},children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:[t.data," ",t.quantity," ",t.measure]}),Object(u.jsx)("br",{})]}),Object(u.jsx)("div",{style:{marginLeft:"20px"}}),Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(Q.a,{title:"Add to cart",children:Object(u.jsx)(ie.a,{"aria-label":"Add to cart",sx:{ml:2},onClick:()=>{k(t.data)},children:Object(u.jsx)(tr.a,{fontSize:"25"})})}),Object(u.jsx)(Xi,{value:e.value,food:t.food,item:t.data,id:t.id,measure:t.measure,quantity:t.quantity,update:w,setUpdate:S}),Object(u.jsx)(lr,{value:e.value,food:t.food,data:t.data,week:t.week,id:t.id,measure:t.measure,quantity:t.quantity,update:w,setUpdate:S})]})]},`ingr${a}`)))}),Object(u.jsx)(ye.a,{children:n.map(((t,a)=>Object(u.jsxs)(ve.a,{className:"list",style:{alignItems:"flex-end"},children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:[t.data," ",t.quantity," ",t.measure]}),Object(u.jsx)("br",{})]}),Object(u.jsx)("div",{style:{marginLeft:"20px"}}),Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(Q.a,{title:"Add to cart",children:Object(u.jsx)(ie.a,{"aria-label":"Add to cart",sx:{ml:2},onClick:e=>{(e=>{T([...E,e])})(t),k(t.data),e.target.disabled=!0},children:Object(u.jsx)(tr.a,{fontSize:"25"})})}),Object(u.jsx)(Xi,{value:e.value,food:t.food,item:t.data,id:t.id,measure:t.measure,quantity:t.quantity,update:w,setUpdate:S}),Object(u.jsx)(rr,{value:e.value,food:t.food,data:t.data,week:t.week,id:t.id,measure:t.measure,quantity:t.quantity,update:w,setUpdate:S})]})]},`ingr${a}`)))}),Object(u.jsxs)(ur.a,{spacing:2,direction:"row",style:{justifyContent:"center"},children:[Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",onClick:P,children:"View Cart"}),Object(u.jsx)(h.a,{className:"blue-btn shadow-none",variant:"contained",onClick:M,children:"All"})]}),Object(u.jsxs)(oe.a,{show:b,onHide:R,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"List of items to order"})}),Object(u.jsx)(oe.a.Body,{children:_}),Object(u.jsxs)(oe.a.Footer,{children:[Object(u.jsx)(h.a,{variant:"secondary",onClick:()=>{(()=>{const t={upload:{cartList:E,profile:e.profile,date:e.value.format("YYYY/MM/DD"),status:"pending"}};e.addToPurchaseItems(t),he("Thanks for placing your order with us","We will contact local sustainable farmers and grocery shops and get back to you shortly with prices and delivery time")})(),T([]),R()},children:"Confirm"}),Object(u.jsx)(h.a,{variant:"secondary",onClick:R,children:"Cancel"})]})]}),Object(u.jsxs)("div",{className:"empty basic-title-left",children:[Object(u.jsx)("p",{children:"Regenerate Your Shopping List"}),Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",onClick:()=>p(!0),children:"Generate"}),Object(u.jsxs)(oe.a,{show:m,onHide:I,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Generate Your Shopping List"})}),Object(u.jsx)(oe.a.Body,{children:"Generate a new list?"}),Object(u.jsxs)(oe.a.Footer,{children:[Object(u.jsx)(h.a,{variant:"secondary",onClick:()=>{W(),he("Generating new list..")},children:"Yes"}),Object(u.jsx)(h.a,{variant:"secondary",onClick:I,children:"No"})]})]})]}),Object(u.jsxs)(Wt.a,{open:g,onClose:R,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(u.jsx)(Lt.a,{id:"alert-dialog-title",children:"Order Request"}),Object(u.jsx)(ua.a,{children:Object(u.jsx)(dr.a,{id:"alert-dialog-description",children:"Order your food items from your shopping list"})}),Object(u.jsxs)(ba.a,{children:[Object(u.jsx)(h.a,{onClick:A,children:"Cancel"}),Object(u.jsx)(h.a,{onClick:()=>{(()=>{const t={upload:{firstList:i,secondList:n,profile:e.profile,date:e.value.format("YYYY/MM/DD"),status:"pending"}};e.addToPurchaseItems(t),he("Order Successful","You will be contected shortly..")})(),A()},autoFocus:!0,children:"Yes"})]})]})]}):Object(u.jsxs)("div",{className:"empty basic-title-left",children:[Object(u.jsx)("p",{children:"There are no items in the list yet :( please refresh page"}),Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",onClick:P,children:"Generate"}),Object(u.jsxs)(oe.a,{show:b,onHide:R,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Generate New Shopping List"})}),Object(u.jsx)(oe.a.Body,{children:"Generate a new list?"}),Object(u.jsxs)(oe.a.Footer,{children:[Object(u.jsx)(h.a,{variant:"secondary",onClick:()=>{W(),he("Generating new list..")},children:"Yes"}),Object(u.jsx)(h.a,{variant:"secondary",onClick:R,children:"No"})]})]})]})]})}));const jr=e=>{let{value:t,onChange:a}=e;const[c,i]=Object(s.useState)([]),[r,n]=Object(s.useState)(!1),[o,l]=Object(s.useState)(tc()());return Object(s.useEffect)((()=>{i(mi(t))}),[t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"calendar",children:[Object(u.jsx)(Oi,{value:t,setValue:a}),Object(u.jsxs)("div",{className:"body",children:[Object(u.jsx)("div",{className:"day-names",children:["S","M","T","W","T","F","S"].map(((e,t)=>Object(u.jsx)("div",{className:"week",children:e},t)))}),c.map((e=>Object(u.jsx)("div",{children:e.map((e=>Object(u.jsx)("div",{className:"day",onClick:()=>a(e),children:Object(u.jsx)("div",{className:gi(e,t),children:e.format("D").toString()})},e.format("D").toString())))},e)))]})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-8",style:{textAlign:"left"},children:"Add other items to your Shopping List\ud83d\ude42"}),Object(u.jsx)("div",{className:"col-4",style:{textAlign:"right"},children:Object(u.jsx)(Ki,{value:o,show:r,setShow:n})}),Object(u.jsx)(ti.a,{variant:"primary",children:"Order all food items by clicking the 'All' button or  select items by checking the boxes. You can edit food items before placing an order."})]}),Object(u.jsxs)("div",{className:"plan-box",children:[Object(u.jsx)("div",{className:"header",children:t.format("dddd DD/MM")}),Object(u.jsx)(Ji,{value:t,setValue:l}),Object(u.jsx)(br,{value:t,show:r})]})]})};var hr=a(1084),mr=a(1067);const pr=async(e,t,a,s,c,i,r)=>{let n=`https://api.edamam.com/api/recipes/v2?app_id=5532003c&app_key=511d39184173c54ebc5d02a5063a7b87&type=public&q=${e}`;t&&(n+=`&mealType=${t}`),a&&(n+=`&cuisineType=${a}`),s&&(n+=`&health=${s}`);const o=await fetch(n),l=await o.json();c(l.hits),i(l._links),r(n)},gr=async(e,t,a)=>{const s=await fetch(`${e}`),c=await s.json();a(c.hits),t(c._links)};var Or=a(342),xr=a.n(Or),fr=a(341),yr=a.n(fr);var vr=Object(m.b)((e=>({data:e.data.getData})),(e=>({createMealPlannerData:t=>e(vi(t))})))((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Add to Meal Plan",children:Object(u.jsx)(ie.a,{"aria-label":"Add to Meal Plan",sx:{ml:2},onClick:()=>{(async()=>{const t={upload:{meal:e.meal,mealType:e.mealType,ingredients:e.ingredients,url:e.url,totalNutrients:e.totalNutrients,totalDaily:e.totalDaily,yield:e.yield,nonNativeData:!0}};e.createMealPlannerData(t),he("Success","Added to Meal Plan!")})()},children:Object(u.jsx)(yr.a,{fontSize:"40"})})})})}));function wr(e){return Object(u.jsx)(u.Fragment,{children:e.query&&e.recipes.map(((t,a)=>Object(u.jsx)("div",{className:"meal-box",children:Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{className:"image",children:Object(u.jsx)("img",{src:t.recipe.image,alt:`${t.recipe.label}`})}),Object(u.jsx)(Fe.a,{className:"ingredients",children:Object(u.jsxs)(ye.a,{styles:{paddingTop:0,paddingBottom:0,margin:0},children:[Object(u.jsxs)(xi.a,{className:"heading",children:[Object(u.jsx)("div",{className:"meal-name",children:t.recipe.label}),Object(u.jsx)("div",{className:"icons",children:Object(u.jsx)(vr,{value:e.value,mealType:t.recipe.mealType,meal:t.recipe.label,ingredients:t.recipe.ingredients,url:t.recipe.url,totalNutrients:t.recipe.totalNutrients,totalDaily:t.recipe.totalDaily,yield:t.recipe.yield})})]}),t.recipe.ingredients&&t.recipe.ingredients.map(((e,t)=>Object(u.jsxs)(ve.a,{className:"list",children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(xr.a,{fontSize:"1rem"})}),e.text]},t))),Object(u.jsx)("a",{href:t.recipe.url,children:t.recipe.url})]})})]})},a)))})}function Sr(e){let{setMealType:t}=e;const[a,c]=Object(s.useState)("Breakfast");Object(s.useEffect)((()=>{(()=>{switch(a){default:case"Breakfast":t("Breakfast");break;case"Lunch":t("Lunch");break;case"Dinner":t("Dinner");break;case"Snacks":t("Snacks")}})()}),[a]);return Object(u.jsx)(rt,{id:"meal-type",styling:"green dropdown-input",data:a,items:["Breakfast","Lunch","Dinner","Snacks"],function:e=>c(e)})}function Cr(e){let{setCuisineType:t}=e;const[a,c]=Object(s.useState)("Any");Object(s.useEffect)((()=>{t("Any"===a?"":`${a}`)}),[a]);return Object(u.jsx)(rt,{id:"meal-type",styling:"green dropdown-input",data:a,items:["Any","American","Asian","British","Caribbean","Central Europe","Chinese","Eastern Europe","French","Indian","Italian","Japanese","Kosher","Mediterranean","Mexican","Middle Eastern","Nordic","South American","South East Asian"],function:e=>c(e)})}function kr(e){let{setRequirements:t}=e;const[a,c]=Object(s.useState)("Any");return Object(s.useEffect)((()=>{(()=>{switch(a){default:case"Any":t("");break;case"Alcohol Free":t("alcohol-free");break;case"Crustacean Free":t("crustacean-free");break;case"Dairy Free":t("dairy-free");break;case"Gluten Free":t("gluten-free");break;case"Keto Friendly":t("keto-friendly");break;case"Kosher":t("kosher");break;case"Nut Free":t("nut-free");break;case"Pescatarian":t("pescatarian");break;case"Vegan":t("vegan");break;case"Vegetarian":t("vegetarian")}})()}),[a]),Object(u.jsx)(rt,{id:"requirements",styling:"green dropdown-input",data:a,items:["Any","Alcohol Free","Crustacean Free","Dairy Free","Gluten Free","Keto Friendly","Kosher","Nut Free","Pescatarian","Vegan","Vegetarian"],function:e=>c(e)})}function Nr(e){let{links:t,pageNumber:a,changePage:s}=e;return Object(u.jsxs)(d.a,{children:[t.back?Object(u.jsx)(X,{onClick:()=>console.log(t.back.href),text:"Back",styling:"green"}):null,t.next?Object(u.jsxs)("div",{children:[Object(u.jsx)(De.a,{className:"justify-content-md-center",children:Object(u.jsxs)("p",{children:["Page: ",a+1]})}),Object(u.jsxs)(De.a,{children:[0!=a&&Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{onClick:()=>s(-1),text:"Previous Page",styling:"green"})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{onClick:()=>s(1),text:"Next Page",styling:"green"})})]})]}):null]})}function Er(e){const[t,a]=Object(s.useState)(!1),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(""),[d,b]=Object(s.useState)(""),[m,p]=Object(s.useState)(""),[g,O]=Object(s.useState)({}),[x,f]=Object(s.useState)(""),[y,v]=Object(s.useState)(""),[w,S]=Object(s.useState)([]),[C,k]=Object(s.useState)(0);function N(e){w.includes(e)?console.log("Page already in array!"):S((t=>[...t,e]))}return Object(s.useEffect)((()=>{pr(r,o,d,m,O,f,N)}),[r,o,d]),Object(s.useEffect)((()=>{y&&gr(y,f,O)}),[y]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"basic-title-left",children:"Search Recipes"}),Object(u.jsxs)(j.a,{onSubmit:e=>{e.preventDefault(),n(c)},children:[Object(u.jsx)(j.a.Group,{children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{className:"shadow-none",type:"text",id:"query",defaultValue:r,onChange:e=>{i(e.target.value)}}),Object(u.jsx)(h.a,{type:"submit",className:"green-btn shadow-none",children:"Search"})]})}),Object(u.jsxs)(hr.a,{sx:{flexGrow:1},children:[Object(u.jsxs)(mr.a,{container:!0,spacing:2,children:[Object(u.jsxs)(mr.a,{item:!0,xs:12,md:6,children:[Object(u.jsx)("p",{children:"Meal Type:"}),Object(u.jsx)("div",{children:Object(u.jsx)(Sr,{setMealType:l})})]}),Object(u.jsxs)(mr.a,{item:!0,xs:12,md:6,children:[Object(u.jsx)("p",{children:"Origin:"}),Object(u.jsx)("div",{children:Object(u.jsx)(Cr,{setCuisineType:b})})]})]}),Object(u.jsxs)(mr.a,{container:!0,spacing:2,children:[Object(u.jsxs)(mr.a,{item:!0,xs:12,md:6,children:[Object(u.jsx)("p",{children:"Requirements:"}),Object(u.jsx)("div",{children:Object(u.jsx)(kr,{setRequirements:p})})]}),Object(u.jsx)(mr.a,{item:!0,xs:12,md:6})]})]})]}),Object(u.jsx)(wr,{recipes:g,query:r,value:e.value,onChange:e.onChange}),x?Object(u.jsx)(Nr,{links:x,pageNumber:C,changePage:function(e){e>0?(k((t=>t+e)),v(x.next.href),N(x.next.href)):e<0&&(k((e=>0===e?0:e-1)),0!=C&&v(w[C]))}}):null]})}Object(m.b)(null,(e=>({createMealPlannerData:t=>e(vi(t))})))((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h5",{children:"Choose atleast 7 meals each for Breakfast, Lunch and Dinner"}),Object(u.jsx)(Er,{value:e.value}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"btn blue-btn shadow-none",style:{marginTop:"25px"},onClick:()=>{e.setPage(e.page+1)},children:"Next"})})]})}));Object(m.b)(null,(e=>({createMealPlannerData:t=>e(vi(t))})))((function(e){const[t,a]=Object(s.useState)("lunch"),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(!0),o={food:"",foodId:""},[l,d]=Object(s.useState)(o),b=e=>{d({...l,foodId:e})},[m,p]=Object(s.useState)([]);Object(s.useEffect)((()=>{console.log("meal list",m)}),[m]);const g=m.map(((e,t)=>Object(u.jsx)("li",{children:e.food},t))),[O,x]=Object(s.useState)(0),f=()=>{const a={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{mealType:t,mealList:m}};console.log("checking the data:",a),console.log("checking props:",e),e.createMealPlannerData(a),x(O+1)};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h5",{children:"Choose atleast 7 meals for Lunch"}),Object(u.jsxs)(j.a,{onSubmit:e=>{e.preventDefault(),f()},children:[Object(u.jsx)("div",{style:{padding:"0 0 0 4%"},children:Object(u.jsx)("ul",{children:g})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(Hc,{handleFoodSearch:e=>{e.target.textContent?d({...l,food:e.target.textContent}):d({...l,food:e.target.value})}})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(h.a,{className:"green-btn shadow-none",id:"add meal",onClick:()=>{(async()=>{""!==l.food?Kc(l.food,b).then((()=>{p((e=>[...e,l])),d(o)})):i("Please input a meal to add.")})()},children:"Add Meal"})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{onClick:()=>{alert("Your meals have been saved")},className:"blue-btn shadow-none",type:"submit",children:"Save"})})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:Object(u.jsx)("button",{className:"btn blue-btn shadow-none",style:{marginTop:"25px"},onClick:()=>{e.setPage(e.page-1)},children:"Previous"})}),Object(u.jsx)("span",{children:Object(u.jsx)("button",{className:"btn blue-btn shadow-none",style:{marginLeft:"500px",marginTop:"25px"},onClick:()=>{e.setPage(e.page+1)},children:"Next"})})]})]})}));Object(m.b)(null,(e=>({createMealPlannerData:t=>e(vi(t))})))((function(e){const[t,a]=Object(s.useState)("dinner"),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(!0),o={food:"",foodId:""},[l,d]=Object(s.useState)(o),b=e=>{d({...l,foodId:e})},[m,p]=Object(s.useState)([]);Object(s.useEffect)((()=>{console.log("meal list",m)}),[m]);const g=m.map(((e,t)=>Object(u.jsx)("li",{children:e.food},t))),[O,x]=Object(s.useState)(0),f=()=>{const a={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{mealType:t,mealList:m}};console.log("checking the data:",a),console.log("checking props:",e),e.createMealPlannerData(a),x(O+1)};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h5",{children:"Choose atleast 7 meals for Dinner"}),Object(u.jsxs)(j.a,{onSubmit:e=>{e.preventDefault(),f()},children:[Object(u.jsx)("div",{style:{padding:"0 0 0 4%"},children:Object(u.jsx)("ul",{children:g})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(Hc,{handleFoodSearch:e=>{e.target.textContent?d({...l,food:e.target.textContent}):d({...l,food:e.target.value})}})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(h.a,{className:"green-btn shadow-none",id:"add meal",onClick:()=>{(async()=>{""!==l.food?Kc(l.food,b).then((()=>{p((e=>[...e,l])),d(o)})):i("Please input a meal to add.")})()},children:"Add Meal"})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Save"})})]}),Object(u.jsxs)("div",{className:"btn-group ml-auto",children:[Object(u.jsx)("span",{children:Object(u.jsx)("button",{className:"btn blue-btn shadow-none",style:{marginTop:"25px"},onClick:()=>{e.setPage(e.page-1)},children:"Previous"})}),Object(u.jsx)("span",{children:Object(u.jsx)("button",{className:"btn blue-btn shadow-none",style:{marginLeft:"500px",marginTop:"25px"},onClick:()=>{alert("You've successfully created your meal plan")},children:"Submit"})})]})]})}));const Tr="5532003c",_r="511d39184173c54ebc5d02a5063a7b87";var Dr=Object(m.b)(null,(e=>({createMealPlannerData:t=>e(vi(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(null),[o,l]=Object(s.useState)([]),[d,b]=Object(s.useState)([]),[m,p]=Object(s.useState)([]),[g,O]=Object(s.useState)([]),[x,f]=Object(s.useState)([]),[y,v]=Object(s.useState)([]),[w,S]=Object(s.useState)([]),[C,k]=Object(s.useState)([]),N={food:"",quantity:0,measure:"g",foodId:""},[E,T]=Object(s.useState)(N);Object(s.useEffect)((()=>{console.log("ingredients",o)}),[o]);const[_,D]=Object(s.useState)(0),F=()=>{const t={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w"),day:e.value.format("DD"),upload:{meal:c,ingredients:o,mealType:g,totalDaily:x,totalNutrients:y,url:C,recipeYield:w}};e.createMealPlannerData(t),he("Success","Added to Meal Plan!"),D(_+1)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Xc,{fps:10,qrbox:250,disableFlip:!1,qrCodeSuccessCallback:(e,t)=>{fetch(`https://world.openfoodfacts.org/api/v0/product/${t.decodedText}.json`).then((e=>e.json())).then((e=>{let t;return void 0==e.product.product_name_en?(t=e.product.product_name,i(t)):(t=e.product.product_name_en,i(t)),fetch(`https://api.edamam.com/api/recipes/v2?app_id=${Tr}&app_key=${_r}&type=public&q=${t}`)})).then((e=>e.json())).then((e=>{console.log("name:",e.hits),p(e.hits)})).catch((e=>{console.log(e.message),n(e.message)})).catch((e=>{console.log(e.message),n(e.message)}))}}),Object(u.jsx)("p",{style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:c}),Object(u.jsxs)(ti.a,{variant:"success",children:[Object(u.jsx)(ti.a.Heading,{children:"Missing some items in your meal plan?"}),Object(u.jsx)("p",{children:"The scanner allows you to add more items to your meal plan"})]}),Object(u.jsxs)(j.a,{onSubmit:t=>{t.preventDefault(),F(),e.handleFormClose()},children:[Object(u.jsx)(j.a.Group,{children:Object(u.jsx)("li",{children:m&&m.map((e=>Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:Object(u.jsx)("div",{class:"card",children:Object(u.jsxs)("div",{class:"card-body",children:[Object(u.jsx)("h5",{class:"card-title",children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",style:{fontSize:"20px",fontWeight:"bold",color:"green"},children:null===e||void 0===e?void 0:e.recipe.label}),Object(u.jsx)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",style:{alignItems:"right",marginLeft:"20px"},value:null===e||void 0===e?void 0:e.recipe.label,onClick:t=>{(e=>{i(e.target.value)})(t),O(null===e||void 0===e?void 0:e.recipe.mealType),f(null===e||void 0===e?void 0:e.recipe.totalDaily),v(null===e||void 0===e?void 0:e.recipe.totalNutrients),S(null===e||void 0===e?void 0:e.recipe.yield),k(null===e||void 0===e?void 0:e.recipe.url)}})]})}),Object(u.jsx)("p",{class:"card-text",children:null===e||void 0===e?void 0:e.recipe.ingredientLines.map((e=>Object(u.jsx)("ul",{children:Object(u.jsxs)("div",{class:"form-check",children:[Object(u.jsx)("label",{class:"form-check-label",for:"flexCheckDisabled",children:e}),Object(u.jsx)("input",{class:"form-check-input",type:"checkbox",value:e,id:"flexCheckDefault",style:{alignItems:"right",marginLeft:"20px",alignItems:"left"},onClick:e=>{(e=>{T(E.food=e.target.value),l((e=>[...e,E])),T(N)})(e)}})]})})))})]})})})})))})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Save"})})]}),r&&Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Oops..Could not fetch food item, pls try another barcode..\ud83d\ude2d"})})]})}));var Fr=Object(m.b)((e=>({data:e.data.getData})),(e=>({createMealPlannerData:t=>e(vi(t))})))((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Add to Meal Plan",children:Object(u.jsx)(ie.a,{"aria-label":"Add to Meal Plan",sx:{ml:2},onClick:()=>{(async()=>{const t={upload:{meal:e.meal,mealType:e.mealType,ingredients:e.ingredients,totalNutrients:e.totalNutrients,totalDaily:e.totalDaily,recipeYield:e.recipeYield,nonNativeData:!0}};e.createMealPlannerData(t),he("Success","Added to Meal Plan!")})()},children:Object(u.jsx)(yr.a,{fontSize:"40"})})})})}));function Rr(e){return Object(u.jsx)(u.Fragment,{children:e.meals.map(((e,t)=>Object(u.jsx)("div",{className:"meal-box",children:Object(u.jsx)("div",{className:"ingredients",children:Object(u.jsxs)(ye.a,{styles:{paddingTop:0,paddingBottom:0,margin:0},children:[Object(u.jsxs)(xi.a,{className:"heading",children:[Object(u.jsx)("div",{className:"meal-name",children:e.meal}),e.mealType?Object(u.jsx)("div",{className:"meal-type",children:e.mealType}):null,Object(u.jsx)("div",{className:"icons",children:Object(u.jsx)(Fr,{mealType:e.mealType,meal:e.meal,ingredients:e.ingredients,totalNutrients:e.totalNutrients?e.totalNutrients:null,totalDaily:e.totalDaily?e.totalDaily:null,recipeYield:e.recipeYield?e.recipeYield:null})})]}),e.ingredients.map(((t,a)=>Object(u.jsx)(ve.a,{className:"list",style:{alignItems:"baseline"},children:e.nn?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("p",{children:t.text})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("p",{children:[t.food,": ",t.quantity,t.measure]})})},`item${a}`)))]},`ingrs${t}`)})},`meal-box${t}`)))})}var Pr=Object(m.b)((e=>({savedMeal:e.mealPlan.savedMeals})),(e=>({getRecipes:t=>e(((e,t,a)=>{let{getFirestore:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().collection("marketplace").doc(r).collection("mySavedMeals").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_RECIPES",payload:a})})).catch((t=>{e({type:"GET_RECIPES_ERROR",err:t})}))}))})))((e=>{const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(0);Object(s.useEffect)((()=>{e.getRecipes()}),[c]);return Object(s.useEffect)((()=>{(async()=>{a([]),e.savedMeal.forEach((e=>{var t=e.meal,s=e.ingredients,c=e.id,i=e.mealType,r=e.nonNativeData,n=e.totalDaily,o=e.totalNutrients,l=e.yield;a(r?e=>[...e,{meal:t,mealType:i,ingredients:s,id:c,nonNativeData:r,totalDaily:n,totalNutrients:o,recipeYield:l}]:e=>[...e,{meal:t,mealType:i,ingredients:s,id:c,meal:t,mealType:i,ingredients:s,id:c,nonNativeData:r,totalDaily:n,totalNutrients:o,recipeYield:l}])}))})(),console.log("===> Saved Meals",t)}),[e.savedMeal]),console.log("===> Saved Meals",t),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-8 basic-title-left mb-3",children:"My Saved Meals"})}),Object(u.jsx)("div",{className:"saved-meals",children:Object(u.jsx)(Rr,{forceUpdate:()=>{i(c+1)},meals:t,saved:!0})})]})}));function Ir(e){let{show:t,setShow:a,value:c}=e;const[i,r]=Object(s.useState)("unconfirmed"),[n,o]=Object(s.useState)(0),[l,d]=Object(s.useState)([c]),[b,j]=Object(s.useState)(!1),[h,m]=Object(s.useState)(!1),[p,g]=Object(s.useState)(!1),[O,x]=Object(s.useState)("+ scan from barcode"),[f,y]=Object(s.useState)({Breakfast:[],Lunch:[],Dinner:[]}),v=()=>{a(!1),r("unconfirmed")};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>a(!0)})})}),Object(u.jsxs)(oe.a,{show:t,onHide:v,size:"lg","aria-labelledby":"add meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsxs)(oe.a.Title,{id:"add-meal",className:"basic-title-left basic-lg",children:["Create 6-Months meal plan from ",c.format("DD/MM")]})}),Object(u.jsxs)(oe.a.Body,{children:[Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>(m(!h),g(!p),void x(h?"+ scan from barcode":"- input manually")),children:O}),Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>j(!0),children:"Add From Saved Meal"}),h?Object(u.jsx)(Dr,{value:c,handleFormClose:v}):Object(u.jsx)(Er,{value:c})]})]}),Object(u.jsxs)(oe.a,{show:b,onHide:()=>j(!1),size:"lg","aria-labelledby":"add meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",className:"basic-title-left basic-lg",children:"Add from saved meal"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(Pr,{})})]})]})}var Mr=Object(m.b)((e=>({data:e.data.getData})),(e=>({deleteMealPlannerData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealPlannerData").doc(a.id).delete().then((()=>e({type:"DELETE_MEAL_PLAN",mealPlanner:a}))).catch((t=>{e({type:"DELETE_MEAL_PLAN_ERROR",err:t})}))}));var a}})))((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Delete",children:Object(u.jsx)(ie.a,{"aria-label":"Delete",sx:{ml:2},onClick:()=>{(t=>{const a={id:t};e.deleteMealPlannerData(a),he("Success",`${e.meal} has been removed!`),e.forceUpdate()})(e.id)},children:Object(u.jsx)(yi.a,{fontSize:"inherit"})})})})}));var Ar=Object(m.b)((e=>({data:e.data.getData})),(e=>({editMealDataPlan:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealPlannerData").doc(a.id).set(a.upload,{merge:!0}).then((()=>e({type:"EDIT_MEAL",mealPlan:a}))).catch((t=>{e({type:"EDIT_MEAL_ERROR",err:t})}))}));var a},editSavedMeal:t=>e(os(t))})))((function(e){const[t,a]=Object(s.useState)(e.meal),[c,i]=Object(s.useState)(e.ingredient);return Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={id:e.id,upload:{meal:t,ingredients:c,id:e.id}};e.editMealDataPlan(a),he("Success"," Item has been updated!"),e.forceUpdate()})(),e.handleFormClose()},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Meal Name"}),Object(u.jsx)(j.a.Control,{type:"text",id:"mealName",defaultValue:t,onChange:e=>{a(e.target.value)}})]}),c.map(((e,t)=>Object(u.jsxs)("div",{className:"form",children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Ingredients"}),Object(u.jsx)(j.a.Control,{type:"text",id:"food",onChange:a=>{i([...c.slice(0,t),{food:a.target.value,quantity:e.quantity,measure:e.measure},...c.slice(t+1,c.length)])},defaultValue:e.food})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",onChange:a=>{i([...c.slice(0,t),{food:e.food,quantity:a.target.value,measure:e.measure},...c.slice(t+1,c.length)])},defaultValue:e.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:e.measure,items:["g","kg","/","mL","L","cups","pcs"],function:a=>i([...c.slice(0,t),{food:e.food,quantity:e.quantity,measure:a},...c.slice(t+1,c.length)])})]})})]},t))),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn",type:"submit",children:"Done"})})]})}));function Wr(e){let{meal:t,ingredients:a,id:s,show:c,setShow:i,value:r,forceUpdate:n,saved:o}=e;const l=()=>i(!1);return Object(u.jsxs)(oe.a,{show:c,onHide:l,size:"lg","aria-labelledby":"edit meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",children:"Edit Meal"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(Ar,{meal:t,ingredient:a,id:s,forceUpdate:n,value:r,handleFormClose:l,saved:o})})]})}var Lr=function(e){const[t,a]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Edit",children:Object(u.jsx)(ie.a,{className:"edit","aria-label":"Edit",sx:{ml:2},onClick:()=>{a(!0)},children:Object(u.jsx)(is.a,{fontSize:"inherit"})})}),Object(u.jsx)(Wr,{value:e.value,show:t,setShow:a,meal:e.meal,ingredients:e.ingredients,id:e.id,forceUpdate:e.forceUpdate,saved:e.saved})]})};function Br(e){const[t,a]=Object(s.useState)(0),c=()=>{a(t+1)},[i,r]=Object(s.useState)([]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("br",{}),Object(u.jsx)("p",{children:Object(u.jsxs)("select",{onChange:function(t){const a=t.target.value,s="all"===a?e.meals:e.meals.filter((e=>e.mealType[0]===a));r(s)},children:[Object(u.jsx)("option",{value:"all",children:"Meal Plan List"}),Object(u.jsx)("option",{value:"breakfast",children:"beakfast"}),Object(u.jsx)("option",{value:"lunch/dinner",children:"lunch/dinner"}),Object(u.jsx)("option",{value:"snack",children:"snack"})]})}),i.map(((t,a)=>Object(u.jsx)("div",{className:"meal-box",children:Object(u.jsx)("div",{className:"ingredients",children:Object(u.jsxs)(ye.a,{styles:{paddingTop:0,paddingBottom:0,margin:0},children:[Object(u.jsxs)(xi.a,{className:"heading",children:[Object(u.jsx)("div",{className:"meal-name",children:t.meal}),t.mealType?Object(u.jsx)("div",{className:"meal-type",children:t.mealType}):null,Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(Mr,{value:e.value,id:t.id,meal:t.meal,saved:e.saved,forceUpdate:c}),t.nonNativeData?null:Object(u.jsx)(Lr,{value:e.value,meal:t.meal,ingredients:t.ingredients,id:t.id,forceUpdate:c,saved:e.saved})]})]}),t.ingredients.map(((e,a)=>Object(u.jsx)(ve.a,{className:"list",style:{alignItems:"baseline"},children:t.nn?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("p",{children:e.text})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("p",{children:[e.food,": ",e.quantity,e.measure]})})},`item${a}`))),Object(u.jsx)(ve.a,{children:t.url?Object(u.jsx)("a",{href:t.url,children:t.url}):null})]},`ingrs${a}`)})},`meal-box${a}`)))]})}var Gr=Object(m.b)((e=>({mealPlanner:e.mealPlanner.plans,weekPlans:e.mealPlanner.weekPlans})),(e=>({getMealPlannerData:t=>e(((e,t,a)=>{let{getFirebase:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().firestore().collection("marketplace").doc(r).collection("mealPlannerData").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_MEAL_PLANS",payload:a})})).catch((t=>{e({type:"GET_MEAL_PLANS_ERROR",err:t})}))})),getWeeklyPlan:t=>e(wi(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(0);return Object(s.useEffect)((()=>{const t={month:e.value.format("YYYYMM"),day:e.value.format("DD-MM-yyyy")};e.getMealPlannerData(t)}),[e.value,c]),Object(s.useEffect)((()=>{(async()=>{a([]),e.mealPlanner.forEach((e=>{var t=e.meal,s=e.ingredients,c=e.id,i=e.url,r=e.totalNutrients,n=e.totalDaily,o=e.recipeYield,l=e.mealType;let d=e.nn;a((e=>[...e,{meal:t,ingredients:s,id:c,nn:d,url:i,mealType:l,totalNutrients:r,totalDaily:n,recipeYield:o}]))}))})()}),[e.mealPlanner]),console.log("lets check ==>",t.filter((e=>"breakfast"==e.mealType[0]))),Object(u.jsx)(u.Fragment,{children:t.length?Object(u.jsx)("div",{children:Object(u.jsx)(Br,{forceUpdate:()=>{i(c+1)},meals:t,saved:!1,value:e.value,isMealPlan:!0})}):Object(u.jsx)("div",{className:"empty basic-title-left",children:Object(u.jsx)("p",{children:"Choose a start date to generate your 6 Months meal plan \ud83d\ude42"})})})}));const Ur=e=>{let{value:t,onChange:a}=e;const[c,i]=Object(s.useState)([]),[r,n]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{i(mi(t))}),[t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-8",style:{textAlign:"left"},children:"Want to make changes to your meal plan? Add more meals to your meal plan by clicking the 'plus' button or remove meals from the meal plan by deleting from the meal plan list  \ud83d\ude42"}),Object(u.jsx)("div",{className:"col-4",style:{textAlign:"right"},children:Object(u.jsx)(Ir,{value:t,show:r,setShow:n})}),Object(u.jsx)(ti.a,{variant:"primary",children:"New to meal planning? Create your 6-Months meal plan by clicking on the 'plus' button, using the search button or your saved meals or the barcode scanner, add at least 7 meals each for breakfast, lunch and dinner; then go to the View Plan tab to generate a 6 month meal plan"})]}),Object(u.jsxs)("div",{className:"plan-box",children:[Object(u.jsx)("div",{className:"header",children:t.format("dddd DD/MM")}),Object(u.jsx)("div",{children:Object(u.jsx)(Gr,{value:t,show:r})})]})]})};a(417),a(1068),a(845),a(253),a(844),a(427),a(939),a(97),a(252),a(1050),a(873);var Yr=a(599),qr=a(343),Hr=a(586),Vr=a(587);var zr=Object(m.b)((e=>({data:e.mealPlanner.plans,allPlan:e.mealPlanner.newPlans,allItems:e.mealPlanner.allItems})),(e=>({getMealPlannerData:t=>e(((e,t,a)=>{let{getFirebase:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().firestore().collection("marketplace").doc(r).collection("mealPlannerData").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_MEAL_PLANS",payload:a})})).catch((t=>{e({type:"GET_MEAL_PLANS_ERROR",err:t})}))})),getPlanData:t=>e(((e,t,a)=>{let{getFirebase:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().firestore().collection("marketplace").doc(r).collection("newPlan").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_NEW_PLANS",payload:a})})).catch((t=>{e({type:"GET_NEW_PLANS_ERROR",err:t})}))})),generateNewPlan:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("newPlan").add(e.upload).then((a=>{c().firestore().collection("marketplace").doc(n).collection("newPlan").doc(a.id).set({id:a.id},{merge:!0}),t({type:"GENERATE_MEAL_PLANNER",plan:e})})).catch((e=>{t({type:"GENERATE_MEAL_PLANNER_ERROR",err:e})}))})(t)),getAllItems:t=>e(Si(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)([]),[r,n]=Object(s.useState)([]),[o,l]=Object(s.useState)([]),[d,b]=Object(s.useState)(!1),[j,m]=Object(s.useState)([""]),[p,g]=Object(s.useState)([]),[O,x]=Object(s.useState)(!1),[f,y]=Object(s.useState)(!1);var v=new Date(e.value.format("YYYY-MM-DD"));v.setMonth(v.getMonth()+6),console.log("In six months",v.toISOString().slice(0,19));const w=function(e,t){for(var a=[],s=new Date(e);s<=new Date(t);s.setDate(s.getDate()+1))a.push(new Date(s));return a}(new Date(e.value.format("YYYY-MM-DD")),new Date(v.toISOString().slice(0,10))).map((e=>e.toISOString().slice(0,10)));var S=p;let C=[];for(var k=S.length,N=0;N<k;N++){var E={};E.start=S[N],E.end=S[N],E.qty=3,C.push(E)}let T=C.flatMap((e=>Array(e.qty).fill({start:e.start,end:e.end})));Object(s.useEffect)((()=>{e.getAllItems()}),[]),Object(s.useEffect)((()=>{(async()=>{n([]),l([]),e.data.forEach((e=>{var t=e.meal,a=e.ingredients,s=e.id,c=e.mealType,i=e.url,r=e.totalNutrients,o=e.totalDaily,d=e.yield;let u;u=!!e.nonNativeData&&e.nonNativeData,"breakfast"==c?n((e=>[...e,{meal:t,mealType:c,ingredients:a,id:s,nn:u,url:i,totalNutrients:r,totalDaily:o,recipeYield:d}])):l((e=>[...e,{meal:t,mealType:c,ingredients:a,id:s,nn:u,url:i,totalNutrients:r,totalDaily:o,recipeYield:d}]))}))})()}),[e.data]),Object(s.useEffect)((()=>{g(w)}),[]),Object(s.useEffect)((()=>{_()}),[r,o]),console.log("breakfast:",r);var _=()=>{var e=[];let t=0,a=0,s=0;for(;t<r.length-1&&a<o.length-1;)e[s++]=r[t++],e[s++]=o[a++],e[s++]=o[a++];for(;t<r.length;)e[s++]=r[t++];for(;a<o.length;)e[s++]=o[a++];return e};Object(s.useEffect)((()=>{D()}),[r,o]);var D=async()=>{var e=[],s=0;if(await _(),""==r||""==o)return Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Loading..."})});var c=_(),i=8,n=":00:00",l="T0"+i+n;for(let t=0;t<T.length;t++){var d={};d.title=c[s].meal,d.start=T[t].start+l,d.end=T[t].end+l,d.ingredients=c[s].ingredients,d.totalDaily=c[s].totalDaily,d.totalNutrients=c[s].totalNutrients,d.recipeYield=c[s].recipeYield,d.nn=c[s].nn,d.url=c[s].url,e.push(d),(i+=6)>20&&(i=8),l=i>9?"T"+i+n:"T0"+i+n,++s===c.length-1&&(s=0)}a(e),console.log("All items is:",t)};Object(s.useEffect)((()=>{e.getPlanData()}),[]),Object(s.useEffect)((()=>{(async()=>{i([]),e.allPlan.forEach((e=>{var t=e.meal,a=e.ingredients,s=e.totalDaily,c=e.totalNutrients,r=e.recipeYield,n=e.nn,o=e.start,l=e.end;i((e=>[...e,{title:t,ingredients:a,totalDaily:s,totalNutrients:c,recipeYield:r,nn:n,start:o,end:l}]))}))})()}),[e.allPlan]);const F=()=>x(!1),R=()=>x(!0);return Object(u.jsx)(u.Fragment,{children:c.length?Object(u.jsxs)("div",{className:"calendar",children:[Object(u.jsx)(Yr.a,{plugins:[qr.b,Hr.a,Vr.a],initialView:"dayGridMonth",themeSystem:"bootstrap",headerToolbar:{center:"dayGridMonth,timeGridWeek,timeGridDay"},events:c,contentHeight:"auto",eventDisplay:"block",display:"background",nowIndicator:!0,dateClick:e=>console.log(e.dateStr)}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:Object(u.jsx)(h.a,{variant:"secondary",onClick:R,children:"Generate Plan"})}),Object(u.jsxs)(oe.a,{show:O,onHide:F,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Generate Plan"})}),Object(u.jsxs)(oe.a.Body,{children:[Object(u.jsx)("p",{children:"Do you want to generate a new plan? "}),Object(u.jsx)("p",{children:"This will incure additional cost"})]}),Object(u.jsxs)(oe.a.Footer,{children:[Object(u.jsx)(h.a,{variant:"secondary",children:"Yes"}),Object(u.jsx)(h.a,{variant:"secondary",onClick:F,children:"No"})]})]})]})]}):Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"empty basic-title-center",children:Object(u.jsx)("p",{children:"You have not generated a new meal plan yet.. \ud83d\ude42"})}),Object(u.jsx)("p",{children:Object(u.jsx)(h.a,{variant:"secondary",onClick:R,children:"Generate Plan"})}),Object(u.jsxs)(oe.a,{show:O,onHide:F,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Generate Plan"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)("p",{children:"Do you want to generate a new plan? "})}),Object(u.jsxs)(oe.a.Footer,{children:[Object(u.jsx)(h.a,{variant:"secondary",disabled:f,onClick:()=>{(async()=>{t.forEach((t=>{const a={year:tc()(t.start).format("yyyy"),week:tc()(t.start).format("w"),upload:{meal:t.title,ingredients:t.ingredients,totalDaily:t.totalDaily,totalNutrients:t.totalNutrients,recipeYield:t.recipeYield,nn:t.nn,url:t.url,start:t.start,end:t.end,day:tc()(t.start).format("DD-MM-yyyy")}};e.generateNewPlan(a)})),me("Saving..","refresh when notification disappears!")})(),F(),y(!0)},children:f?"Generated":"Generate"}),Object(u.jsx)(h.a,{variant:"secondary",onClick:F,children:"No"})]})]})]})})}));var $r=e=>Object(u.jsx)("div",{children:e.data});function Kr(e,t,a){const[c,i]=Object(s.useState)(!1),[r,n]=Object(s.useState)(null);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"6-Months Meal Plan"}),Object(u.jsx)(zr,{value:e.value,getItems:t,setGetItems:a}),Object(u.jsx)("br",{}),c&&Object(u.jsx)($r,{data:r})]})}var Jr=Object(m.b)(null,(e=>({createRecipe:t=>e(ns(t))})))((function(e){const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(!0),d={food:"",quantity:0,measure:"g",foodId:""},[b,m]=Object(s.useState)(d),p=e=>{m({...b,foodId:e})},[g,O]=Object(s.useState)([]);Object(s.useEffect)((()=>{console.log("ingredients",g)}),[g]);const x=g.map(((e,t)=>Object(u.jsxs)("li",{children:[e.food,": ",e.quantity,e.measure]},t))),[f,y]=Object(s.useState)(0),v=()=>{const a={upload:{meal:t,mealType:c,ingredients:g}};e.createRecipe(a),y(f+1)};return Object(u.jsxs)(j.a,{onSubmit:t=>{t.preventDefault(),v(),e.handleFormClose()},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Meal Name"}),Object(u.jsx)(j.a.Control,{type:"text",id:"mealName",onChange:e=>{a(e.target.value)},required:!0})]}),Object(u.jsx)(Gc,{setMealType:i,ownRecipe:!0}),Object(u.jsx)("div",{style:{padding:"0 0 0 4%"},children:Object(u.jsx)("ul",{children:x})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(Hc,{handleFoodSearch:e=>{e.target.textContent?m({...b,food:e.target.textContent}):m({...b,food:e.target.value})}})}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Weight/Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",onChange:e=>(e=>{e.target.textContent?m({...b,[e.target.id]:e.target.textContent}):m({...b,[e.target.id]:e.target.value})})(e),value:b.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:b.measure,items:["g","kg","/","mL","L","/","tsp","tbsp","cups","units","pcs","oz","lbs"],function:e=>{m({...b,measure:e})}})]})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(h.a,{className:"green-btn shadow-none",id:"add ingredient",onClick:()=>{(async()=>{""!==b.food?Kc(b.food,p).then((()=>{O((e=>[...e,b])),m(d)})):n("Please input an ingredient to add.")})()},children:"Add Ingredient"})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Done"})})]})}));function Qr(e){let{show:t,setShow:a,value:c}=e;const[i,r]=Object(s.useState)("unconfirmed"),[n,o]=Object(s.useState)(!1),[l,d]=Object(s.useState)("+ scan from barcode"),b=()=>{a(!1),r("unconfirmed")};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>a(!0)})})}),Object(u.jsxs)(oe.a,{show:t,onHide:b,size:"lg","aria-labelledby":"add meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",className:"basic-title-left basic-lg",children:"Add To Saved Meals"})}),Object(u.jsxs)(oe.a.Body,{children:[Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>(o(!n),void d(n?"+ scan from barcode":"- input manually")),children:l}),n?Object(u.jsx)($i,{handleFormClose:b}):Object(u.jsx)(Jr,{handleFormClose:b})]})]})]})}var Zr=Object(m.b)((e=>({mealPlan:e.mealPlan.savedMeals,weekPlans:e.mealPlanner.weekPlans})),(e=>({getRecipes:t=>e(((e,t,a)=>{let{getFirestore:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().collection("marketplace").doc(r).collection("mySavedMeals").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_RECIPES",payload:a})})).catch((t=>{e({type:"GET_RECIPES_ERROR",err:t})}))})),getWeeklyPlan:t=>e(wi(t))})))((e=>{const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)([]),[r,n]=Object(s.useState)(!1),[o,l]=Object(s.useState)(0);Object(s.useEffect)((()=>{e.getRecipes()}),[o]);return Object(s.useEffect)((()=>{(async()=>{a([]),e.mealPlan.forEach((e=>{var t=e.meal,s=e.ingredients,c=e.id,i=e.mealType,r=e.nonNativeData,n=e.totalDaily,o=e.totalNutrients,l=e.url,d=e.yield;a(r?e=>[...e,{meal:t,mealType:i,ingredients:s,id:c,nonNativeData:r,totalDaily:n,totalNutrients:o,url:l,recipeYield:d}]:e=>[...e,{meal:t,mealType:i,ingredients:s,id:c}])}))})()}),[e.mealPlan]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-8 basic-title-left mb-3",children:"My Saved Meals"}),Object(u.jsx)("div",{className:"col-4",style:{textAlign:"right"},children:Object(u.jsx)(Qr,{show:r,setShow:n})})]}),Object(u.jsx)("div",{className:"saved-meals",children:Object(u.jsx)(Ii,{forceUpdate:()=>{l(o+1)},onChange:e.onChange,meals:t,weeklyMeals:c,saved:!0,value:e.value})})]})}));const Xr=async(e,t,a,s,c,i,r)=>{let n=`https://api.edamam.com/api/recipes/v2?app_id=5532003c&app_key=511d39184173c54ebc5d02a5063a7b87&type=public&q=${e}`;t&&(n+=`&mealType=${t}`),a&&(n+=`&cuisineType=${a}`),s&&(n+=`&health=${s}`);const o=await fetch(n),l=await o.json();c(l.hits),i(l._links),r(n),console.log("This is your data",l)},en=async(e,t,a)=>{const s=await fetch(`${e}`),c=await s.json();a(c.hits),t(c._links),console.log("This is your data",c)};var tn=a(588),an=a.n(tn);var sn=Object(m.b)((e=>({data:e.data.getData})),(e=>({createRecipe:t=>e(ns(t))})))((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Add to Saved Meals",children:Object(u.jsx)(ie.a,{"aria-label":"Add to Saved Meals",sx:{ml:2},onClick:()=>{(async()=>{const t={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w")-1,day:e.value.format("DD"),upload:{meal:e.meal,mealType:e.mealType,ingredients:e.ingredients,url:e.url,totalNutrients:e.totalNutrients,totalDaily:e.totalDaily,yield:e.yield,nonNativeData:!0}};e.createRecipe(t),he("Success","Added to Saved Meals!")})()},children:Object(u.jsx)(an.a,{fontSize:"20"})})})})}));function cn(e){return Object(u.jsx)(u.Fragment,{children:e.query&&e.recipes.map(((t,a)=>Object(u.jsx)("div",{className:"meal-box-recipe",children:Object(u.jsxs)(De.a,{children:[Object(u.jsx)(Fe.a,{className:"image",children:Object(u.jsx)("img",{src:t.recipe.image,alt:`${t.recipe.label}`})}),Object(u.jsx)(Fe.a,{className:"ingredients",children:Object(u.jsxs)(ye.a,{styles:{paddingTop:0,paddingBottom:0,margin:0},children:[Object(u.jsxs)(xi.a,{className:"heading",children:[Object(u.jsx)("div",{className:"meal-name",children:t.recipe.label}),Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(Fi,{value:e.value,mealType:t.recipe.mealType,meal:t.recipe.label,ingredients:t.recipe.ingredients,url:t.recipe.url,totalNutrients:t.recipe.totalNutrients,totalDaily:t.recipe.totalDaily,yield:t.recipe.yield,onChange:e.onChange,saved:!1}),Object(u.jsx)(sn,{value:e.value,mealType:t.recipe.mealType,meal:t.recipe.label,ingredients:t.recipe.ingredients,url:t.recipe.url,totalNutrients:t.recipe.totalNutrients,totalDaily:t.recipe.totalDaily,yield:t.recipe.yield})]})]}),t.recipe.ingredients&&t.recipe.ingredients.map(((e,t)=>Object(u.jsxs)(ve.a,{className:"list",children:[Object(u.jsx)(ot.a,{children:Object(u.jsx)(xr.a,{fontSize:"1rem"})}),e.text]},t))),Object(u.jsx)("a",{href:t.recipe.url,children:t.recipe.url})]})})]})},a)))})}function rn(e){let{setCuisineType:t}=e;const[a,c]=Object(s.useState)("Any");Object(s.useEffect)((()=>{t("Any"===a?"":`${a}`)}),[a]);return Object(u.jsx)(rt,{id:"meal-type",styling:"green dropdown-input",data:a,items:["Any","American","Asian","British","Caribbean","Central Europe","Chinese","Eastern Europe","French","Indian","Italian","Japanese","Kosher","Mediterranean","Mexican","Middle Eastern","Nordic","South American","South East Asian"],function:e=>c(e)})}function nn(e){let{setRequirements:t}=e;const[a,c]=Object(s.useState)("Any");return Object(s.useEffect)((()=>{(()=>{switch(a){default:case"Any":t("");break;case"Alcohol Free":t("alcohol-free");break;case"Crustacean Free":t("crustacean-free");break;case"Dairy Free":t("dairy-free");break;case"Gluten Free":t("gluten-free");break;case"Keto Friendly":t("keto-friendly");break;case"Kosher":t("kosher");break;case"Nut Free":t("nut-free");break;case"Pescatarian":t("pescatarian");break;case"Vegan":t("vegan");break;case"Vegetarian":t("vegetarian")}})()}),[a]),Object(u.jsx)(rt,{id:"requirements",styling:"green dropdown-input",data:a,items:["Any","Alcohol Free","Crustacean Free","Dairy Free","Gluten Free","Keto Friendly","Kosher","Nut Free","Pescatarian","Vegan","Vegetarian"],function:e=>c(e)})}var on=a.p+"static/media/Edamam_Badge_White.d317b3d5.svg";function ln(e){let{show:t,setShow:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"btn success edamam shadow-none",onClick:()=>a(!0),children:"Info"}),Object(u.jsx)(oe.a,{show:t,onHide:()=>{a(!1)},size:"sm","aria-labelledby":"info",centered:!0,children:Object(u.jsx)("a",{href:"https://www.edamam.com/",children:Object(u.jsx)("img",{src:on,alt:"powered by edamam"})})})]})}function dn(e){let{links:t,pageNumber:a,changePage:s}=e;return Object(u.jsxs)(d.a,{children:[t.back?Object(u.jsx)(X,{onClick:()=>console.log(t.back.href),text:"Back",styling:"green"}):null,t.next?Object(u.jsxs)("div",{children:[Object(u.jsx)(De.a,{className:"justify-content-md-center",children:Object(u.jsxs)("p",{children:["Page: ",a+1]})}),Object(u.jsxs)(De.a,{children:[0!=a&&Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{onClick:()=>s(-1),text:"Previous Page",styling:"green"})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{onClick:()=>s(1),text:"Next Page",styling:"green"})})]})]}):null]})}function un(e){const[t,a]=Object(s.useState)(!1),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(""),[d,b]=Object(s.useState)(""),[m,p]=Object(s.useState)(""),[g,O]=Object(s.useState)({}),[x,f]=Object(s.useState)(""),[y,v]=Object(s.useState)(""),[w,S]=Object(s.useState)([]),[C,k]=Object(s.useState)(0);function N(e){w.includes(e)?console.log("Page already in array!"):S((t=>[...t,e]))}return Object(s.useEffect)((()=>{Xr(r,o,d,m,O,f,N)}),[r,o,d]),Object(s.useEffect)((()=>{y&&en(y,f,O)}),[y]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"basic-title-left",children:"Search Recipes"}),Object(u.jsx)(ln,{show:t,setShow:a}),Object(u.jsxs)(j.a,{onSubmit:e=>{e.preventDefault(),n(c)},children:[Object(u.jsx)(j.a.Group,{children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{className:"shadow-none",type:"text",placeholder:"Enter meal name",id:"query",defaultValue:r,onChange:e=>{i(e.target.value)}}),Object(u.jsx)(h.a,{type:"submit",className:"green-btn shadow-none",children:"Search"})]})}),Object(u.jsxs)(hr.a,{sx:{flexGrow:1},children:[Object(u.jsxs)(mr.a,{container:!0,spacing:2,children:[Object(u.jsxs)(mr.a,{item:!0,xs:12,md:6,children:[Object(u.jsx)("p",{children:"Meal Type:"}),Object(u.jsx)("div",{children:Object(u.jsx)(Gc,{setMealType:l})})]}),Object(u.jsxs)(mr.a,{item:!0,xs:12,md:6,children:[Object(u.jsx)("p",{children:"Origin:"}),Object(u.jsx)("div",{children:Object(u.jsx)(rn,{setCuisineType:b})})]})]}),Object(u.jsxs)(mr.a,{container:!0,spacing:2,children:[Object(u.jsxs)(mr.a,{item:!0,xs:12,md:6,children:[Object(u.jsx)("p",{children:"Requirements:"}),Object(u.jsx)("div",{children:Object(u.jsx)(nn,{setRequirements:p})})]}),Object(u.jsx)(mr.a,{item:!0,xs:12,md:6})]})]})]}),Object(u.jsx)(cn,{recipes:g,query:r,value:e.value,onChange:e.onChange}),x?Object(u.jsx)(dn,{links:x,pageNumber:C,changePage:function(e){e>0?(k((t=>t+e)),v(x.next.href),N(x.next.href)):e<0&&(k((e=>0===e?0:e-1)),0!=C&&v(w[C]))}}):null]})}const bn=e=>{let{tab:t,update:a,forceUpdate:c}=e;const[i,r]=Object(s.useState)(tc()());return Object(u.jsxs)("div",{className:"calendar",children:[Object(u.jsx)(Ji,{value:i,setValue:r}),Object(u.jsx)(br,{value:i})]})};var jn=Object(m.b)((e=>({profile:e.firebase.profile})),(e=>({addToInventory:t=>e(pe(t))})))((e=>{const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(0),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(!1),[d,b]=Object(s.useState)("+ scan from barcode"),[m,p]=Object(s.useState)(!0),[g,O]=Object(s.useState)(new Date),[x,f]=Object(s.useState)({food:"",quantity:0,measure:"g",foodId:""}),[y,v]=Object(s.useState)(0),w=()=>{const t={upload:{ingredients:x.food+" "+x.quantity+x.measure,item:x.food,measure:x.measure,quantity:x.quantity,expiry:tc()(g).format("DD/MM/yyyy")}};console.log("lets do this:",t),e.addToInventory(t),v(y+1)};return Object(s.useEffect)((()=>{console.log("item",x.food)}),[x.food]),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>(l(!o),void b(o?"+ scan from barcode":"- input manually")),children:d}),o?Object(u.jsx)(Ui,{handleFormClose:()=>{p(!1)}}):Object(u.jsxs)(j.a,{onSubmit:t=>{t.preventDefault(),w(),e.setUpdate(e.update+1),e.handleFormClose()},children:[Object(u.jsx)(Hc,{handleFoodSearch:e=>{e.target.textContent?f({...x,food:e.target.textContent}):f({...x,food:e.target.value})}}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Amount"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",onChange:e=>(e=>{e.target.textContent?f({...x,[e.target.id]:e.target.textContent}):f({...x,[e.target.id]:e.target.value})})(e),value:x.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:x.measure,items:["g","kg","/","mL","L","/","tsp","tbsp","cups","units","pcs","oz","lbs"],function:e=>{f({...x,measure:e})}})]})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Expiry Date"}),Object(u.jsx)(Hi.a,{selected:g,onChange:e=>O(e),dateFormat:"dd/mm/yyyy"})]}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none mt-3",type:"submit",children:"Done"})})]})]})}));const hn=e=>{let{show:t,setShow:a,update:s,setUpdate:c}=e;const i=()=>a(!1);return Object(u.jsxs)("div",{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>a(!0)})})}),Object(u.jsxs)(oe.a,{show:t,onHide:i,size:"lg","aria-labelledby":"add item",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-item",className:"basic-title-left basic-lg",children:"Add new item to inventory"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(jn,{handleFormClose:i,update:s,setUpdate:c})})]})]})};var mn=a(249),pn=a.n(mn);var gn=Object(m.b)((e=>({data:e.data.getData})),(e=>({removeFromInventory:t=>e(Oe(t))})))((function(e){return Object(n.g)(),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Remove",children:Object(u.jsx)(ie.a,{"aria-label":"Remove",sx:{ml:2},onClick:()=>(t=>{const a={id:t};e.removeFromInventory(a),e.setUpdate(e.update+1)})(e.id),children:Object(u.jsx)(pn.a,{})})})})}));a(522);var On=Object(m.b)((e=>({data:e.data.getData,shoppingList:e.mealPlanner.allItems})))((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q.a,{title:"Refresh",children:Object(u.jsx)(ie.a,{"aria-label":"Refresh",sx:{ml:2},onClick:()=>{e.setUpdate(e.update+1)},children:Object(u.jsx)(Ai.a,{style:{fontSize:35}})})})})}));const xn=e=>"Edible"===e.upload.edibleInedible?e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType&&""!==e.upload.expiryDate&&"Select Currency"!==e.upload.currency?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"}):e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});var fn=Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createFoodWasteData:t=>e(xt(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.profile.type&&(String(e.profile.type).includes("household")||String(e.profile.type).includes("user")||console.log(e.profile.type))}),[e.profile]);const c={edibleInedible:"edible",foodWasteWeight:e.item.updatedQty,weightType:"Select Unit",carbsContent:0,carbsPerUnit:"Select Unit",proteinContent:0,proteinPerUnit:"Select Unit",fatContent:0,fatPerUnit:"Select Unit",ghg:0,expiryDate:"",foodWasteCost:0,currency:"Select Currency",food:e.item.item},i={weightMultiplier:0,currencyMultiplier:0,carbsMultiplier:0,proteinMultiplier:0,fatMultiplier:0},[r,o]=Object(s.useState)({...c}),[l,b]=Object(s.useState)({...i});Object(s.useEffect)((()=>{p()}),[r.edibleInedible,r.foodWasteWeight,r.weightType,r.currency,r.carbsContent,r.carbsPerUnit,r.proteinContent,r.proteinPerUnit,r.fatContent,r.fatPerUnit]);const h=e=>{e.target.textContent?o({...r,[e.target.id]:e.target.textContent}):o({...r,[e.target.id]:e.target.value})},m=e=>{let t,a=e.target.id.toString().split(/PerUnit|Type/)[0]+"Multiplier";switch(e.target.textContent){case"kg":case"l":case"GBP (\xa3)":default:t=1;break;case"g":case"ml":case"1l":case"1kg":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454;break;case"100g":case"100ml":t=.01;break;case"500g":case"500ml":t=.002;break;case"USD ($)":t=1.404;break;case"EUR (\u20ac)":t=1.161}b({...l,[a]:t})},p=()=>{var e=Number(r.foodWasteWeight*l.weightMultiplier*2.5);o({...r,ghg:e,foodWasteCost:(.85*Number(r.foodWasteWeight)*l.weightMultiplier*l.currencyMultiplier).toFixed(2)})};return e.auth.uid?t?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Weight / Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWasteWeight",onChange:e=>{h(e)},value:r.foodWasteWeight}),Object(u.jsx)(rt,{id:"weightType",styling:"grey dropdown-input-right",data:r.weightType,function:(e,t)=>{m(t),h(t)},items:["kg","g","/","oz","lbs","/","l","ml"]})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Cost"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"foodWasteCost",value:r.foodWasteCost,readOnly:!0}),Object(u.jsx)(rt,{id:"currency",styling:"grey dropdown-input-right",data:r.currency,function:(e,t)=>{m(t),h(t)},items:["GBP (\xa3)","USD ($)","EUR (\u20ac)"]})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"GHG"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"ghg",value:r.ghg,title:r.ghg,readOnly:!0}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})]}),Object(u.jsx)(xn,{upload:r,handleFoodWasteSubmit:()=>{var t;switch(r.weightType){default:case"kg":case"l":t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454}const a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:r.foodWasteWeight*t}};var s,n;switch(e.profile.type){case"business_admin":n="business_users",s=e.auth.uid;break;case"business_sub":n="business_users",s=e.profile.admin;break;case"academic_admin":n="academic_users",s=e.auth.uid;break;case"academic_sub":n="academic_users",s=e.profile.admin;break;case"farm_admin":n="farm_users",s=e.auth.uid;break;case"farm_sub":n="farm_users",s=e.profile.admin;break;case"household_admin":n="household_users",s=e.auth.uid;break;case"household_sub":n="household_users",s=e.profile.admin;break;default:n="data",s=e.auth.uid}const l={uid:s,masterCollection:n,collection:"writtenFoodWasteData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),...r}};e.createFoodWasteData(l),e.createMapData(a),he("Success","Food Waste successfully uploaded!"),o(c),b(i)}})]})}):Object(u.jsx)(n.a,{to:"/login"})}));var yn=Object(m.b)((e=>({data:e.data.getData})),(e=>({removeFromInventory:t=>e(Oe(t)),addToWasteItems:t=>e((e=>(t,a,s)=>{let{getFirestore:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().collection("marketplace").doc(n).collection("wasteItems").add(e.upload).then((a=>{c().collection("marketplace").doc(n).collection("wasteItems").doc(a.id).set({id:a.id},{merge:!0}),t({type:"CREATE_WASTE_ITEM",data:e})})).catch((e=>{t({type:"CREATE_WASTE_ITEM_ERROR",err:e})}))})(t))})))((function(e){const[t,a]=Object(s.useState)(!1),c=(Object(n.g)(),()=>a(!1));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Remove",children:Object(u.jsx)(ie.a,{"aria-label":"Remove",sx:{ml:2},children:Object(u.jsx)(Tc.a,{variant:"outlined",color:"success",onClick:()=>a(!0),children:"Add To Food Waste"})})}),Object(u.jsxs)(oe.a,{show:t,onHide:c,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Add To Food Waste"})}),Object(u.jsxs)(oe.a.Body,{children:[Object(u.jsx)("p",{children:Object(u.jsxs)("h5",{children:["Remove ",e.item.quantity," ",e.item.measure," of ",e.item.item," from the inventory?"]})}),Object(u.jsx)(ti.a,{variant:"primary",children:"Cannot find the measurement unit? select another unit, measure and update"}),Object(u.jsx)(fn,{item:e.item})]}),Object(u.jsx)(oe.a.Footer,{children:Object(u.jsx)(Tc.a,{variant:"secondary",onClick:()=>{(t=>{const a={id:t};e.removeFromInventory(a),e.setUpdate(e.update+1)})(e.id),c()},children:"Done"})})]})]})}));const vn=e=>"Edible"===e.upload.edibleInedible?e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType&&""!==e.upload.expiryDate&&"Select Currency"!==e.upload.currency?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"}):e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});var wn=Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createGiftFoodData:t=>e(ft(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.profile.type&&(String(e.profile.type).includes("household")||String(e.profile.type).includes("user")||console.log(e.profile.type))}),[e.profile]);const c={edibleInedible:"edible",foodWasteWeight:e.item.updatedQty,weightType:"Select Unit",carbsContent:0,carbsPerUnit:"Select Unit",proteinContent:0,proteinPerUnit:"Select Unit",fatContent:0,fatPerUnit:"Select Unit",ghg:0,expiryDate:"",foodWasteCost:0,currency:"Select Currency",food:e.item.item},i={weightMultiplier:0,currencyMultiplier:0,carbsMultiplier:0,proteinMultiplier:0,fatMultiplier:0},[r,o]=Object(s.useState)({...c}),[l,b]=Object(s.useState)({...i});Object(s.useEffect)((()=>{p()}),[r.edibleInedible,r.foodWasteWeight,r.weightType,r.currency,r.carbsContent,r.carbsPerUnit,r.proteinContent,r.proteinPerUnit,r.fatContent,r.fatPerUnit]);const h=e=>{e.target.textContent?o({...r,[e.target.id]:e.target.textContent}):o({...r,[e.target.id]:e.target.value})},m=e=>{let t,a=e.target.id.toString().split(/PerUnit|Type/)[0]+"Multiplier";switch(e.target.textContent){case"kg":case"l":case"GBP (\xa3)":default:t=1;break;case"g":case"ml":case"1l":case"1kg":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454;break;case"100g":case"100ml":t=.01;break;case"500g":case"500ml":t=.002;break;case"USD ($)":t=1.404;break;case"EUR (\u20ac)":t=1.161}b({...l,[a]:t})},p=()=>{var e=Number(r.foodWasteWeight*l.weightMultiplier*2.5);o({...r,ghg:e,foodWasteCost:(.85*Number(r.foodWasteWeight)*l.weightMultiplier*l.currencyMultiplier).toFixed(2)})};return e.auth.uid?t?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Weight / Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWasteWeight",onChange:e=>{h(e)},value:r.foodWasteWeight}),Object(u.jsx)(rt,{id:"weightType",styling:"grey dropdown-input-right",data:r.weightType,function:(e,t)=>{m(t),h(t)},items:["kg","g","/","oz","lbs","/","l","ml"]})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Cost"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"foodWasteCost",value:r.foodWasteCost,readOnly:!0}),Object(u.jsx)(rt,{id:"currency",styling:"grey dropdown-input-right",data:r.currency,function:(e,t)=>{m(t),h(t)},items:["GBP (\xa3)","USD ($)","EUR (\u20ac)"]})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"GHG"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"ghg",value:r.ghg,title:r.ghg,readOnly:!0}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})]}),Object(u.jsx)(vn,{upload:r,handleFoodWasteSubmit:()=>{var t;switch(r.weightType){default:case"kg":case"l":t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454}const a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:r.foodWasteWeight*t}};var s,n;switch(e.profile.type){case"business_admin":n="business_users",s=e.auth.uid;break;case"business_sub":n="business_users",s=e.profile.admin;break;case"academic_admin":n="academic_users",s=e.auth.uid;break;case"academic_sub":n="academic_users",s=e.profile.admin;break;case"farm_admin":n="farm_users",s=e.auth.uid;break;case"farm_sub":n="farm_users",s=e.profile.admin;break;case"household_admin":n="household_users",s=e.auth.uid;break;case"household_sub":n="household_users",s=e.profile.admin;break;default:n="data",s=e.auth.uid}const l={uid:s,masterCollection:n,collection:"writtenGiftFoodData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),...r}};e.createGiftFoodData(l),e.createMapData(a),he("Success","Food had been added to your gifted items!"),o(c),b(i)}})]})}):Object(u.jsx)(n.a,{to:"/login"})}));var Sn=Object(m.b)((e=>({data:e.data.getData})),(e=>({removeFromInventory:t=>e(Oe(t))})))((function(e){const[t,a]=Object(s.useState)(!1),c=(Object(n.g)(),()=>a(!1));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Remove",children:Object(u.jsx)(ie.a,{"aria-label":"Remove",sx:{ml:2},children:Object(u.jsx)(Tc.a,{variant:"outlined",color:"success",onClick:()=>a(!0),children:"Gift Food"})})}),Object(u.jsxs)(oe.a,{show:t,onHide:c,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Gifted Item?"})}),Object(u.jsxs)(oe.a.Body,{children:[Object(u.jsx)("p",{children:Object(u.jsxs)("h5",{children:["Remove ",e.item.quantity," ",e.item.measure," of ",e.item.item," from the inventory?"]})}),Object(u.jsx)(ti.a,{variant:"primary",children:"Cannot find the measurement unit? select another unit, measure and update"}),Object(u.jsx)(wn,{item:e.item})]}),Object(u.jsx)(oe.a.Footer,{children:Object(u.jsx)(Tc.a,{variant:"secondary",onClick:()=>{(t=>{const a={id:t};e.removeFromInventory(a),e.setUpdate(e.update+1)})(e.id),c()},children:"Done"})})]})]})}));Object(m.b)((e=>({data:e.data.getData})),(e=>({removeFromInventory:t=>e(Oe(t)),addToPurchaseItems:t=>e(ge(t))})))((function(e){const[t,a]=Object(s.useState)(!1),c=(Object(n.g)(),()=>a(!1));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Remove",children:Object(u.jsx)(ie.a,{"aria-label":"Remove",sx:{ml:2},children:Object(u.jsx)(Tc.a,{variant:"outlined",color:"success",onClick:()=>a(!0),children:"Purchase Item"})})}),Object(u.jsxs)(oe.a,{show:t,onHide:c,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{children:"Purchase Item?"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)("p",{children:Object(u.jsxs)("h5",{children:["Hello ",e.profile.firstName,", Do you want to request for ",e.item.quantity," ",e.item.measure," of ",e.item.item," to be delivered to you?"]})})}),Object(u.jsxs)(oe.a.Footer,{children:[Object(u.jsx)(Tc.a,{variant:"secondary",onClick:()=>{(()=>{const t=e.item,a={upload:{id:t.id,food:t.food,item:t.item,measure:t.measure,quantity:t.quantity,profile:e.profile,status:"pending"}};e.addToPurchaseItems(a),he("Order Successful","You will be contected shortly..")})(),c()},children:"Order"}),Object(u.jsx)(Tc.a,{variant:"secondary",onClick:c,children:"Cancel"})]})]})]})}));var Cn=Object(m.b)((e=>({data:e.data.getData})),(e=>({editInventoryData:t=>e((e=>(t,a,s)=>{let{getFirebase:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("inventory").doc(e.id).set(e.upload,{merge:!0}).then((()=>t({type:"EDIT_PLAN",data:e}))).catch((e=>{t({type:"EDIT_PLAN_ERROR",err:e})}))})(t)),editSavedMeal:t=>e(os(t))})))((function(e){const[t,a]=Object(s.useState)(e.food),[c,i]=Object(s.useState)(e.quantity),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)("Select Unit"),[d,b]=Object(s.useState)(e.measure),[m,p]=Object(s.useState)(""),[g,O]=Object(s.useState)(""),[x,f]=Object(s.useState)("Choose Storage");return Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={id:e.id,upload:{food:t,quantity:c,updatedQty:r,measure:d,updatedMeasure:o,id:e.id,expiry:tc()(m).format("DD/MM/yyyy"),purchase:g,storage:x}};e.saved?(e.editSavedMeal(a),e.forceUpdate()):(e.editInventoryData(a),e.setUpdate(e.update+1))})(),e.handleFormClose()},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Ingredient"}),Object(u.jsx)(j.a.Control,{type:"text",id:"food",defaultValue:t,onChange:e=>{a(e.target.value)}})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Weight/volume - Meal plan"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",defaultValue:c,onChange:e=>i(e.target.value)}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:d,items:["g","kg","/","mL","L","/","tsp","tbsp","cups","units"],function:e=>{b(e)}})]})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Weight/Volume - Purchased food item "}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",defaultValue:r,onChange:e=>n(e.target.value)}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:o,items:["g","kg","/","mL","L","/","tsp","tbsp","cups","units"],function:e=>{l(e)}})]})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Expiry Date"}),Object(u.jsx)(Hi.a,{type:"text",id:"expiry",selected:m,onChange:e=>p(e),dateFormat:"dd/mm/yyyy"})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Place of Purchase"}),Object(u.jsx)(j.a.Control,{type:"text",id:"food",defaultValue:g,onChange:e=>{O(e.target.value)}})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(rt,{id:"storage",styling:"grey dropdown-input",data:x,items:["Cool dry place","Air-tight container","Fridge","Freezer","Others"],function:e=>{f(e)}})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn",type:"submit",children:"Done"})})]})}));function kn(e){let{food:t,quantity:a,measure:s,expiry:c,id:i,show:r,setShow:n,value:o,update:l,setUpdate:d,saved:b}=e;const j=()=>n(!1);return Object(u.jsxs)(oe.a,{show:r,onHide:j,size:"lg","aria-labelledby":"edit meal",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-meal",children:"Edit Item"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(Cn,{food:t,measure:s,quantity:a,expiry:c,id:i,update:l,setUpdate:d,value:o,handleFormClose:j,saved:b})})]})}var Nn=function(e){const[t,a]=Object(s.useState)(!1);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q.a,{title:"Edit",children:Object(u.jsx)(ie.a,{className:"edit","aria-label":"Edit",sx:{ml:2},onClick:()=>{a(!0)},children:Object(u.jsx)(is.a,{fontSize:"inherit"})})}),Object(u.jsx)(kn,{show:t,setShow:a,food:e.food,measure:e.measure,quantity:e.quantity,expiry:e.expiry,id:e.id,update:e.update,setUpdate:e.setUpdate})]})};var En=Object(m.b)((e=>({data:e.mealPlan.inventory,profile:e.firebase.profile})),(e=>({getInventory:t=>e(((e,t,a)=>{let{getFirestore:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().collection("marketplace").doc(r).collection("inventory").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_INVENTORY",payload:a})})).catch((t=>{e({type:"GET_INVENTORY_ERROR",err:t})}))}))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)("DD-MM-YYYY");var r=tc()(new Date).format("dd/mm/yyyy");const[n,o]=Object(s.useState)(0),l=()=>{o(n+1)};return Object(s.useEffect)((()=>{e.getInventory()}),[e.value,e.update]),Object(s.useEffect)((()=>{(async()=>{a([]),e.data.forEach((e=>{var t=e.id,s=e.ingredients,c=e.item,i=e.measure,r=e.updatedMeasure,n=e.quantity,o=e.updatedQty,l=e.expiry,d=e.purchase,u=e.storage,b=(new tc.a).to(tc()(l,"DD-MM-YYYY").format("ll"));a((e=>[...e,{food:s+" "+n+" "+i,item:c,quantity:n,updatedQty:o,measure:i,updatedMeasure:r,purchase:d,storage:u,expiry:tc()(l,"DD-MM-YYYY").format("ll"),id:t,daysUntil:b}]))})),a((e=>{let t=[...e];return t.sort(((e,t)=>e.item<t.item?-1:e.item>t.item?1:0)),t}))})(),l()}),[e.data]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(On,{update:e.update,setUpdate:e.setUpdate}),t.length?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(ye.a,{children:t.map(((t,a)=>Object(u.jsxs)(ve.a,{className:"list",style:{alignItems:"flex-end"},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:t.item+" "+t.quantity+" "+t.measure}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Weight/Vol: "}),t.updatedQty," ",t.updatedMeasure]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Expiry Date: "}),t.expiry]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Item expires: "}),t.daysUntil]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Place of purchase: "}),t.purchase]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Storage:"}),t.storage]}),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(yn,{id:t.id,value:e.value,update:e.update,setUpdate:e.setUpdate,item:t}),Object(u.jsx)(Sn,{id:t.id,value:e.value,update:e.update,setUpdate:e.setUpdate,item:t})]}),r==tc()(t.expiry).subtract(7,"d").format("dd/mm/yyyy")?function(t){qe.a.send("service_33mgmp6","template_o8lxppf",{from_name:"intellidigest",to_name:e.profile.firstName,message:t+" is about to expire!! please use it before the expiry date",reply_to:e.profile.email,to_email:e.profile.email},"pG3M3Ncz-i7qCJ2GD")}(t.food):Object(u.jsx)("div",{})]}),Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(Nn,{food:t.item,measure:t.measure,quantity:t.quantity,updatedQty:t.updatedQty,updatedMeasure:t.updatedMeasure,expiry:t.expiry,id:t.id,update:e.update,setUpdate:e.setUpdate}),Object(u.jsx)(gn,{id:t.id,value:e.value,update:e.update,setUpdate:e.setUpdate})]})]},`item${a}`)))})}):Object(u.jsx)("div",{className:"empty basic-title-left",children:Object(u.jsx)("p",{children:"There are no items in the list :( "})})]})}));const Tn=e=>{let{forceUpdate:t,value:a,tab:c}=e;const[i,r]=Object(s.useState)(0),[n,o]=Object(s.useState)(!1);return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-8",style:{textAlign:"left"},children:[Object(u.jsx)("p",{children:"Add new items to your inventory \ud83d\ude42"}),Object(u.jsx)("p",{children:Object(u.jsx)(ti.a,{variant:"primary",children:"Please, add the weight/volume  of each food item using the unit of measurement in the meal plan and and the food item purchased."})})]}),Object(u.jsx)("div",{className:"col-4",style:{textAlign:"right"},children:Object(u.jsx)(hn,{show:n,setShow:o,update:i,setUpdate:r})})]}),Object(u.jsx)("div",{children:Object(u.jsx)(En,{value:a,tab:c,update:i,setUpdate:r})})]})};function _n(){const[e,t]=Object(s.useState)(!0),[a,c]=Object(s.useState)([]);Object(s.useEffect)((()=>{setTimeout((()=>t(!1)),1500)}));const[i,r]=Object(s.useState)(tc()());return e?Object(u.jsx)(Vt,{}):Object(u.jsx)(ke,{goTo:"/account",header:"My Plan to Save",children:Object(u.jsxs)(Wc.a,{defaultActiveKey:"calendar",id:"meal-plan-tabs",className:"mb-3 mealtabs basic-title",fill:!0,children:[Object(u.jsx)(Lc.a,{eventKey:"calendar",title:"MEAL DIARY",className:"mealtab",children:Object(u.jsx)(Li,{value:i,onChange:r})}),Object(u.jsxs)(Lc.a,{eventKey:"recipes",title:"RECIPES",className:"mealtab",children:[Object(u.jsx)(Zr,{value:i,onChange:r}),Object(u.jsx)(un,{value:i,onChange:r})]}),Object(u.jsx)(Lc.a,{eventKey:"shopscan",title:"SHOPPING LIST",className:"mealtab",children:Object(u.jsx)(jr,{value:i,onChange:r,getItems:a})}),Object(u.jsx)(Lc.a,{eventKey:"inventory",title:"INVENTORY",className:"mealtab",children:Object(u.jsx)(Tn,{value:i})}),Object(u.jsx)(Lc.a,{eventKey:"mealplanner",title:"MEAL PLANNER",className:"mealtab",children:Object(u.jsx)(Ur,{value:i,onChange:r})}),Object(u.jsx)(Lc.a,{eventKey:"plan",title:"VIEW PLAN",className:"mealtab",children:Object(u.jsx)(Kr,{value:i,getItems:a,setGetItems:c})})]})})}function Dn(e){let{value:t,setValue:a}=e;return Object(u.jsxs)("div",{className:"header",style:{display:"flex",justifyContent:"center"},children:[Object(u.jsx)("div",{className:"header previous",onClick:()=>a(t.clone().subtract(1,"days")),style:{marginRight:"auto",paddingLeft:"10px"},children:String.fromCharCode(171)}),Object(u.jsxs)("div",{className:"header",children:["Nutritional Information for ",t.format("DD MMMM")]}),Object(u.jsx)("div",{className:"header next",onClick:()=>a(t.clone().add(1,"days")),style:{marginLeft:"auto",paddingRight:"10px"},children:String.fromCharCode(187)})]})}var Fn=Object(m.b)((e=>({mealPlan:e.mealPlan.meals})),(e=>({getMealData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;const i=t().firebase.profile,r=t().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}c().firestore().collection("marketplace").doc(n).collection("mealPlanData").doc(a.month).collection(a.day).get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_MEALS",payload:a})})).catch((t=>{e({type:"GET_MEALS_ERROR",err:t})}))}));var a}})))((e=>{const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(!1);Object(s.useEffect)((()=>{const t={month:e.value.format("YYYYMM"),day:e.value.format("DD")};e.getMealData(t)}),[e.value]);Object(s.useEffect)((()=>{(async()=>{a([]),e.mealPlan.forEach((e=>{var t=e.meal,s=e.ingredients,c=e.id,i=e.mealType,r=e.url,n=e.totalNutrients,o=e.totalDaily,l=e.recipeYield,d=e.eaten;let u;u=!!e.nonNativeData&&e.nonNativeData,a((e=>[...e,{meal:t,mealType:i,ingredients:s,id:c,nn:u,url:r,totalNutrients:n,totalDaily:o,recipeYield:l,eaten:d}]))}))})()}),[e.mealPlan]);const[r,n]=Object(s.useState)([]),[o,l]=Object(s.useState)([]);Object(s.useEffect)((()=>{n([]),n((e=>{let a=[...e];return t.forEach((e=>{console.log("element.eaten",e.eaten),e.totalNutrients&&e.eaten&&Object.keys(e.totalNutrients).forEach((t=>{let s=a.find((a=>a.label===e.totalNutrients[t].label));if(s)console.log("Table nutrient found"),s.quantity+=e.totalNutrients[t].quantity/e.recipeYield;else{let s=e.totalNutrients[t];s.quantity/=e.recipeYield,a.push(s)}}))})),a.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0)),a})),l([]),l((e=>{let a=[...e];return t.forEach((e=>{e.eaten&&i(!0),e.totalNutrients&&Object.keys(e.totalDaily).forEach((t=>{let s=a.find((a=>a.label===e.totalDaily[t].label));if(s)s.quantity+=e.totalDaily[t].quantity/e.recipeYield;else{let s=e.totalDaily[t];s.quantity/=e.recipeYield,a.push(s)}}))})),a}))}),[t]);return console.log("fuck around => ",t),Object(u.jsx)("div",{children:Object(u.jsxs)(Ja.a,{defaultActiveKey:"0",children:[Object(u.jsx)(Dn,{value:e.value,setValue:e.setValue}),Object(u.jsxs)(Ie.a,{children:[Object(u.jsx)(Ie.a.Header,{}),Object(u.jsx)(Ja.a.Collapse,{eventKey:"0",children:Object(u.jsx)(Ie.a.Body,{children:t.length&&c?Object(u.jsxs)(le.a,{striped:!0,bordered:!0,hover:!0,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Nutrient"}),Object(u.jsx)("th",{children:"Quantity Consumed"}),Object(u.jsx)("th",{children:"Reference Daily Intake (RDI)"})]})}),Object(u.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((e=>{var t,a;return Object(u.jsxs)("tr",{style:{backgroundColor:(a=null===(t=o.find((t=>t.label===e.label)))||void 0===t?void 0:t.quantity.toFixed(1),a<=10?"tomato":a>=50?"#b3b785":null)},children:[Object(u.jsx)("td",{children:e.label}),Object(u.jsxs)("td",{children:[e.quantity.toFixed(1)," ",e.unit]}),Object(u.jsx)("td",{children:o.find((t=>t.label===e.label))?`${o.find((t=>t.label===e.label)).quantity.toFixed(1)} %`:"-"})]})}))})]}):Object(u.jsx)("div",{className:"empty basic-title-left",children:Object(u.jsx)("p",{children:"Nutritional information will be shown once a meal is added to your plan and is marked as eaten."})})})})]})]})})}));function Rn(){const[e,t]=Object(s.useState)(!0);Object(s.useEffect)((()=>{setTimeout((()=>t(!1)),1500)}));const[a,c]=Object(s.useState)(tc()());return e?Object(u.jsx)(Vt,{}):Object(u.jsx)(ke,{goTo:"/account",header:"Nutrient Gap",children:Object(u.jsx)(Fn,{value:a,setValue:c})})}a(885);var Pn=a.p+"static/media/peppers-square.92ac872c.jpg";function In(e){return Object(u.jsxs)(Ie.a,{className:"product",children:[Object(u.jsx)("img",{src:Pn,alt:"product",className:"product-image"}),Object(u.jsx)("div",{className:"product-information",children:e.children})]},e.key)}var Mn=Object(m.b)((e=>({auth:e.firebase.auth,data:e.data.getData})),(e=>({getFirestoreData:t=>e(vt(t))})))((function(e){const[t,a]=Object(s.useState)([]);return Object(s.useEffect)((()=>{e.data.length<=0&&function(){var t={masterCollection:"marketplace",collection:"products",uid:e.auth.uid};e.getFirestoreData(t)}()}),[]),Object(s.useEffect)((()=>{(async()=>{e.data.forEach((e=>{var t=e.id,s=e.food,c=e.category,i=e.weight[0],r=e.weight[1],n=e.producedLocally,o=e.price[0],l=e.price[1],d=e.expires,u=e.comment;a((e=>[...e,{id:t,food:s,category:c,weight:i,unit:r,producedLocally:n,price:o,currency:l,expires:d,comment:u}]))}))})()}),[e.data]),Object(u.jsx)(ke,{goTo:"/account",header:"Sell Products",subtitle:"My Products",children:t.map((e=>Object(u.jsxs)(In,{styling:"product",children:[Object(u.jsxs)("h1",{children:[e.food,": ",e.weight,e.unit]}),Object(u.jsx)("h6",{children:e.category}),Object(u.jsxs)("p",{children:[" expiry date: ",e.expires]}),Object(u.jsxs)("h2",{children:[e.currency,e.price]}),Object(u.jsx)("p",{children:e.comment})]},e.id)))})}));const An=e=>"Edible"===e.upload.edibleInedible?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Expiry Date"}),Object(u.jsx)(j.a.Control,{id:"expiryDate",placeholder:"DD/MM/YYYY",onChange:t=>{e.updateStateValue(t)},value:e.upload.expiryDate})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Cost"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"foodWasteCost",value:e.upload.foodWasteCost,readOnly:!0}),Object(u.jsx)(rt,{id:"currency",styling:"grey dropdown-input-right",data:e.upload.currency,function:(t,a)=>{e.changeMultiplier(a),e.updateStateValue(a)},items:["GBP (\xa3)","USD ($)","EUR (\u20ac)"]})]})]})]}):null,Wn=e=>"Edible"===e.upload.edibleInedible?""!==e.upload.projectName&&""!==e.upload.foodName&&e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType&&""!==e.upload.expiryDate&&"Select Currency"!==e.upload.currency?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"}):""!==e.upload.projectName&&""!==e.upload.foodName&&e.upload.foodWasteWeight>0&&"Select Unit"!==e.upload.weightType?Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(ce.a,{}),Object(u.jsx)(Z,{text:"Update",styling:"green",onClick:t=>{e.handleFoodWasteSubmit()}})]}):Object(u.jsx)(Z,{text:"Update",styling:"green",disabled:"true"});var Ln=Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({createFoodWasteData:t=>e(xt(t)),createMapData:t=>e(yt(t))})))((e=>{const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{e.profile.type&&(String(e.profile.type).includes("academic")||a(!0))}),[e.profile]);const c={edibleInedible:"Edible",projectName:"",foodName:"",foodWasteWeight:0,weightType:"Select Unit",expiryDate:"",ghg:0,foodWasteCost:0,currency:"Select Currency",notes:""},i={weightMultiplier:0,currencyMultiplier:0},[r,o]=Object(s.useState)(c),[l,b]=Object(s.useState)(i),h=Object(s.useRef)(null);Object(s.useEffect)((()=>{g()}),[r.edibleInedible,r.foodWasteWeight,r.weightType,r.currency]);const m=e=>{e.target.textContent?o({...r,[e.target.id]:e.target.textContent}):o({...r,[e.target.id]:e.target.value})},p=e=>{let t,a=e.target.id.toString().split(/PerUnit|Type/)[0]+"Multiplier";switch(e.target.textContent){case"kg":case"l":case"GBP (\xa3)":default:t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454;break;case"USD ($)":t=1.404;break;case"EUR (\u20ac)":t=1.161}b({...l,[a]:t})},g=()=>{o({...r,ghg:Number(r.foodWasteWeight*l.weightMultiplier*2.5),foodWasteCost:(.85*Number(r.foodWasteWeight)*l.weightMultiplier*l.currencyMultiplier).toFixed(2)})};return e.auth.uid?t?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(ke,{header:"Update Food Waste",subtitle:"Upload Edible or Inedible Food Waste",goTo:"/account",children:Object(u.jsx)(d.a,{fluid:!0,className:"web-center",children:Object(u.jsxs)(j.a,{children:[Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Project Name"}),Object(u.jsx)(j.a.Control,{type:"text",id:"projectName",onChange:e=>{m(e)},value:r.projectName})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Food Name"}),Object(u.jsx)(j.a.Control,{type:"text",id:"foodName",onChange:e=>{m(e)},value:r.foodName})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Edible or Inedibe"}),Object(u.jsx)(rt,{id:"edibleInedible",styling:"grey dropdown-input",data:r.edibleInedible,function:(e,t)=>{m(t)},items:["Edible","Inedible"]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Weight / Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWasteWeight",onChange:e=>{m(e)},value:r.foodWasteWeight}),Object(u.jsx)(rt,{id:"weightType",styling:"grey dropdown-input-right",data:r.weightType,function:(e,t)=>{p(t),m(t)},items:["kg","g","/","oz","lbs","/","l","ml"]})]})]}),Object(u.jsx)(An,{upload:r,multipliers:l,changeMultiplier:p,updateStateValue:m}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"GHG"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"ghg",value:r.ghg,title:r.ghg,readOnly:!0}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})]}),Object(u.jsxs)(zt.a,{className:"mb-3",children:[Object(u.jsx)(j.a.Label,{style:{backgroundColor:"white"},children:"Notes"}),Object(u.jsx)(j.a.Control,{as:"textarea",rows:3,id:"notes",ref:h,onChange:e=>{m(e)}})]}),Object(u.jsx)(Wn,{upload:r,handleFoodWasteSubmit:()=>{var t;switch(r.weightType){default:case"kg":case"l":t=1;break;case"g":case"ml":t=.001;break;case"oz":t=.028;break;case"lbs":t=.454}const a={masterCollection:"mapData",uid:e.auth.uid,upload:{foodWasteWeight:r.foodWasteWeight*t}};var s,n;switch(e.profile.type){case"business_admin":n="business_users",s=e.auth.uid;break;case"business_sub":n="business_users",s=e.profile.admin;break;case"academic_admin":n="academic_users",s=e.auth.uid;break;case"academic_sub":n="academic_users",s=e.profile.admin;break;case"farm_admin":n="farm_users",s=e.auth.uid;break;case"farm_sub":n="farm_users",s=e.profile.admin;break;case"household_admin":n="household_users",s=e.auth.uid;break;case"household_sub":n="household_users",s=e.profile.admin;break;default:n="data",s=e.auth.uid}const l={uid:s,masterCollection:n,collection:"writtenFoodWasteData",upload:{date:Object(da.getFirebase)().firestore.Timestamp.fromDate(new Date),...r}};e.createFoodWasteData(l),e.createMapData(a),he("Success","Food Waste successfully uploaded!"),o(c),b(i),h.current.value=""}})]})})}):Object(u.jsx)(n.a,{to:"/login"})}));tc()().format("MMMM Do YYYY, h:mm:ss a");class Bn extends s.Component{constructor(){super(...arguments),this.state={name:this.props.user.firstName,email:this.props.auth.email,uid:this.props.auth.uid,filteredData:[],formWidth:"",formHeight:"",submissionType:"Intake Academic",meal:"n/a",foodName:"",eatingInOrOut:"n/a",notes:"",foodWeight:0,weightType:"Select Unit",weightMultiplier:0,producedLocally:"Select Local or Non-local",projectName:"",expiryDate:"",chartSubmissionDay:tc()().format("ddd"),chartSubmissionWeek:tc()().format("W"),chartSubmissionMonth:tc()().format("MMM"),chartSubmissionDate:tc()().format("Do"),chartSubmissionYear:tc()().format("YYYY"),chartSubmissionFullDate:tc()().format("ddd MMM Do YYYY")},this.clearEFWForm=()=>{this.setState({projectName:"",foodName:"",notes:"",foodWeight:0,weightType:"Select Unit",producedLocally:"Select Local or Non-local",expiryDate:"",formHeight:"665px"})},this.notificationTest=()=>{je()({title:"Success!",message:"Food Intake successfully updated!",backgroundTop:"#aab41e",backgroundBottom:"#aab41e",closeButton:"Close",duration:4e3})},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.handleEdibleInedibleSurplusChange=e=>{this.setState({edibleInedibleSurplus:e})},this.handleFoodWasteGHGChange=e=>{this.setState({[e.target.id]:e.target.value,ghg:2.5*Number(e.target.value)})},this.handleFoodCostChange=e=>{this.setState({[e.target.id]:e.target.value,foodWasteCost:(.85*Number(e.target.value)).toFixed(2)})},this.handleInedibleFoodCostChange=e=>{this.setState({[e.target.id]:e.target.value,costOfInedibleFoodWaste:(.85*Number(e.target.value)).toFixed(2)})},this.pressButton=e=>{e.preventDefault(),this.props.startData(this.state)},this.handleFoodIntakeSubmit=e=>{e.preventDefault(),this.setState({}),this.props.createFoodIntakeResearchData(this.state)}}changeMeal(e){this.setState({meal:e})}changeCurrency(e){this.setState({currency:e})}changeCurrencyMultiplier(e){this.setState({currencyMultiplier:e})}changeWeightMultiplier(e){this.setState({weightMultiplier:e})}handleProducedLocallyChange(e){this.setState({producedLocally:e})}handleWeightUnitChange(e){this.setState({weightType:e})}componentDidMount(){As.isMobile?this.setState({formWidth:"72vw",formHeight:"665px"}):As.isBrowser&&this.setState({formWidth:"261px",formHeight:"665px"})}render(){const{data:e,auth:t}=this.props,{foodWaste:a,foodSurplus:s}=this.state;if(!t.uid)return Object(u.jsx)(n.a,{to:"/login"});if(e){const a=e&&e.filter((e=>e.email===t.email));return Object(u.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(u.jsx)(As.MobileView,{children:Object(u.jsx)("h3",{style:{paddingTop:"8vh",color:"black",justifyContent:"center",display:"flex"},children:"Update Food"})}),Object(u.jsx)(As.BrowserView,{children:Object(u.jsx)("h4",{style:{paddingTop:"8vh",color:"black",justifyContent:"center",display:"flex"},children:"Update Food"})}),Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",width:"100%"},children:Object(u.jsx)(h.a,{style:{width:this.state.formWidth,borderColor:"#aab41e"},className:"custom-btn-2",as:o.b,to:"/account",children:"Back"})}),0===a.length?Object(u.jsxs)(De.a,{className:"mr-0 ml-0 mt-0 pt-0 mt-lg-5 pt-lg-5 justify-content-center align-items-center d-flex not-found",children:[Object(u.jsx)(Fe.a,{className:"mt-0 pt-0 mb-0 pb-0 mt-lg-2 pt-lg-2",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:" justify-content-center align-items-center d-block mt-5 pt-5 mt-lg-0 pt-lg-0",xs:12,lg:4,children:Object(u.jsx)(Un,{children:Object(u.jsx)(Ie.a,{children:Object(u.jsx)(Ie.a.Body,{children:Object(u.jsxs)(Ie.a.Text,{className:"text-center",children:[Object(u.jsx)("h1",{style:{fontSize:"33px",fontWeight:"600",color:"rgb(55, 85, 54)"},children:"Start tracking your food intake now"}),Object(u.jsx)("button",{onClick:this.pressButton,style:{outline:"none",border:"none"},children:"Start now"})]})})})})}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12})]}):Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",width:"100%",height:"190%"},children:Object(u.jsx)(Ie.a,{style:{width:this.state.formWidth,height:this.state.formHeight,marginBottom:"10vh"},children:Object(u.jsxs)(j.a,{className:"form-layout",style:{padding:"10px"},children:[Object(u.jsx)("h5",{className:"text-center",style:{margin:"30px",fontSize:"23px",fontWeight:"600"},children:"Food Update"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Project Name"}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)(j.a.Control,{id:"projectName",placeholder:"Enter Project Name",onChange:e=>this.handleChange(e),width:"100%",value:this.state.projectName})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Food Name"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsx)(Qs.a,{id:"foodName",options:Gn.map((e=>e.title)),freeSolo:!0,style:{width:"100%"},size:"small",onChange:e=>this.setState({foodName:e.target.textContent}),onInputChange:e=>this.handleChange(e),renderInput:e=>Object(u.jsx)(Zs.a,{...e,label:"Enter Food Name",variant:"outlined"})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Weight / Volume"}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodWeight",placeholder:"Enter weight of food waste",onChange:e=>{this.handleFoodWasteGHGChange(e),this.handleFoodCostChange(e)},width:"100%",value:this.state.foodWeight}),Object(u.jsxs)(ct.a,{as:rs.a.Append,variant:"outline-secondary",title:this.state.weightType,id:"wtdd",children:[Object(u.jsx)(it.a.Header,{children:"Weight (Solids)"}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(1)},children:"kg"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(.001)},children:"g"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(.028)},children:"oz"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(.454)},children:"lbs"})}),Object(u.jsx)(it.a.Divider,{}),Object(u.jsx)(it.a.Header,{children:"Volume (Liquids)"}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(1)},children:"l"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(.001)},children:"ml"})})]})]})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Expiry Date"}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)(j.a.Control,{id:"expiryDate",type:"date",placeholder:"DD/MM/YYYY",onChange:e=>this.handleChange(e),width:"100%",value:this.state.expiryDate})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Local or Non-local?"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)(Yn,{children:Object(u.jsxs)(it.a,{children:[Object(u.jsx)(Ks.a,{variant:"secondary",style:{width:"190px"},className:"dd",children:this.state.producedLocally}),Object(u.jsxs)($s.b,{children:[Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>this.handleProducedLocallyChange(e.target.textContent),children:"Local Produce"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>this.handleProducedLocallyChange(e.target.textContent),children:"Non-local Produce"})})]})]})})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Notes (Optional)"}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsx)(j.a.Control,{as:"textarea",rows:3,id:"notes",style:{resize:"none",width:"100%"},onChange:e=>this.handleChange(e),value:this.state.notes})}),Object(u.jsx)(zs.a,{}),Object(u.jsx)("div",{children:""!==this.state.foodName&&""!==this.state.projectName&&0!==this.state.foodWeight&&"Select Local or Non-local"!==this.state.producedLocally?Object(u.jsx)(h.a,{style:{margin:"0 10% 0 10%",backgroundColor:"#aab41e",width:"80%",marginTop:"20px"},onClick:e=>{this.handleFoodIntakeSubmit(e),this.clearEFWForm(),this.notificationTest()},variant:"secondary",type:"button",children:"Update"}):Object(u.jsx)(h.a,{style:{margin:"0 10% 0 10%",width:"80%",marginTop:"20px"},variant:"secondary",disabled:!0,children:"Update"})})]})]})})})]})}return Object(u.jsx)("div",{})}}const Gn=[{title:"Cereal"},{title:"Bacon"},{title:"Baked Beans"},{title:"Porridge"},{title:"Pancake"},{title:"Beef"},{title:"Chicken"},{title:"Pork"},{title:"Apple"},{title:"Banana"},{title:"Orange"},{title:"Pear"},{title:"Grapes"},{title:"Chocolate"},{title:"Crisps"},{title:"Pasta"},{title:"Bolognese"},{title:"Potato"},{title:"Chips"},{title:"Milk"},{title:"Fruit Juice"},{title:"Onion"}],Un=Pe.a.div`
  .card {
    color: rgb(59, 59, 59);
    background-color: rgb(238, 238, 238);
    border: none;
    border-radius: 5px;
    padding: 70px 0 50px 0;
  }

  .card-body {
    height: 200px;
  }
`,Yn=Pe.a.div`
  .dd {
    background-color: white;
    color: grey;
    border-color: grey;
  }
`;var qn=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({startData:t=>e(Ot(t)),createFoodIntakeResearchData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;t().firebase.profile;const i=t().firebase.auth,r=a.submissionType,n=a.projectName,o=a.foodName,l=a.weightType,d=a.producedLocally,u=a.notes,b=a.chartSubmissionDay,j=a.chartSubmissionWeek,h=a.chartSubmissionMonth,m=a.chartSubmissionDate,p=a.chartSubmissionYear,g=a.chartSubmissionFullDate,O=(new Date).getHours();let x="";x=O>=0&&O<6?"T1":O>=6&&O<12?"T2":O>=12&&O<18?"T3":"T4",c().firestore().collection("data").doc(i.uid).collection("writtenFoodIntakeAcademicData").add({date:c().firestore.Timestamp.fromDate(new Date),type:x,PROJECTNAME:n,FOODNAME:o,weight:Number(a.foodWeight),WEIGHTUNIT:l,LOCALORNOT:d,NOTES:u,WDAY:b,WEEK:j,MONTH:h,MDATE:m,YEAR:p,FULLDATE:g,SUBMISSIONTYPE:r}).then((()=>{e({type:"CREATE_DATA"})})).catch((t=>{e({type:"CREATE_DATA_ERROR",err:t})}))}));var a}}))),Object(da.firestoreConnect)((e=>e.auth.uid?[{collection:"data",doc:e.auth.uid}]:[])))(Bn);tc()().format("MMMM Do YYYY, h:mm:ss a"),tc()().format("ddd MMM Do YYYY");class Hn extends s.Component{constructor(){super(...arguments),this.state={name:this.props.user.firstName,email:this.props.auth.email,uid:this.props.auth.uid,filteredData:[],formWidth:"",formHeight:"",submissionType:"Surplus Academic",foodName:"",foodCategory:"Select Category",foodSurplusWeight:0,weightType:"Select Unit",weightMultiplier:0,producedLocally:"Select Surplus or Local...",expiryDate:"",ghg:0,notes:"",foodSurplusCost:0,currency:"Select Currency",currencyMultiplier:0,chartSubmissionDay:tc()().format("ddd"),chartSubmissionWeek:tc()().format("W"),chartSubmissionMonth:tc()().format("MMM"),chartSubmissionDate:tc()().format("Do"),chartSubmissionYear:tc()().format("YYYY"),chartSubmissionFullDate:tc()().format("ddd MMM Do YYYY")},this.clearEFWForm=()=>{this.setState({foodName:"",foodCategory:"Select Category",foodSurplusWeight:0,weightType:"Select Unit",producedLocally:"Select Surplus or Local...",expiryDate:"",ghg:0,foodSurplusCost:0,currency:"Select Currency",currencyMultiplier:0,notes:"",formHeight:"1065px"})},this.notificationTest=()=>{je()({title:"Success!",message:"Food Surplus successfully updated!",backgroundTop:"#aab41e",backgroundBottom:"#aab41e",closeButton:"Close",duration:4e3})},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.handleFoodCategoryChange=e=>{this.setState({foodCategory:e})},this.handleEdibleInedibleSurplusChange=e=>{this.setState({edibleInedibleSurplus:e})},this.handleFoodWasteGHGChange=e=>{this.setState({[e.target.id]:e.target.value,ghg:2.5*Number(e.target.value)})},this.handleFoodCostChange=e=>{this.setState({[e.target.id]:e.target.value,foodSurplusCost:(.85*Number(e.target.value)).toFixed(2)})},this.handleInedibleFoodCostChange=e=>{this.setState({[e.target.id]:e.target.value,costOfInedibleFoodWaste:(.85*Number(e.target.value)).toFixed(2)})},this.pressButton=e=>{e.preventDefault(),this.props.startData(this.state)},this.handleFoodSurplusSubmit=e=>{e.preventDefault(),this.setState({}),this.props.createFoodSurplusData(this.state)}}changeCurrency(e){this.setState({currency:e})}changeCurrencyMultiplier(e){this.setState({currencyMultiplier:e})}changeWeightMultiplier(e){this.setState({weightMultiplier:e})}handleProducedLocallyChange(e){this.setState({producedLocally:e})}handleWeightUnitChange(e){this.setState({weightType:e})}componentDidMount(){As.isMobile?this.setState({formWidth:"72vw",formHeight:"1065px"}):As.isBrowser&&this.setState({formWidth:"261px",formHeight:"1065px"})}render(){const{data:e,auth:t}=this.props,{foodWaste:a,foodSurplus:s}=this.state;if(!t.uid)return Object(u.jsx)(n.a,{to:"/login"});if(e){const a=e&&e.filter((e=>e.email===t.email));return Object(u.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(u.jsx)(As.MobileView,{children:Object(u.jsx)("h6",{style:{paddingTop:"8vh",color:"black",justifyContent:"center",display:"flex"},children:"Update Food Surplus"})}),Object(u.jsx)(As.BrowserView,{children:Object(u.jsx)("h4",{style:{paddingTop:"8vh",color:"black",justifyContent:"center",display:"flex"},children:"Upload Food"})}),Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",width:"100%"},children:Object(u.jsx)(h.a,{style:{width:this.state.formWidth,borderColor:"#aab41e"},className:"custom-btn-2",as:o.b,to:"/account",children:"Back"})}),0===a.length?Object(u.jsxs)(De.a,{className:"mr-0 ml-0 mt-0 pt-0 mt-lg-5 pt-lg-5 justify-content-center align-items-center d-flex not-found",children:[Object(u.jsx)(Fe.a,{className:"mt-0 pt-0 mb-0 pb-0 mt-lg-2 pt-lg-2",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:" justify-content-center align-items-center d-block mt-5 pt-5 mt-lg-0 pt-lg-0",xs:12,lg:4,children:Object(u.jsx)(zn,{children:Object(u.jsx)(Ie.a,{children:Object(u.jsx)(Ie.a.Body,{children:Object(u.jsxs)(Ie.a.Text,{className:"text-center",children:[Object(u.jsx)("h1",{style:{fontSize:"33px",fontWeight:"600",color:"rgb(55, 85, 54)"},children:"Start tracking your food waste and food surplus now"}),Object(u.jsx)("button",{onClick:this.pressButton,style:{outline:"none",border:"none"},children:"Start now"})]})})})})}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12,lg:4}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12}),Object(u.jsx)(Fe.a,{className:"mt-5 pt-5",xs:12})]}):Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",width:"100%",height:"190%"},children:Object(u.jsx)(Ie.a,{style:{width:this.state.formWidth,height:"805px",marginBottom:"10vh"},children:Object(u.jsxs)(j.a,{className:"form-layout",style:{padding:"10px"},children:[Object(u.jsx)("h5",{className:"text-center",style:{margin:"30px",fontSize:"23px",fontWeight:"600"},children:"Upload Food"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Food Name"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsx)(Qs.a,{id:"foodName",options:Vn.map((e=>e.title)),freeSolo:!0,style:{width:"100%"},size:"small",onChange:e=>this.setState({foodName:e.target.textContent}),onInputChange:e=>this.handleChange(e),renderInput:e=>Object(u.jsx)(Zs.a,{...e,label:"Enter Food Name",variant:"outlined"})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Food Category"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)($n,{children:Object(u.jsxs)(it.a,{children:[Object(u.jsx)(Ks.a,{variant:"secondary",style:{width:"190px"},className:"dd",children:this.state.foodCategory}),Object(u.jsxs)($s.b,{children:[Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleFoodCategoryChange(e.target.textContent)},children:"Meat"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleFoodCategoryChange(e.target.textContent)},children:"Fruits"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleFoodCategoryChange(e.target.textContent)},children:"Vegetables"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleFoodCategoryChange(e.target.textContent)},children:"Dairy"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleFoodCategoryChange(e.target.textContent)},children:"Pets"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleFoodCategoryChange(e.target.textContent)},children:"Frozen"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleFoodCategoryChange(e.target.textContent)},children:"Drinks"})})]})]})})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Weight / Volume"}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"foodSurplusWeight",placeholder:"Enter weight of food waste",onChange:e=>{this.handleFoodWasteGHGChange(e),this.handleFoodCostChange(e)},width:"100%",value:this.state.foodSurplusWeight}),Object(u.jsxs)(ct.a,{as:rs.a.Append,variant:"outline-secondary",title:this.state.weightType,id:"wtdd",children:[Object(u.jsx)(it.a.Header,{children:"Weight (Solids)"}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(1)},children:"kg"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(.001)},children:"g"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(.028)},children:"oz"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(.454)},children:"lbs"})}),Object(u.jsx)(it.a.Divider,{}),Object(u.jsx)(it.a.Header,{children:"Volume (Liquids)"}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(1)},children:"l"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.handleWeightUnitChange(e.target.textContent),this.changeWeightMultiplier(.001)},children:"ml"})})]})]})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Upload Type"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)($n,{children:Object(u.jsxs)(it.a,{children:[Object(u.jsx)(Ks.a,{variant:"secondary",style:{width:"190px"},className:"dd",children:this.state.producedLocally}),Object(u.jsxs)($s.b,{children:[Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>this.handleProducedLocallyChange(e.target.textContent),children:"Local Produce"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>this.handleProducedLocallyChange(e.target.textContent),children:"Surplus"})})]})]})})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Expiry Date"}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsx)(rs.a,{children:Object(u.jsx)(j.a.Control,{id:"expiryDate",placeholder:"DD/MM/YYYY",onChange:e=>this.handleChange(e),width:"100%",value:this.state.expiryDate})})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"GHG"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{type:"number",id:"GHG",placeholder:"Enter GHG value",value:(this.state.ghg*this.state.weightMultiplier).toFixed(2),width:"100%"}),Object(u.jsx)(rs.a.Append,{children:Object(u.jsx)(rs.a.Text,{children:"kg co2"})})]})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Cost"}),Object(u.jsx)(j.a.Group,{style:{padding:"0 10% 0 10%",display:"flex"},children:Object(u.jsxs)(rs.a,{children:[Object(u.jsxs)(ct.a,{as:rs.a.Prepend,variant:"outline-secondary",title:this.state.currency,id:"input-group-dropdown-1",children:[Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.changeCurrency(e.target.textContent),this.changeCurrencyMultiplier(1)},children:"GBP (\xa3)"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.changeCurrency(e.target.textContent),this.changeCurrencyMultiplier(1.404)},children:"USD ($)"})}),Object(u.jsx)(Js.a,{as:"button",type:"button",children:Object(u.jsx)("div",{onClick:e=>{this.changeCurrency(e.target.textContent),this.changeCurrencyMultiplier(1.161)},children:"EUR (\u20ac)"})})]}),Object(u.jsx)(j.a.Control,{type:"number",id:"foodSurplusCost",placeholder:"Enter cost of food surplus",value:(this.state.foodSurplusCost*this.state.currencyMultiplier*this.state.weightMultiplier).toFixed(2)})]})}),Object(u.jsx)("div",{style:{padding:"0 10% 0 10%"},children:"Notes (Optional)"}),Object(u.jsx)(j.a.Group,{className:"form-layout",style:{padding:"0 10% 0 10%",display:"flex",justifyContent:"space-around"},children:Object(u.jsx)(j.a.Control,{as:"textarea",rows:3,id:"notes",style:{resize:"none",width:"100%"},onChange:e=>this.handleChange(e),value:this.state.notes})}),Object(u.jsx)("div",{children:""!==this.state.foodName&&0!==this.state.foodSurplusWeight&&"Select Unit"!==this.state.weightType&&"Select Surplus or Local..."!==this.state.producedLocally&&""!==this.state.expiryDate&&"Select Currency"!==this.state.currency?Object(u.jsx)(h.a,{style:{margin:"0 10% 0 10%",backgroundColor:"#aab41e",width:"80%",marginTop:"5px"},onClick:e=>{this.handleFoodSurplusSubmit(e),this.notificationTest(),this.clearEFWForm()},variant:"secondary",type:"button",children:"Update"}):Object(u.jsx)(h.a,{style:{margin:"0 10% 0 10%",width:"80%",marginTop:"5px"},variant:"secondary",disabled:!0,children:"Update"})})]})]})})})]})}return Object(u.jsx)("div",{})}}const Vn=[{title:"Cereal"},{title:"Bacon"},{title:"Baked Beans"},{title:"Porridge"},{title:"Pancake"},{title:"Beef"},{title:"Chicken"},{title:"Pork"},{title:"Apple"},{title:"Banana"},{title:"Orange"},{title:"Pear"},{title:"Grapes"},{title:"Chocolate"},{title:"Crisps"},{title:"Pasta"},{title:"Bolognese"},{title:"Potato"},{title:"Chips"},{title:"Milk"},{title:"Fruit Juice"},{title:"Onion"}],zn=Pe.a.div`
  .card {
    color: rgb(59, 59, 59);
    background-color: rgb(238, 238, 238);
    border: none;
    border-radius: 5px;
    padding: 70px 0 50px 0;
  }

  .card-body {
    height: 200px;
  }
`,$n=(Pe.a.div`
  .form {
    display: flex;
    align-items: center;
    top: 50%;
    transform: translateY(20%);
  }
`,Pe.a.div`
  .chart {
    position: absolute;
    left: 17%;
    padding: 20px;
  }
`,Pe.a.div`
  .dd {
    background-color: white;
    color: grey;
    border-color: grey;
  }
`);var Kn=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,data:e.firestore.ordered.data,user:e.firebase.profile,profile:e.firebase.profile})),(e=>({startData:t=>e(Ot(t)),createFoodSurplusData:t=>{return e((a=t,(e,t,s)=>{let{getFirebase:c}=s;t().firebase.profile;const i=t().firebase.auth,r=a.submissionType,n=a.foodName,o=a.foodCategory,l=a.producedLocally,d=a.expiryDate,u=a.ghg*a.weightMultiplier,b=(a.foodSurplusCost*a.weightMultiplier*a.currencyMultiplier).toFixed(2),j=a.currency,h=a.weightType,m=a.notes,p=a.chartSubmissionDay,g=a.chartSubmissionWeek,O=a.chartSubmissionMonth,x=a.chartSubmissionDate,f=a.chartSubmissionYear,y=a.chartSubmissionFullDate,v=a.price,w=a.postcode,S=a.carbsContent,C=a.proteinContent,k=a.fibreContent,N=a.fatContent,E=(new Date).getHours();let T="";T=E>=0&&E<6?"T1":E>=6&&E<12?"T2":E>=12&&E<18?"T3":"T4",c().firestore().collection("data").doc(i.uid).collection("writtenFoodSurplusData").add({date:c().firestore.Timestamp.fromDate(new Date),weight:Number(a.foodSurplusWeight),type:T,SUBMISSIONTYPE:r,FOODNAME:n,FOODCATEGORY:o,LOCALORNOT:l,EXPIRYDATE:d,GHG:u,COST:Number(b),CURRENCY:j,WEIGHTUNIT:h,NOTES:m,WDAY:p,WEEK:g,MONTH:O,MDATE:x,YEAR:f,FULLDATE:y,PRICE:v,POSTCODE:w,CARBSCONTENT:S,PROTEINCONTENT:C,FIBRECONTENT:k,FATCONTENT:N}).then((()=>{e({type:"CREATE_DATA"})})).catch((t=>{e({type:"CREATE_DATA_ERROR",err:t})}))}));var a}}))),Object(da.firestoreConnect)((e=>e.auth.uid?[{collection:"data",doc:e.auth.uid}]:[])))(Hn);var Jn=Object(m.b)((e=>({profile:e.firebase.profile})),(e=>({createMealPlanData:t=>e(de(t)),createRecipe:t=>e(ns(t)),addToShoppingList:t=>e(Vc(t))})))((function(e){const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(!0),r={food:"",quantity:0,measure:"g"},[n,o]=Object(s.useState)(r),l=e=>{e.target.textContent?o({...n,[e.target.id]:e.target.textContent}):o({...n,[e.target.id]:e.target.value})},d=t.map(((e,t)=>Object(u.jsxs)("li",{children:[e.food,": ",e.quantity,e.measure]},t)));return Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={year:e.value.format("YYYY"),month:e.value.format("YYYYMM"),week:e.value.format("w")-1,day:e.value.format("DD"),upload:{ingredients:t}};e.createMealPlanData(a),e.addToShoppingList(a),e.forceUpdate(),c&&e.createRecipe(a)})(),e.handleFormClose()},children:[Object(u.jsx)("div",{style:{padding:"0 0 0 4%"},children:Object(u.jsx)("ul",{children:d})}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Product"}),Object(u.jsx)(j.a.Control,{type:"text",id:"food",onChange:e=>l(e),value:n.food})]}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Quantity"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:"1",onChange:e=>l(e),value:n.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:n.measure,items:["g","kg","/","mL","L","/","pcs"],function:e=>{o({...n,measure:e})}})]})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(h.a,{className:"green-btn shadow-none",id:"add-new-ing",onClick:e=>{a((e=>[...e,n])),o(r)},children:"Add Product"})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",children:"Submit order"})})]})}));var Qn=()=>{const[e,t]=Object(s.useState)(""),[a,c]=Object(s.useState)(""),[i,r]=Object(s.useState)(""),[n,o]=Object(s.useState)(""),[l,d]=Object(s.useState)(""),[b,h]=Object(s.useState)("");return Object(u.jsx)(ke,{goTo:"/account",header:"Restaurant tools",children:Object(u.jsxs)("div",{className:"create",children:[Object(u.jsx)("h2",{children:" Shopping List"}),Object(u.jsx)("p",{children:"Tell us what you expect to need each week. "}),Object(u.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={product:n,quantity:l,unit:b};console.log(t),fetch("http://localhost:8000/blogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((()=>{console.log("new order added")}))},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Start date:"}),Object(u.jsx)(j.a.Control,{type:"date",id:"startDate",onChange:e=>t(e.target.value),value:e})]}),Object(u.jsx)("div",{style:{padding:"0 0 0 4%"}}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)("label",{children:" End date:"}),Object(u.jsx)(j.a.Control,{type:"date",id:"endDate",onChange:e=>c(e.target.value),value:a})]}),Object(u.jsx)("div",{style:{padding:"0 0 0 4%"}}),Object(u.jsx)("label",{children:"Delivery or pick-up day"}),Object(u.jsxs)("select",{value:i,onChange:e=>r(e.target.value),children:[Object(u.jsx)("option",{value:"Monday",children:"Monday"}),Object(u.jsx)("option",{value:"Tuesday",children:"Tuesday"}),Object(u.jsx)("option",{value:"Wednesday",children:"Wednesday"}),Object(u.jsx)("option",{value:"Thursday",children:"Thursday"}),Object(u.jsx)("option",{value:"Friday",children:"Friday"}),Object(u.jsx)("option",{value:"Saturday",children:"Saturday"}),Object(u.jsx)("option",{value:"Sunday",children:"Sunday"})]}),Object(u.jsx)(Jn,{}),"    "]})]})})};var Zn=()=>Object(u.jsx)(ke,{goTo:"/account",header:"Restaurant Tools",children:Object(u.jsxs)("div",{className:"create",children:[Object(u.jsx)("h2",{children:" Inventory"}),Object(u.jsx)("p",{children:" By using the World Food Tracker to track your inventory, we can provide useful analytics on your ordering practices, average usage of ingredients and more. In turn, this will allow us to help you better predict what you need, farther in advance. "}),Object(u.jsx)(Tn,{})]})});var Xn=Object(m.b)((e=>({profile:e.firebase.profile})),(e=>({addToRestaurantShoppingList:t=>e((e=>(t,a,s)=>{let{getFirestore:c}=s;const i=a().firebase.profile,r=a().firebase.auth.uid;var n;switch(i.type){case"business_admin":case"academic_admin":case"household_admin":default:n=r;break;case"business_sub":case"academic_sub":case"household_sub":n=i.admin}const o=e.upload.ingredients,l=c(),d=l.batch();o.forEach((t=>{var a=l.collection("marketplace").doc(n).collection("shoppingList").doc(e.year).collection(e.week).doc();d.set(a,{id:a.id,ingredient:t})})),d.commit().then((()=>{t({type:"CREATE_SHOP",ingr:o})})).catch((e=>{t({type:"CREATE_SHOP_ERROR",err:e})}))})(t))})))((e=>{const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(!1),[d,b]=Object(s.useState)("+ scan from barcode");return Object(s.useEffect)((()=>{console.log("item:",t,"quantity:",c,"measure",r)}),[t]),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"btn success shadow-none qrcode-btn",onClick:()=>(l(!o),void b(o?"+ scan from barcode":"- input manually")),children:d}),o?Object(u.jsx)(ci,{}):Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={upload:{item:t,quantity:c,measure:r}};e.addToRestaurantShoppingList(a)})(),e.setUpdate(e.update+1),e.handleFormClose()},children:[Object(u.jsx)(Hc,{handleFoodSearch:e=>{e.target.textContent?a(e.target.textContent):a(e.target.value)}}),Object(u.jsx)("input",{name:"quantity",type:"number",value:c,label:"Quantity",onChange:e=>i(e.target.value),sx:{width:"100%",lineHeight:"calc(1.5em + .75rem + 2px)"}}),"  ",Object(u.jsx)("input",{name:"measure",type:"text",value:r,label:"Unit",onChange:e=>n(e.target.value),sx:{width:"100%",lineHeight:"calc(1.5em + .75rem + 2px)"}}),"  ",Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none mt-3",type:"submit",children:"Done"})})]})]})}));const eo=e=>{let{show:t,setShow:a,update:s,setUpdate:c}=e;const i=()=>a(!1);return Object(u.jsxs)("div",{children:[Object(u.jsx)(Q.a,{title:"add",arrow:!0,children:Object(u.jsx)("div",{className:"button",children:Object(u.jsx)(ee,{onClick:()=>a(!0)})})}),Object(u.jsxs)(oe.a,{show:t,onHide:i,size:"lg","aria-labelledby":"add item",centered:!0,children:[Object(u.jsx)(oe.a.Header,{closeButton:!0,children:Object(u.jsx)(oe.a.Title,{id:"add-item",className:"basic-title-left basic-lg",children:"Add a new item to your shopping list"})}),Object(u.jsx)(oe.a.Body,{children:Object(u.jsx)(Xn,{handleFormClose:i,update:s,setUpdate:c})})]})]})};var to=Object(m.b)((e=>({data:e.mealPlan.restaurantShoppingListItems})),(e=>({getRestaurantShoppingList:t=>e(((e,t,a)=>{let{getFirestore:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().collection("marketplace").doc(r).collection("shoppingList").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_SHOPPING_LIST",payload:a})})).catch((t=>{e({type:"GET_SHOPPING_LIST_ERROR",err:t})}))}))})))((function(e){const[t,a]=Object(s.useState)([]);return Object(s.useEffect)((()=>{e.getRestaurantShoppingList()}),[e.value,e.quantity,e.measure,e.update]),Object(s.useEffect)((()=>{(async()=>{a([]),e.data.forEach((e=>{var t=e.id,s=e.item,c=e.quantity,i=e.measure;a((e=>[...e,{item:s,id:t,measure:i,quantity:c}]))})),a((e=>{let t=[...e];return t.sort(((e,t)=>e.item<t.item?-1:e.item>t.item?1:0)),t}))})()}),[e.data]),Object(u.jsx)(u.Fragment,{children:t.length?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(ye.a,{children:t.map(((t,a)=>Object(u.jsxs)(ve.a,{className:"list",style:{alignItems:"flex-end"},children:[Object(u.jsxs)("p",{children:[t.quantity," ",t.measure," ",t.item]}),"       ",Object(u.jsx)("div",{className:"icons",children:Object(u.jsx)(gn,{id:t.id,value:e.value,update:e.update,setUpdate:e.setUpdate})})]},`item${a}`)))})}):Object(u.jsx)("div",{className:"empty basic-title-left",children:Object(u.jsx)("p",{children:"There are no items in the list. "})})})}));const ao=e=>{let{forceUpdate:t,value:a,tab:c}=e;const[i,r]=Object(s.useState)(0),[n,o]=Object(s.useState)(!1);return Object(u.jsxs)("div",{className:"RestaurantShoppingList",children:[Object(u.jsx)(to,{value:a,tab:c,update:i,setUpdate:r}),Object(u.jsx)(eo,{show:n,setShow:o,update:i,setUpdate:r})]})};var so=()=>Object(u.jsxs)(ke,{goTo:"/account",header:"Restaurant Tools",children:[Object(u.jsxs)("div",{className:"inventory",children:[Object(u.jsx)("h2",{children:" Inventory"}),Object(u.jsx)("p",{children:" By using the World Food Tracker to track your inventory, we can provide useful analytics on your ordering practices, average usage of ingredients and more. In turn, this will allow us to help you better predict what you need, farther in advance. "}),Object(u.jsx)(Tn,{})]}),Object(u.jsxs)("div",{className:"shoppinglist",children:[Object(u.jsx)("h2",{children:" Shopping List"}),Object(u.jsx)(ao,{})]})]});function co(e){let{setMenuSection:t,ownRecipe:a}=e;const[c,i]=Object(s.useState)("Any");Object(s.useEffect)((()=>{(()=>{if(a)switch(c){default:case"Any":t("");break;case"Breakfast":t("Breakfast");break;case"Lunch":t("Lunch");break;case"Dinner":t("Dinner");break;case"Snack":t("Snack");break;case"Brunch":t("Brunch");break;case"Large Plates":t("Large Plates");break;case"Small Plates":t("Small Plates");break;case"Sides":t("Sides");break;case"Dessert":t("Dessert")}else switch(c){default:case"Any":t("");break;case"Breakfast":t("&menuSection=Breakfast");break;case"Lunch":t("&menuSection=Lunch");break;case"Dinner":t("&menuSection=Dinner");break;case"Snack":t("&menuSection=Snack");break;case"Brunch":t("&menuSection=Brunch");break;case"Large Plates":t("&menuSection=Large Plates");break;case"Small PLates":t("&menuSection=Small Plates");break;case"Sides":t("&menuSection=Sides");break;case"Dessert":t("&menuSection=Dessert")}})()}),[c]);return Object(u.jsx)(rt,{id:"menu-section",styling:"green dropdown-input",data:c,items:["Any","Breakfast","Lunch","Dinner","Snack","Brunch","Large Plates","Small Plates","Sides","Dessert"],function:e=>i(e)})}var io=Object(m.b)(null,(e=>({createMealPlanData:t=>e(de(t)),createRecipe:t=>e(ns(t)),addToShoppingList:t=>e(Vc(t))})))((function(e){const[t,a]=Object(s.useState)(""),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(""),[d,b]=Object(s.useState)(""),[m,p]=Object(s.useState)(!0),g={food:"",quantity:0,measure:"g",foodId:""},[O,x]=Object(s.useState)(g),f=e=>{x({...O,foodId:e})},[y,v]=Object(s.useState)([]);Object(s.useEffect)((()=>{console.log("ingredients",y)}),[y]);const w=y.map(((e,t)=>Object(u.jsxs)("li",{children:[e.food,": ",e.quantity,e.measure]},t))),[S,C]=Object(s.useState)(0);return Object(u.jsxs)(j.a,{onSubmit:a=>{a.preventDefault(),(()=>{const a={upload:{meal:t,mealDescription:c,mealPrice:r,menuSection:o,ingredients:y}};m&&e.createRecipe(a)})()},children:[Object(u.jsx)(co,{setMenuSection:l,ownRecipe:!0}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Dish name"}),Object(u.jsx)(j.a.Control,{type:"text",id:"mealName",onChange:e=>{a(e.target.value)},required:!0}),Object(u.jsx)(j.a.Label,{children:"Dish description"}),Object(u.jsx)(j.a.Control,{type:"text",id:"mealDescription",onChange:e=>{i(e.target.value)}}),Object(u.jsx)(j.a.Label,{children:"Dish price"}),Object(u.jsx)(j.a.Control,{type:"number",id:"mealPrice",onChange:e=>{n(e.target.value)}})]}),Object(u.jsx)("div",{style:{padding:"0 0 0 4%"},children:Object(u.jsx)("ul",{children:w})}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(Hc,{handleFoodSearch:e=>{e.target.textContent?x({...O,food:e.target.textContent}):x({...O,food:e.target.value})}})}),Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)(j.a.Label,{children:"Weight/Volume"}),Object(u.jsxs)(rs.a,{children:[Object(u.jsx)(j.a.Control,{id:"quantity",type:"number",min:"0",step:".1",onChange:e=>(e=>{e.target.textContent?x({...O,[e.target.id]:e.target.textContent}):x({...O,[e.target.id]:e.target.value})})(e),value:O.quantity}),Object(u.jsx)(rt,{id:"measure",styling:"grey dropdown-input",data:O.measure,items:["g","kg","/","mL","L","/","tsp","tbsp","cups"],function:e=>{x({...O,measure:e})}})]})]}),Object(u.jsx)(j.a.Group,{children:Object(u.jsx)(h.a,{className:"green-btn shadow-none",id:"add ingredient",onClick:()=>{(async()=>{""!==O.food?Kc(O.food,f).then((()=>{v((e=>[...e,O])),x(g)})):b("Please input an ingredient to add.")})()},children:"Add Ingredient"})}),Object(u.jsx)("div",{style:{alignItems:"center"},children:Object(u.jsx)(h.a,{className:"blue-btn shadow-none",type:"submit",onClick:()=>{p(!m)},children:"Done"})})]})}));function ro(e){return Object(u.jsx)(u.Fragment,{children:e.meals.map(((e,t)=>Object(u.jsx)("div",{className:"menu-item",children:Object(u.jsx)("div",{className:"ingredients",children:Object(u.jsxs)(ye.a,{children:[Object(u.jsxs)(xi.a,{className:"heading",children:[Object(u.jsx)("div",{className:"meal-name",children:e.meal}),e.menuSection?Object(u.jsx)("div",{className:"menu-section",children:e.menuSection}):null,e.mealDescription?Object(u.jsx)("div",{className:"meal-description",children:e.mealDescription}):null,e.mealPrice?Object(u.jsx)("div",{className:"meal-price",children:e.mealPrice}):null]}),Object(u.jsx)(ve.a,{children:e.url?Object(u.jsx)("a",{href:e.url,children:e.url}):null})]})})},`menu-item${t}`)))})}var no=a(590),oo=a.n(no);var lo=Object(m.b)((e=>({mealPlan:e.mealPlan.savedMeals})),(e=>({getRecipes:t=>e(((e,t,a)=>{let{getFirestore:s}=a;const c=t().firebase.profile,i=t().firebase.auth.uid;var r;switch(c.type){case"business_admin":case"academic_admin":case"household_admin":default:r=i;break;case"business_sub":case"academic_sub":case"household_sub":r=c.admin}s().collection("marketplace").doc(r).collection("mySavedMeals").get().then((t=>{const a=[];t.forEach((e=>{a.push(e.data())})),e({type:"GET_RECIPES",payload:a})})).catch((t=>{e({type:"GET_RECIPES_ERROR",err:t})}))}))})))((e=>{const[t,a]=Object(s.useState)([]),[c,i]=Object(s.useState)(0);Object(s.useEffect)((()=>{e.getRecipes()}),[c]);return Object(s.useEffect)((()=>{(async()=>{a([]),e.mealPlan.forEach((e=>{var t=e.meal,s=e.ingredients,c=e.id,i=e.mealType,r=e.menuSection,n=e.nonNativeData,o=e.totalDaily,l=e.totalNutrients,d=e.url,u=e.yield;a(n?e=>[...e,{meal:t,mealType:i,menuSection:r,ingredients:s,id:c,nonNativeData:n,totalDaily:o,totalNutrients:l,url:d,recipeYield:u}]:e=>[...e,{meal:t,mealType:i,menuSection:r,ingredients:s,id:c}])}))})()}),[e.mealPlan]),console.log(t),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"basic-title-left mb-3",children:"Menu Preview"}),Object(u.jsx)("div",{className:"saved-meals",children:Object(u.jsx)("div",{className:"sort",children:Object(u.jsx)(ro,{forceUpdate:()=>{i(c+1)},onChange:e.onChange,meals:oo()(t,["menuSection"]),saved:!0,value:e.value})})})]})}));function uo(){const[e,t]=Object(s.useState)(!0);Object(s.useEffect)((()=>{setTimeout((()=>t(!1)),1500)}));const[a,c]=Object(s.useState)(tc()());return Object(u.jsx)(ke,{goTo:"/account",header:"My Plan to Save",children:Object(u.jsxs)(Wc.a,{defaultActiveKey:"calendar",id:"meal-plan-tabs",className:"mb-3 mealtabs basic-title",children:[Object(u.jsx)(Lc.a,{eventKey:"calendar",title:"MEAL PLAN",className:"mealtab",children:Object(u.jsx)(Li,{value:a,onChange:c})}),Object(u.jsxs)(Lc.a,{eventKey:"recipes",title:"CREATE MENU",className:"mealtab",children:[Object(u.jsx)(Zr,{value:a,onChange:c}),Object(u.jsx)(io,{}),Object(u.jsx)(lo,{})]}),Object(u.jsx)(Lc.a,{eventKey:"shopping-list",title:"SHOPPING LIST",className:"mealtab",children:Object(u.jsx)(bn,{value:a})}),Object(u.jsx)(Lc.a,{eventKey:"inventory",title:"INVENTORY",className:"mealtab",children:Object(u.jsx)(Tn,{value:a})})]})})}var bo=a(436),jo=a.n(bo);function ho(e){return"Restaurants"!=e.profile.buildingFunction?Object(u.jsxs)(d.a,{fluid:!0,className:"profile",children:[Object(u.jsx)(qt,{priority:"4",text:e.profile.firstName+" "+e.profile.lastName}),Object(u.jsx)(qt,{priority:"5",text:e.profile.email}),Object(u.jsxs)("p",{children:[e.profile.buildingFunction," Account"]}),Object(u.jsx)(Q.a,{title:"Settings",children:Object(u.jsx)(ie.a,{href:"/settings",component:"a",style:{float:"right"},children:Object(u.jsx)(jo.a,{})})})]}):(console.log(e),Object(u.jsxs)(d.a,{fluid:!0,className:"profile",children:[Object(u.jsx)(qt,{priority:"4",text:e.profile.firstName+" "+e.profile.lastName+", "+e.profile.restaurantName}),Object(u.jsx)(qt,{priority:"5",text:e.profile.email}),Object(u.jsxs)("p",{children:[e.profile.buildingFunction," Account"]}),Object(u.jsx)(Q.a,{title:"Settings",children:Object(u.jsx)(ie.a,{href:"/settings",component:"a",style:{float:"right"},children:Object(u.jsx)(jo.a,{})})})]}))}var mo=a(438),po=a(1058),go=a(1053),Oo=a(1052),xo=a(229),fo=a.n(xo),yo=a(156);const vo="#afba15",wo="#d9a12d",So="#32797e";function Co(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{title:"Plan your meals with us, search a range of delicious recipes.",icon:"notes",label:"My Food Diary",color:"turquoise",goTo:"/meal-plan"}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"food",label:"Plan to Save",color:"yellow",onClick:()=>{t(!0),a(!0)}})]})}function ko(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{icon:"plant",label:"Nutrient Gap",color:"yellow",goTo:"/nutrient-gap"}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"food",label:"Plan to Save",color:"turquoise",onClick:()=>{t(!0),a(!0)}}),Object(u.jsx)(te,{icon:"plant",label:"Composition",color:"green",goTo:"/nutrient-composition"})]})}function No(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{title:"Record your food waste.",icon:"waste",label:"Food Waste",color:"turquoise",goTo:"/food-waste"}),Object(u.jsx)(te,{title:"View your food waste data.",icon:"chart",label:"Waste Chart",color:"yellow",goTo:"/chart"}),Object(u.jsx)(te,{title:"Gift a Food Item.",icon:"gift",label:"Gifted Items Chart",color:"turquoise",goTo:"/gift-food"}),Object(u.jsx)(te,{title:"View your gifted food data.",icon:"chart",label:"Gifted Item Chart",color:"yellow",goTo:"/gift-chart"}),Object(u.jsx)(te,{title:"View the world map of WFT users!",icon:"world",label:"Users Map",color:"yellow",goTo:"/view-map"}),Object(u.jsx)(te,{title:"Useful tips on how to reduce food waste in your home.",icon:"info",label:"Waste Tips",color:"green",goTo:"/food-reduction"})]})}function Eo(e){let{isSeller:t}=e;return Object(u.jsxs)(u.Fragment,{children:[t?Object(u.jsx)(te,{title:"Start planning your farm with us. Coordinate your produce with consumers and grow into sustainability.",icon:"notes",label:"My Farm Plan",color:"turquoise",goTo:"/farm-plan"}):Object(u.jsx)(te,{title:"Start planning your farm with us. Coordinate your produce with consumers and grow into sustainability.",icon:"notes",label:"My Farm Plan",color:"turquoise",goTo:"/farm-auth"}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"food",label:"Plan to Save",color:"yellow",goTo:"/pts"}),Object(u.jsx)(te,{icon:"my-products",label:"Food Returned",color:"turquoise",goTo:"/view-products",disabled:!0}),Object(u.jsx)(te,{icon:"chart",label:"Produce Chart",color:"yellow",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Turnover",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Profit",color:"turquoise",goTo:"/",disabled:!0})]})}function To(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{title:"Record your food loss.",icon:"waste",label:"Food Loss",color:"turquoise",goTo:"/food-loss"}),Object(u.jsx)(te,{title:"View your food loss data.",icon:"chart",label:"Waste Chart",color:"yellow",goTo:"/chart"}),Object(u.jsx)(te,{title:"Useful tips on how to reduce food waste in your home.",icon:"info",label:"Food Waste Reduction Tips",color:"green",goTo:"/food-reduction"}),Object(u.jsx)(te,{title:"View the world map of WFT users!",icon:"world",label:"Users Map",color:"yellow",goTo:"/view-map"}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"food",label:"Plan to Save",color:"yellow",goTo:"/pts"})]})}function _o(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{title:"Find out about our Agrifood TechPreneur program.",icon:"plant",label:"Agrifood Technpreneur",color:"turquoise",goTo:"https://intellidigest.com/services/food-system-sustainability/agrifood-techpreneur-club/"}),Object(u.jsx)(te,{title:"Buff up the sustainability of your business with our online masterclasses.",icon:"book",label:"Masterclasses",color:"turquoise",goTo:"https://intellidigest.com/masterclasses-overview/"}),Object(u.jsx)(te,{title:"Calculate the Food Industry Sustainability Index (FISI) of your business.",icon:"info",label:"FISI",color:"green",goTo:"https://intellidigest.com/services/food-system-sustainability/food-industry-sustainability-index/"}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"food",label:"Plan to Save",color:"yellow",goTo:"/pts"})]})}function Do(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{icon:"notes",label:"Meal Plan",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"my-products",label:"Meal Sold",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"my-products",label:"Meal Returned",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"chart",label:"Meal Chart",color:"yellow",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Turnover",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Profit",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"kitchen",label:"Plan to Save",color:"turquoise",onClick:()=>{t(!0),a(!0)}})]})}function Fo(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{title:"Record your food waste.",icon:"waste",label:"Food Waste",color:"turquoise",goTo:"/food-wasteBusiness"}),Object(u.jsx)(te,{title:"View your food waste data.",icon:"chart",label:"Waste Chart",color:"yellow",goTo:"/chart"}),Object(u.jsx)(te,{title:"Useful tips on how to reduce food waste in your home.",icon:"info",label:"Food Waste Reduction Tips",color:"green",goTo:"/food-reduction"}),Object(u.jsx)(te,{title:"View the world map of WFT users!",icon:"world",label:"Users Map",color:"yellow",goTo:"/view-map"}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"kitchen",label:"Plan to Save",color:"turquoise",onClick:()=>{t(!0),a(!0)}})]})}function Ro(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{title:"Find out about our Agrifood TechPreneur program.",icon:"plant",label:"Agrifood Technpreneur",color:"turquoise",goTo:"https://intellidigest.com/services/food-system-sustainability/agrifood-techpreneur-club/"}),Object(u.jsx)(te,{title:"Buff up the sustainability of your business with our online masterclasses.",icon:"book",label:"Masterclasses",color:"turquoise",goTo:"https://intellidigest.com/masterclasses-overview/"}),Object(u.jsx)(te,{title:"Calculate the Food Industry Sustainability Index (FISI) of your business.",icon:"info",label:"FISI",color:"green",goTo:"https://intellidigest.com/services/food-system-sustainability/food-industry-sustainability-index/"})]})}function Po(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{icon:"notes",label:"Meal Plan",color:"turquoise",goTo:"/meal-plan"}),Object(u.jsx)(te,{icon:"my-products",label:"Meal Sold",color:"turquoise",goTo:"/view-products"}),Object(u.jsx)(te,{icon:"my-products",label:"Meal Returned",color:"turquoise",goTo:"/view-products",disabled:!0}),Object(u.jsx)(te,{icon:"chart",label:"Meal Chart",color:"yellow",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Turnover",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Profit",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"kitchen",label:"Plan to Save",color:"turquoise",onClick:()=>{t(!0),a(!0)}})]})}function Io(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{icon:"notes",label:"Research Plan",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"my-products",label:"Food Items Used",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"my-products",label:"Food Items Not Used",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"chart",label:"Chart",color:"yellow",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Research Cost",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"kitchen",label:"Plan to Save",color:"turquoise",onClick:()=>{t(!0),a(!0)}})]})}function Mo(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{icon:"waste",label:"Food Waste",color:"turquoise",goTo:"/food-wasteAcademic"}),Object(u.jsx)(te,{icon:"chart",label:"Waste Chart",color:"yellow",goTo:"/chart"}),Object(u.jsx)(te,{icon:"info",label:"Food Waste Reduction Tips",color:"green",goTo:"/food-reduction"}),Object(u.jsx)(te,{icon:"world",label:"Users Map",color:"yellow",goTo:"/view-map"}),Object(u.jsx)(te,{icon:"kitchen",label:"Plan to Save",color:"turquoise",onClick:()=>{t(!0),a(!0)}})]})}function Ao(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{icon:"plant",label:"Agrifood Technpreneur",color:"turquoise",goTo:"https://intellidigest.com/services/food-system-sustainability/agrifood-techpreneur-club/"}),Object(u.jsx)(te,{icon:"book",label:"Masterclasses",color:"turquoise",goTo:"https://intellidigest.com/masterclasses-overview/"}),Object(u.jsx)(te,{icon:"info",label:"FISI",color:"green",goTo:"https://intellidigest.com/services/food-system-sustainability/food-industry-sustainability-index/"})]})}function Wo(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{icon:"notes",label:"Meal Plan",color:"turquoise",goTo:"/restaurant-meal-plan"}),Object(u.jsx)(te,{icon:"notes",label:"Restaurant details",color:"turquoise",goTo:"/restaurant-meal-plan"}),Object(u.jsx)(te,{icon:"my-products",label:"Meal Sold",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"my-products",label:"Meal Returned",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"chart",label:"Meal Chart",color:"yellow",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Turnover",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{icon:"notes",label:"Profit",color:"turquoise",goTo:"/",disabled:!0}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"kitchen",label:"Plan to Save",color:"turquoise",onClick:()=>{t(!0),a(!0)}})]})}function Lo(e){let{setShow:t,setChooseModal:a}=e;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{title:"Record your food waste.",icon:"waste",label:"Food Waste",color:"turquoise",goTo:"/food-wasteBusiness"}),Object(u.jsx)(te,{title:"View your food waste data.",icon:"chart",label:"Waste Chart",color:"yellow",goTo:"/chart"}),Object(u.jsx)(te,{title:"Useful tips on how to reduce food waste in your home.",icon:"info",label:"Food Waste Reduction Tips",color:"green",goTo:"/food-reduction"}),Object(u.jsx)(te,{title:"View the world map of WFT users!",icon:"world",label:"Users Map",color:"yellow",goTo:"/view-map"}),Object(u.jsx)(te,{title:"Find out more about the Plan to Save campaign, and what you can do to help.",icon:"kitchen",label:"Plan to Save",color:"turquoise",onClick:()=>{t(!0),a(!0)}})]})}function Bo(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(te,{title:"Find out about our Agrifood TechPreneur program.",icon:"plant",label:"Agrifood Technpreneur",color:"turquoise",goTo:"https://intellidigest.com/services/food-system-sustainability/agrifood-techpreneur-club/"}),Object(u.jsx)(te,{title:"Buff up the sustainability of your business with our online masterclasses.",icon:"book",label:"Masterclasses",color:"turquoise",goTo:"https://intellidigest.com/masterclasses-overview/"}),Object(u.jsx)(te,{title:"Calculate the Food Industry Sustainability Index (FISI) of your business.",icon:"info",label:"FISI",color:"green",goTo:"https://intellidigest.com/services/food-system-sustainability/food-industry-sustainability-index/"})]})}var Go=a(1062);a(904);const Uo=()=>"_"+Math.random().toString(36).substr(2,9),Yo=e=>Object(u.jsx)("div",{className:`${e.className}`,children:e.data.map((t=>{return a=t,s=e.toggleHandler,c=e.isCheckedState,Object(u.jsx)(qo,{name:a.name,handler:s,isChecked:!!c[a.name],text:a.text},a.name);var a,s,c}))}),qo=e=>{const{name:t,text:a,isChecked:s,handler:c}=e,i=Uo();return Object(u.jsx)("div",{className:"Checkbox",children:Object(u.jsxs)("label",{htmlFor:i,className:`Checkbox__label ${e.className}`,children:[Object(u.jsx)("input",{id:i,name:t,type:"checkbox",checked:s,onChange:()=>{c(t)}}),a]})})};class Ho extends s.Component{constructor(){super(...arguments),this.passPropsToChildren=()=>{const{children:e,handleChange:t,activeIndex:a}=this.props;return c.a.Children.map(e,((e,s)=>c.a.cloneElement(e,{index:s,onChange:t,checked:s===a})))}}render(){return Object(u.jsx)("div",{className:`RadioGroup ${this.props.className}`,children:this.passPropsToChildren()})}}const Vo=e=>{const t=Uo();return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{className:"Radio",type:"radio",checked:e.checked,name:e.name,id:t,onChange:()=>{e.onChange(e.index)}}),Object(u.jsx)("label",{htmlFor:t,className:e.className,children:e.children})]})};var zo=e=>Object(u.jsx)("select",{value:e.value,onChange:e.handler,name:e.name,children:e.options.map((e=>Object(u.jsx)("option",{value:e.val,children:e.text},e.val)))});const $o={selectOpt:{mealCount:[{val:3,text:"Three"},{val:5,text:"Five"},{val:2,text:"Two"}],planType:[{val:7,text:"Weekly"},{val:1,text:"Daily"}]},dietSpec:[{name:"balanced",text:"Balanced Diet (Recommended)"},{name:"low-carb",text:"Low-Carb (Less than 20% of total calories from carbs)"},{name:"low-fat",text:"Low-Fat (Less than 15% of total calories from fat)"}],healthSpec:[{name:"vegan",text:"Vegan (No meat, poultry, fish, dairy, eggs or honey)"},{name:"vegetarian",text:"Vegetarian (No wheat, can have gluten though)"},{name:"alcohol-free",text:"Alcohol-free (No alcohol used or contained)"},{name:"peanut-free",text:"Peanut Free (No peanuts or products containing peanuts)"}],mealTypes:{3:["Breakfast","Lunch","Dinner"],5:["Breakfast Snack","Breakfast","Lunch","Afternoon Snack","Dinner"],2:["Brunch","Dinner"]},calories:{min:1800,max:2500}},Ko={ID:"5532003c",KEY:"511d39184173c54ebc5d02a5063a7b87",URL:"https://api.edamam.com/recipes/v2?type=public&"},Jo=()=>$o,Qo=(e,t,a)=>{if(!e.plan||!e.meals||!e.calories||!e.diet)return!1;const s=parseInt(e.plan,10),c=e.meals.length,i=Math.round(parseInt(e.calories.min,10)/c),r=Math.round(parseInt(e.calories.max,10)/c);let n="";e.health&&(n=Zo(e.health,"health"));let o=e.meals,l={};for(let d=0;d<c;d++){let c=o[d],u=`q=${c}&app_id=${t}&app_key=${a}&to=${s}&diet=${e.diet}${n}&calories=${i}-${r}`;l[c]=u}return l},Zo=(e,t)=>{let a="&";for(let s in e)"true"===e[s].toString()&&(a+=`${t}=${s}&`);return a.slice(0,-1)};var Xo=async(e,t,a)=>{const{ID:s,KEY:c,URL:i}=Ko;let r=Qo(e,s,c);for(let n in r){console.log(n);let e=encodeURI(i+r[n]);const s=await fetch(e);a({...t,[n]:(await s.json()).hits})}};function el(){const[e,t]=Object(s.useState)(0),[a,c]=Object(s.useState)(Jo()),[i,r]=Object(s.useState)([]),[n,o]=Object(s.useState)(a.selectOpt.mealCount[0].val),[l,d]=Object(s.useState)(a.selectOpt.planType[0].val),[b,j]=Object(s.useState)({}),[h,m]=Object(s.useState)({activeIndex:0,selected:"rec",min:1800,max:2500}),[p,g]=Object(s.useState)({activeIndex:0,name:a.dietSpec[0].name}),[O,x]=Object(s.useState)(!1),[f,y]=Object(s.useState)(!1);Object(s.useEffect)((()=>{console.log("Generated Meal Plan",i)}),[i]);const v=e=>{j((()=>{let t=!b[e]||!b[e];return{...b,[e]:t}}))},w=e=>{let t=1===parseInt(e,10)?"custom":"rec";m({...h,activeIndex:e,selected:t})},S=e=>{const t=e.target;if(t.value){let e=parseInt(t.value,10);isNaN(e)&&(e=0),m({...h,[t.name]:e})}},C=e=>{const t=a.dietSpec[e].name;g({activeIndex:e,name:t})},k=e=>{e.preventDefault();const t=a.mealTypes[n],s={plan:l,health:b,calories:{min:h.min,max:h.max},diet:p.name,meals:t};x(!0),Xo(s,i,r).then((e=>{let t={num:l,data:e};x(!1),y(!0),c(t)}))},N=()=>{t(e+1)},E=()=>{t(e-1)},{selectOpt:T,dietSpec:_,healthSpec:D}=a;switch(e){default:case 0:return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"How many meals do you ( or want to ) have in a day?"}),Object(u.jsx)(zo,{name:"mealCount",value:n,handler:e=>o(parseInt(e.target.value,10)),options:T.mealCount}),Object(u.jsx)("button",{onClick:N,children:"Next"})]});case 1:return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Choose a plan type"}),Object(u.jsx)(zo,{name:"planType",value:l,handler:e=>d(parseInt(e.target.value,10)),options:T.planType}),Object(u.jsx)("button",{onClick:E,children:"Back"}),Object(u.jsx)("button",{onClick:N,children:"Next"})]});case 2:return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Any dietary preferences?"}),Object(u.jsx)(Ho,{handleChange:C,activeIndex:p.activeIndex,children:_.map((e=>Object(u.jsx)(Vo,{children:e.text},e.name)))}),Object(u.jsx)("button",{onClick:E,children:"Back"}),Object(u.jsx)("button",{onClick:N,children:"Next"})]});case 3:return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Any health preferences?"}),Object(u.jsx)(Yo,{data:D,toggleHandler:v,isCheckedState:b}),Object(u.jsx)("button",{onClick:E,children:"Back"}),Object(u.jsx)("button",{onClick:N,children:"Next"})]});case 4:return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Calorie intake"}),Object(u.jsxs)(Ho,{handleChange:w,activeIndex:h.activeIndex,children:[Object(u.jsx)(Vo,{children:"Go with recommended"}),Object(u.jsx)(Vo,{children:"Choose custom values"})]}),"custom"===h.selected?Object(u.jsxs)("div",{className:"Survey__input--custom",children:[Object(u.jsx)("input",{placeholder:"min",type:"number",name:"min",onChange:S,value:h.min}),Object(u.jsx)("input",{placeholder:"max",type:"number",name:"max",onChange:S,value:h.max})]}):null,Object(u.jsx)("button",{onClick:E,children:"Back"}),Object(u.jsx)("button",{onClick:k,children:"Get Plan!"})]})}}var tl=Object(m.b)((e=>({auth:e.firebase.auth})),(e=>({becomeConsumer:t=>e(g(t))})))((function(e){const[t,a]=Object(s.useState)(!1),[c,i]=Object(s.useState)(""),[r,n]=Object(s.useState)(""),[o,l]=Object(s.useState)(""),[d,b]=Object(s.useState)(!1);Object(s.useEffect)((()=>{if(c){let e=Ct.find((e=>e.name===c));n(e.code)}}),[c]),Object(s.useEffect)((()=>{Object(ja.b)(r)?Object(ja.a)(o.trim(),r)?(a(!0),b(!1)):(a(!1),b(!0)):a(!0)}),[o]);const m=()=>{var t={uid:e.auth.uid,upload:{postcode:o},profile:{isConsumer:!0}};e.becomeConsumer(t),he("Success","Thanks for joining the plan to save! You have taken a huge step in making food sustainable for everybody."),e.setContent("6month"),e.handleClose()};switch(Object(s.useEffect)((()=>{}),[e.content]),e.content){default:case"start":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"title",children:"JOIN THE PLAN TO SAVE!"}),Object(u.jsxs)("div",{className:"body",children:[Object(u.jsx)("p",{children:"Thanks for choosing to plan your meals with us!"}),Object(u.jsx)("p",{children:"A six month meal plan will help you to eat more nutritious food by ordering and collecting the food in advance."}),Object(u.jsx)("p",{children:"Through the Plan to Save, your six month meal plan will be shared with local farmers to influence their own planning. With the secure knowledge that your food will not go to waste, they can focus on adopting sustainable farm practices that produce more nutritious food with a better impact on the environment."}),Object(u.jsx)(X,{text:"Start now!",goTo:"/meal-plan",styling:"green"})]})]});case"6month":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"title",style:{marginTop:"15%"},children:"JOIN THE PLAN TO SAVE!"}),Object(u.jsxs)("div",{className:"body",children:[Object(u.jsx)("p",{children:"Do you have a six month meal plan already?"}),Object(u.jsxs)(De.a,{className:"mt-5",children:[Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{text:"Yes",styling:"green",onClick:()=>e.setContent("location")})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(X,{text:"No",styling:"green",onClick:()=>e.setContent("choose")})})]})]})]});case"choose":return Object(u.jsx)("div",{className:"body",children:Object(u.jsx)(el,{})});case"refine":return Object(u.jsx)("div",{className:"body",children:Object(u.jsx)("p",{children:"this content is still in development"})});case"location":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"title",style:{marginTop:"10%"},children:"JOIN THE PLAN TO SAVE!"}),Object(u.jsx)("div",{className:"body",children:Object(u.jsxs)(j.a,{onSubmit:e=>{(e=>{d?(e.preventDefault(),console.log("prevented"),e.stopPropagation()):(e.preventDefault(),m())})(e)},children:[Object(u.jsxs)(j.a.Group,{children:[Object(u.jsx)("p",{children:"Your Country"}),Object(u.jsx)(nt,{id:"country",function:e=>{i(e.target.value)},value:c,placeholder:"Country",items:Nt})]}),Object(u.jsxs)(j.a.Group,{controlId:"postcode",children:[Object(u.jsx)("p",{children:"Your Postcode"}),Object(u.jsx)(j.a.Control,{type:"text",onChange:e=>l(e.target.value),required:!0}),d&&Object(u.jsx)("div",{className:"err",children:"Please enter a valid postcode."})]}),Object(u.jsx)(h.a,{type:"submit",className:"sub-btn green-btn shadow-none",children:Object(u.jsx)("div",{className:"basic-title",children:"Finish"})})]})})]})}})),al=a.p+"static/media/Blueberries.81f84019.jpg",sl=a.p+"static/media/pts_field_standing-dark.1765a687.jpg";function cl(e){let{show:t,setShow:a}=e;const[c,i]=Object(s.useState)("start"),r=()=>{a(!1),i("start")};return Object(u.jsx)(Go.a,{open:t,onClose:r,"aria-labelledby":"plan to save title",color:"default",children:Object(u.jsxs)("div",{className:"pts-modal",children:[As.isBrowser?Object(u.jsx)("img",{src:al,alt:"create your own plan",width:"100%"}):Object(u.jsx)("img",{src:sl,alt:"create your own plan",width:"100%"}),Object(u.jsx)("button",{className:"close",onClick:r,children:"X"}),Object(u.jsx)(tl,{content:c,setContent:i,handleClose:r})]})})}const il=e=>{switch(e.type){case"farm_admin":case"farm_sub":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(po.a,{TabIndicatorProps:{style:{backgroundColor:vo}},variant:"standard",onChange:e.handleChange,centered:!0,children:[Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Food",value:"0"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Environment",value:"1"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"FSSP",value:"2"})]}),Object(u.jsxs)(fo.a,{axis:"rtl"===e.theme.direction?"x-reverse":"x",index:parseInt(e.value),onChangeIndex:e.handleChangeIndex,children:[Object(u.jsx)(go.a,{value:e.value,index:0,dir:e.theme.direction,children:Object(u.jsx)(Eo,{isSeller:e.profile.isSeller})}),Object(u.jsx)(go.a,{value:e.value,index:1,dir:e.theme.direction,children:Object(u.jsx)(To,{})}),Object(u.jsx)(go.a,{value:e.value,index:2,dir:e.theme.direction,children:Object(u.jsx)(_o,{})})]})]});case"business_admin":case"business_sub":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(po.a,{TabIndicatorProps:{style:{backgroundColor:vo}},variant:"standard",onChange:e.handleChange,centered:!0,children:[Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Food",value:"0"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Environment",value:"1"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"FSSP",value:"2"})]}),Object(u.jsxs)(fo.a,{axis:"rtl"===e.theme.direction?"x-reverse":"x",index:parseInt(e.value),onChangeIndex:e.handleChangeIndex,children:[Object(u.jsx)(go.a,{value:e.value,index:0,dir:e.theme.direction,children:Object(u.jsx)(Do,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:1,dir:e.theme.direction,children:Object(u.jsx)(Fo,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:2,dir:e.theme.direction,children:Object(u.jsx)(Ro,{})})]})]});case"restaurant_admin":case"restaurant_sub":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(po.a,{TabIndicatorProps:{style:{backgroundColor:vo}},variant:"standard",onChange:e.handleChange,centered:!0,children:[Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Food",value:"0"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Environment",value:"1"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"FSSP",value:"2"})]}),Object(u.jsxs)(fo.a,{axis:"rtl"===e.theme.direction?"x-reverse":"x",index:parseInt(e.value),onChangeIndex:e.handleChangeIndex,children:[Object(u.jsx)(go.a,{value:e.value,index:0,dir:e.theme.direction,children:Object(u.jsx)(Wo,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:1,dir:e.theme.direction,children:Object(u.jsx)(Lo,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:2,dir:e.theme.direction,children:Object(u.jsx)(Bo,{})})]})]});case"academic_admin":case"academic_sub":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(po.a,{TabIndicatorProps:{style:{backgroundColor:vo}},variant:"standard",onChange:e.handleChange,centered:!0,children:[Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Food Business",value:"0"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Research",value:"1"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Environment",value:"2"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"FSSP",value:"3"})]}),Object(u.jsxs)(fo.a,{axis:"rtl"===e.theme.direction?"x-reverse":"x",index:parseInt(e.value),onChangeIndex:e.handleChangeIndex,children:[Object(u.jsx)(go.a,{value:e.value,index:0,dir:e.theme.direction,children:Object(u.jsx)(Po,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:1,dir:e.theme.direction,children:Object(u.jsx)(Io,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:2,dir:e.theme.direction,children:Object(u.jsx)(Mo,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:3,dir:e.theme.direction,children:Object(u.jsx)(Ao,{})})]})]});default:return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(po.a,{TabIndicatorProps:{style:{backgroundColor:vo}},variant:"fullWidth",onChange:e.handleChange,centered:!0,children:[Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Food",value:"0"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Health",value:"1"}),Object(u.jsx)(Oo.a,{disableRipple:!0,label:"Environment",value:"2"})]}),Object(u.jsxs)(fo.a,{axis:"rtl"===e.theme.direction?"x-reverse":"x",index:parseInt(e.value),onChangeIndex:e.handleChangeIndex,children:[Object(u.jsx)(go.a,{value:e.value,index:0,dir:e.theme.direction,children:Object(u.jsx)(Co,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:1,dir:e.theme.direction,children:Object(u.jsx)(ko,{setShow:e.setShow,setChooseModal:e.setChooseModal})}),Object(u.jsx)(go.a,{value:e.value,index:2,dir:e.theme.direction,children:Object(u.jsx)(No,{})})]})]})}};var rl=Object(m.b)((e=>({auth:e.firebase.auth,profile:e.firebase.profile})),(e=>({createSubAccount:t=>e(x(t))})))((e=>{const[t,a]=Object(s.useState)(!0);Object(s.useEffect)((()=>{setTimeout((()=>a(!1)),1500)}));const[c,i]=Object(s.useState)(e.profile.type),[r,o]=Object(s.useState)(!0),[b,j]=Object(s.useState)(!1),[h,m]=Object(s.useState)(!1);Object(s.useEffect)((()=>{i(e.profile.type)}),[e.profile.type]),Object(s.useEffect)((()=>{const t=setTimeout((()=>{"Farm"!==e.profile.buildingFunction&&j(!0)}),1e3);return()=>clearTimeout(t)})),Object(s.useEffect)((()=>{}),[c]);const p=Object(yo.a)(),[g,O]=Object(s.useState)("0");return e.auth.uid?t?Object(u.jsx)(Vt,{}):Object(u.jsxs)(u.Fragment,{children:[b&&!e.profile.isConsumer?Object(u.jsx)(cl,{show:r,setShow:o}):null,h?Object(u.jsx)(cl,{show:r,setShow:o}):null,Object(u.jsx)(Ne,{children:Object(u.jsxs)(d.a,{className:"web-center",children:[Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)("img",{src:l,alt:"World Food Tracker, empowering global food sustainability",className:"img-fluid rounded fix-image mb-3",style:{maxWidth:"40%"}}),Object(u.jsx)(ho,{profile:e.profile,type:c})]}),Object(u.jsx)("div",{className:"tabs",children:Object(u.jsx)(mo.a,{value:g,children:Object(u.jsx)(il,{profile:e.profile,type:c,value:g,theme:p,handleChange:(e,t)=>{O(t)},handleChangeIndex:e=>{O(String(e))},setShow:o,setChooseModal:m})})})]})})]}):Object(u.jsx)(n.a,{to:"/login"})})),nl=a(1061),ol=a(349),ll=a(589);const dl=new Date;var ul=new Date(dl.getFullYear(),0,1),bl=Math.floor((dl-ul)/864e5),jl=Math.ceil((dl.getDay()+1+bl)/7);function hl(e){return Object(u.jsx)(ol.a,{chartType:"ColumnChart",data:e.data,height:"500px",loader:Object(u.jsx)("div",{children:"Loading Chart"}),options:e.options})}const ml=e=>Object(u.jsx)(hl,{data:e.chartType,options:{title:`${e.title} Food Waste Performance`,legend:{position:"top",maxLines:5},colors:[So,wo,vo],hAxis:{title:e.title,minValue:0},vAxis:{title:"Food Wastage"}}});var pl=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,profile:e.firebase.profile,data:e.firestore.data.FoodData})),(e=>({getFirestoreData:t=>e(vt(t))}))),Object(da.firestoreConnect)((e=>{var t,a,s="writtenFoodWasteData";switch(e.profile.type){case"business_admin":a="business_users",t=e.auth.uid;break;case"business_sub":a="business_users",t=e.profile.admin;break;case"academic_admin":a="academic_users",t=e.auth.uid;break;case"academic_sub":a="academic_users",t=e.profile.admin;break;case"farm_admin":a="farm_users",s="writtenFoodLossData",t=e.auth.uid;break;case"farm_sub":a="farm_users",s="writtenFoodLossData",t=e.profile.admin;break;case"household_admin":a="household_users",t=e.auth.uid;break;case"household_sub":a="household_users",t=e.profile.admin;break;default:a="data",t=e.auth.uid}return e.auth.uid?[{collection:a,doc:t,subcollections:[{collection:s}],storeAs:"FoodData"}]:[]})))((function(e){const t=function(){const[e,t]=Object(s.useState)(0);return()=>t((e=>e+1))}(),[a,c]=Object(s.useState)(0),[i,r]=Object(s.useState)(0),[n,o]=Object(s.useState)(0),[l,d]=Object(s.useState)(0),[b,j]=Object(s.useState)(0),[h,m]=Object(s.useState)(0),[p,g]=Object(s.useState)(0),[O,x]=Object(s.useState)(0),[f,y]=Object(s.useState)(0),[v,w]=Object(s.useState)(0),[S,C]=Object(s.useState)(0),[k,N]=Object(s.useState)(0),[E,T]=Object(s.useState)(0),[_,D]=Object(s.useState)(0),[F,R]=Object(s.useState)(0),[P,I]=Object(s.useState)(0),[M,A]=Object(s.useState)(0),[W,L]=Object(s.useState)(0),[B,G]=Object(s.useState)(0),[U,Y]=Object(s.useState)(0),[q,H]=Object(s.useState)(0),[V,z]=Object(s.useState)(0),[$,K]=Object(s.useState)(0),[J,Q]=Object(s.useState)(0),[Z,X]=Object(s.useState)(0),[ee,te]=Object(s.useState)(0),[ae,se]=Object(s.useState)(0),[ce,ie]=Object(s.useState)(0),[re,ne]=Object(s.useState)(0),[oe,le]=Object(s.useState)(0),[de,ue]=Object(s.useState)(0),[be,je]=Object(s.useState)(0),[he,me]=Object(s.useState)(0),[pe,ge]=Object(s.useState)(0),[Oe,xe]=Object(s.useState)(0),[fe,ye]=Object(s.useState)(0),[ve,we]=Object(s.useState)(0),[Se,Ce]=Object(s.useState)(0),[Ne,Ee]=Object(s.useState)(0),[Te,_e]=Object(s.useState)(0),[De,Fe]=Object(s.useState)(0),[Re,Pe]=Object(s.useState)(0),[Ie,Me]=Object(s.useState)(0),[Ae,We]=Object(s.useState)(0),[Le,Be]=Object(s.useState)(0),[Ge,Ue]=Object(s.useState)(0),[Ye,qe]=Object(s.useState)(0),[He,Ve]=Object(s.useState)(0),[ze,$e]=Object(s.useState)(0),[Ke,Je]=Object(s.useState)(0),[Qe,Ze]=Object(s.useState)(0),[Xe,et]=Object(s.useState)(0),[tt,at]=Object(s.useState)(0),[st,ct]=Object(s.useState)(0),[it,rt]=Object(s.useState)(0),[nt,ot]=Object(s.useState)(0),[lt,dt]=Object(s.useState)(0),[ut,bt]=Object(s.useState)(0),[jt,ht]=Object(s.useState)(0),[mt,pt]=Object(s.useState)(0),[gt,Ot]=Object(s.useState)(0),[xt,ft]=Object(s.useState)(0),[yt,vt]=Object(s.useState)(0),[wt,St]=Object(s.useState)(0),[Ct,kt]=Object(s.useState)(0),[Nt,Et]=Object(s.useState)(0),[Tt,_t]=Object(s.useState)(0),[Dt,Ft]=Object(s.useState)(0),[Rt,Pt]=Object(s.useState)(0);Object(s.useEffect)((()=>{c(0),r(0),o(0),d(0),j(0),m(0),g(0),x(0),y(0),w(0),C(0),N(0),T(0),D(0),R(0),I(0),A(0),L(0),G(0),Y(0),H(0),z(0),K(0),Q(0),X(0),te(0),se(0),ie(0),ne(0),le(0),ue(0),je(0),me(0),ge(0),xe(0),ye(0),we(0),Ce(0),Ee(0),_e(0),Fe(0),Pe(0),Me(0),We(0),Be(0),Ue(0),qe(0),Ve(0),$e(0),Je(0),Ze(0),et(0),at(0),ct(0),rt(0),ot(0),dt(0),bt(0),ht(0),pt(0),Ot(0),ft(0),vt(0),St(0),kt(0),Et(0),_t(0),Ft(0),Pt(0),void 0!==e.data&&null!==e.data&&It()}),[e.data]);const It=async()=>{Object.values(e.data).forEach((e=>{try{var t=new Date(1e3*e.date.seconds),a=t.getFullYear(),s=t.getMonth(),i=t.getDate(),n=t.getDay(),l=function(e,t,a){var s=new Date(t,0,1),c=Math.floor((e-s)/864e5);return Math.ceil((a+1+c)/7)}(t,a,n)}catch($){return void console.error($)}var u,b,h=e.foodWasteWeight,p=e.weightType,O=0,f=e.edibleIndeible,v=e.carbsPerUnit,S=e.carbsContent,k=0,E=e.fatPerUnit,_=e.fatContent,F=0,P=e.proteinPerUnit,M=e.proteinContent,W=0,B=e.foodWasteCost,U=e.currency,q=0,V=0;switch(p){default:case"kg":case"l":O=1;break;case"g":case"ml":O=.001;break;case"oz":O=.028;break;case"lbs":O=.454}switch(v){default:case"100g":case"100ml":k=.01;break;case"500g":case"500ml":k=.002;break;case"1l":case"1kg":k=.001}switch(E){default:case"100g":case"100ml":F=.01;break;case"500g":case"500ml":F=.002;break;case"1l":case"1kg":F=.001}switch(P){default:case"100g":case"100ml":W=.01;break;case"500g":case"500ml":W=.002;break;case"1l":case"1kg":W=.001}switch(U){case"GBP (\xa3)":default:q=1;break;case"USD ($)":q=1.404;break;case"EUR (\u20ac)":q=1.161}if(u=Number((h*O).toFixed(3)),V=Number("Edible"===f?320.848*O*h*(.01852*k*S+.01744*W*M+.04608*F*_):h*O*2.5),b=Number(B*q*O),a===dl.getFullYear())switch(s){case 0:ge((e=>e+u)),Ue((e=>e+V)),bt((e=>e+b));break;case 1:xe((e=>e+u)),qe((e=>e+V)),ht((e=>e+b));break;case 2:ye((e=>e+u)),Ve((e=>e+V)),pt((e=>e+b));break;case 3:we((e=>e+u)),$e((e=>e+V)),Ot((e=>e+b));break;case 4:Ce((e=>e+u)),Je((e=>e+V)),ft((e=>e+b));break;case 5:Ee((e=>e+u)),Ze((e=>e+V)),vt((e=>e+b));break;case 6:_e((e=>e+u)),et((e=>e+V)),St((e=>e+b));break;case 7:Fe((e=>e+u)),at((e=>e+V)),kt((e=>e+b));break;case 8:Pe((e=>e+u)),ct((e=>e+V)),Et((e=>e+b));break;case 9:Me((e=>e+u)),rt((e=>e+V)),_t((e=>e+b));break;case 10:We((e=>e+u)),ot((e=>e+V)),Ft((e=>e+b));break;case 11:Be((e=>e+u)),dt((e=>e+V)),Pt((e=>e+b))}if(a===dl.getFullYear()&&s===dl.getMonth()&&(i>=0&&i<=7?(z((e=>e+u)),te((e=>e+V)),le((e=>e+b))):i>=8&&i<=14?(K((e=>e+u)),se((e=>e+V)),ue((e=>e+b))):i>=15&&i<=21?(Q((e=>e+u)),ie((e=>e+V)),je((e=>e+b))):(X((e=>e+u)),ne((e=>e+V)),me((e=>e+b)))),a===dl.getFullYear()&&jl===l)switch(console.log(jl+"/"+l),n){case 0:g((e=>e+u)),D((e=>e+V)),H((e=>e+b));break;case 1:c((e=>e+u)),x((e=>e+V)),R((e=>e+b));break;case 2:r((e=>e+u)),y((e=>e+V)),I((e=>e+b));break;case 3:o((e=>e+u)),w((e=>e+V)),A((e=>e+b));break;case 4:d((e=>e+u)),C((e=>e+V)),L((e=>e+b));break;case 5:j((e=>e+u)),N((e=>e+V)),G((e=>e+b));break;case 6:m((e=>e+u)),T((e=>e+V)),Y((e=>e+b))}}))},Mt=[["Day","Weight (KG)","GHG (KG/CO2)","Cost (\xa3)"],["Mon",a,O,F],["Tue",i,f,P],["Wed",n,v,M],["Thu",l,S,W],["Fri",b,k,B],["Sat",h,E,U],["Sun",p,_,q]],At=[["Week","Weight (KG)","GHG (KG/CO2)","Cost (\xa3)"],["1st-7th",V,ee,oe],["8th-14th",$,ae,de],["15th-21st",J,ce,be],["22nd-31st",Z,re,he]],Wt=[["Month","Weight (KG)","GHG (KG/CO2)","Cost (\xa3)"],["Jan",pe,Ge,ut],["Feb",Oe,Ye,jt],["Mar",fe,He,mt],["Apr",ve,ze,gt],["May",Se,Ke,xt],["Jun",Ne,Qe,yt],["Jul",Te,Xe,wt],["Aug",De,tt,Ct],["Sep",Re,st,Nt],["Oct",Ie,it,Tt],["Nov",Ae,nt,Dt],["Dec",Le,lt,Rt]];function Lt(e){switch(e){case"Daily":default:return Mt;case"Weekly":return At;case"Monthly":return Wt}}return Object(u.jsx)(ke,{header:"Food Waste/Loss Chart",subtitle:"View Food Waste/Loss",goTo:"/account",children:Object(u.jsxs)(Lc.a.Container,{defaultActiveKey:"daily",children:[Object(u.jsx)(Lc.a.Content,{children:Object(u.jsx)(Lc.a.Pane,{eventKey:"daily",title:"Daily",children:Object(u.jsx)(ml,{title:"Daily",chartType:Lt("Daily"),...e})})}),Object(u.jsx)(Lc.a.Content,{children:Object(u.jsx)(Lc.a.Pane,{eventKey:"weekly",title:"Weekly",children:Object(u.jsx)(ml,{title:"Weekly",chartType:Lt("Weekly"),...e})})}),Object(u.jsx)(Lc.a.Content,{children:Object(u.jsx)(Lc.a.Pane,{eventKey:"monthly",title:"Monthly",children:Object(u.jsx)(ml,{title:"Monthly",chartType:Lt("Monthly"),...e})})}),Object(u.jsxs)(ll.a,{justify:!0,variant:"pills",children:[Object(u.jsx)(ll.a.Item,{children:Object(u.jsx)(ll.a.Link,{eventKey:"daily",onClick:t,children:"Daily"})}),Object(u.jsx)(ll.a.Item,{children:Object(u.jsx)(ll.a.Link,{eventKey:"weekly",onClick:t,children:"Weekly"})}),Object(u.jsx)(ll.a.Item,{children:Object(u.jsx)(ll.a.Link,{eventKey:"monthly",onClick:t,children:"Monthly"})})]})]})})}));const gl=new Date;var Ol=new Date(gl.getFullYear(),0,1),xl=Math.floor((gl-Ol)/864e5),fl=Math.ceil((gl.getDay()+1+xl)/7);function yl(e){return Object(u.jsx)(ol.a,{chartType:"ColumnChart",data:e.data,height:"500px",loader:Object(u.jsx)("div",{children:"Loading Chart"}),options:e.options})}const vl=e=>Object(u.jsx)(yl,{data:e.chartType,options:{title:`${e.title} Food Waste Performance`,legend:{position:"top",maxLines:5},colors:[So,wo,vo],hAxis:{title:e.title,minValue:0},vAxis:{title:"Food Wastage"}}});var wl=Object(We.d)(Object(m.b)((e=>({auth:e.firebase.auth,profile:e.firebase.profile,data:e.firestore.data.FoodData})),(e=>({getFirestoreData:t=>e(vt(t))}))),Object(da.firestoreConnect)((e=>{var t,a,s="writtenGiftFoodData";switch(e.profile.type){case"business_admin":a="business_users",t=e.auth.uid;break;case"business_sub":a="business_users",t=e.profile.admin;break;case"academic_admin":a="academic_users",t=e.auth.uid;break;case"academic_sub":a="academic_users",t=e.profile.admin;break;case"farm_admin":a="farm_users",s="writtenFoodLossData",t=e.auth.uid;break;case"farm_sub":a="farm_users",s="writtenFoodLossData",t=e.profile.admin;break;case"household_admin":a="household_users",t=e.auth.uid;break;case"household_sub":a="household_users",t=e.profile.admin;break;default:a="data",t=e.auth.uid}return e.auth.uid?[{collection:a,doc:t,subcollections:[{collection:s}],storeAs:"FoodData"}]:[]})))((function(e){const t=function(){const[e,t]=Object(s.useState)(0);return()=>t((e=>e+1))}(),[a,c]=Object(s.useState)(0),[i,r]=Object(s.useState)(0),[n,o]=Object(s.useState)(0),[l,d]=Object(s.useState)(0),[b,j]=Object(s.useState)(0),[h,m]=Object(s.useState)(0),[p,g]=Object(s.useState)(0),[O,x]=Object(s.useState)(0),[f,y]=Object(s.useState)(0),[v,w]=Object(s.useState)(0),[S,C]=Object(s.useState)(0),[k,N]=Object(s.useState)(0),[E,T]=Object(s.useState)(0),[_,D]=Object(s.useState)(0),[F,R]=Object(s.useState)(0),[P,I]=Object(s.useState)(0),[M,A]=Object(s.useState)(0),[W,L]=Object(s.useState)(0),[B,G]=Object(s.useState)(0),[U,Y]=Object(s.useState)(0),[q,H]=Object(s.useState)(0),[V,z]=Object(s.useState)(0),[$,K]=Object(s.useState)(0),[J,Q]=Object(s.useState)(0),[Z,X]=Object(s.useState)(0),[ee,te]=Object(s.useState)(0),[ae,se]=Object(s.useState)(0),[ce,ie]=Object(s.useState)(0),[re,ne]=Object(s.useState)(0),[oe,le]=Object(s.useState)(0),[de,ue]=Object(s.useState)(0),[be,je]=Object(s.useState)(0),[he,me]=Object(s.useState)(0),[pe,ge]=Object(s.useState)(0),[Oe,xe]=Object(s.useState)(0),[fe,ye]=Object(s.useState)(0),[ve,we]=Object(s.useState)(0),[Se,Ce]=Object(s.useState)(0),[Ne,Ee]=Object(s.useState)(0),[Te,_e]=Object(s.useState)(0),[De,Fe]=Object(s.useState)(0),[Re,Pe]=Object(s.useState)(0),[Ie,Me]=Object(s.useState)(0),[Ae,We]=Object(s.useState)(0),[Le,Be]=Object(s.useState)(0),[Ge,Ue]=Object(s.useState)(0),[Ye,qe]=Object(s.useState)(0),[He,Ve]=Object(s.useState)(0),[ze,$e]=Object(s.useState)(0),[Ke,Je]=Object(s.useState)(0),[Qe,Ze]=Object(s.useState)(0),[Xe,et]=Object(s.useState)(0),[tt,at]=Object(s.useState)(0),[st,ct]=Object(s.useState)(0),[it,rt]=Object(s.useState)(0),[nt,ot]=Object(s.useState)(0),[lt,dt]=Object(s.useState)(0),[ut,bt]=Object(s.useState)(0),[jt,ht]=Object(s.useState)(0),[mt,pt]=Object(s.useState)(0),[gt,Ot]=Object(s.useState)(0),[xt,ft]=Object(s.useState)(0),[yt,vt]=Object(s.useState)(0),[wt,St]=Object(s.useState)(0),[Ct,kt]=Object(s.useState)(0),[Nt,Et]=Object(s.useState)(0),[Tt,_t]=Object(s.useState)(0),[Dt,Ft]=Object(s.useState)(0),[Rt,Pt]=Object(s.useState)(0);Object(s.useEffect)((()=>{c(0),r(0),o(0),d(0),j(0),m(0),g(0),x(0),y(0),w(0),C(0),N(0),T(0),D(0),R(0),I(0),A(0),L(0),G(0),Y(0),H(0),z(0),K(0),Q(0),X(0),te(0),se(0),ie(0),ne(0),le(0),ue(0),je(0),me(0),ge(0),xe(0),ye(0),we(0),Ce(0),Ee(0),_e(0),Fe(0),Pe(0),Me(0),We(0),Be(0),Ue(0),qe(0),Ve(0),$e(0),Je(0),Ze(0),et(0),at(0),ct(0),rt(0),ot(0),dt(0),bt(0),ht(0),pt(0),Ot(0),ft(0),vt(0),St(0),kt(0),Et(0),_t(0),Ft(0),Pt(0),void 0!==e.data&&null!==e.data&&It()}),[e.data]);const It=async()=>{Object.values(e.data).forEach((e=>{try{var t=new Date(1e3*e.date.seconds),a=t.getFullYear(),s=t.getMonth(),i=t.getDate(),n=t.getDay(),l=function(e,t,a){var s=new Date(t,0,1),c=Math.floor((e-s)/864e5);return Math.ceil((a+1+c)/7)}(t,a,n)}catch($){return void console.error($)}var u,b,h=e.foodWasteWeight,p=e.weightType,O=0,f=e.edibleIndeible,v=e.carbsPerUnit,S=e.carbsContent,k=0,E=e.fatPerUnit,_=e.fatContent,F=0,P=e.proteinPerUnit,M=e.proteinContent,W=0,B=e.foodWasteCost,U=e.currency,q=0,V=0;switch(p){default:case"kg":case"l":O=1;break;case"g":case"ml":O=.001;break;case"oz":O=.028;break;case"lbs":O=.454}switch(v){default:case"100g":case"100ml":k=.01;break;case"500g":case"500ml":k=.002;break;case"1l":case"1kg":k=.001}switch(E){default:case"100g":case"100ml":F=.01;break;case"500g":case"500ml":F=.002;break;case"1l":case"1kg":F=.001}switch(P){default:case"100g":case"100ml":W=.01;break;case"500g":case"500ml":W=.002;break;case"1l":case"1kg":W=.001}switch(U){case"GBP (\xa3)":default:q=1;break;case"USD ($)":q=1.404;break;case"EUR (\u20ac)":q=1.161}if(u=Number((h*O).toFixed(3)),V=Number("Edible"===f?320.848*O*h*(.01852*k*S+.01744*W*M+.04608*F*_):h*O*2.5),b=Number(B*q*O),a===gl.getFullYear())switch(s){case 0:ge((e=>e+u)),Ue((e=>e+V)),bt((e=>e+b));break;case 1:xe((e=>e+u)),qe((e=>e+V)),ht((e=>e+b));break;case 2:ye((e=>e+u)),Ve((e=>e+V)),pt((e=>e+b));break;case 3:we((e=>e+u)),$e((e=>e+V)),Ot((e=>e+b));break;case 4:Ce((e=>e+u)),Je((e=>e+V)),ft((e=>e+b));break;case 5:Ee((e=>e+u)),Ze((e=>e+V)),vt((e=>e+b));break;case 6:_e((e=>e+u)),et((e=>e+V)),St((e=>e+b));break;case 7:Fe((e=>e+u)),at((e=>e+V)),kt((e=>e+b));break;case 8:Pe((e=>e+u)),ct((e=>e+V)),Et((e=>e+b));break;case 9:Me((e=>e+u)),rt((e=>e+V)),_t((e=>e+b));break;case 10:We((e=>e+u)),ot((e=>e+V)),Ft((e=>e+b));break;case 11:Be((e=>e+u)),dt((e=>e+V)),Pt((e=>e+b))}if(a===gl.getFullYear()&&s===gl.getMonth()&&(i>=0&&i<=7?(z((e=>e+u)),te((e=>e+V)),le((e=>e+b))):i>=8&&i<=14?(K((e=>e+u)),se((e=>e+V)),ue((e=>e+b))):i>=15&&i<=21?(Q((e=>e+u)),ie((e=>e+V)),je((e=>e+b))):(X((e=>e+u)),ne((e=>e+V)),me((e=>e+b)))),a===gl.getFullYear()&&fl===l)switch(console.log(fl+"/"+l),n){case 0:g((e=>e+u)),D((e=>e+V)),H((e=>e+b));break;case 1:c((e=>e+u)),x((e=>e+V)),R((e=>e+b));break;case 2:r((e=>e+u)),y((e=>e+V)),I((e=>e+b));break;case 3:o((e=>e+u)),w((e=>e+V)),A((e=>e+b));break;case 4:d((e=>e+u)),C((e=>e+V)),L((e=>e+b));break;case 5:j((e=>e+u)),N((e=>e+V)),G((e=>e+b));break;case 6:m((e=>e+u)),T((e=>e+V)),Y((e=>e+b))}}))},Mt=[["Day","Weight (KG)","GHG (KG/CO2)","Cost (\xa3)"],["Mon",a,O,F],["Tue",i,f,P],["Wed",n,v,M],["Thu",l,S,W],["Fri",b,k,B],["Sat",h,E,U],["Sun",p,_,q]],At=[["Week","Weight (KG)","GHG (KG/CO2)","Cost (\xa3)"],["1st-7th",V,ee,oe],["8th-14th",$,ae,de],["15th-21st",J,ce,be],["22nd-31st",Z,re,he]],Wt=[["Month","Weight (KG)","GHG (KG/CO2)","Cost (\xa3)"],["Jan",pe,Ge,ut],["Feb",Oe,Ye,jt],["Mar",fe,He,mt],["Apr",ve,ze,gt],["May",Se,Ke,xt],["Jun",Ne,Qe,yt],["Jul",Te,Xe,wt],["Aug",De,tt,Ct],["Sep",Re,st,Nt],["Oct",Ie,it,Tt],["Nov",Ae,nt,Dt],["Dec",Le,lt,Rt]];function Lt(e){switch(e){case"Daily":default:return Mt;case"Weekly":return At;case"Monthly":return Wt}}return Object(u.jsx)(ke,{header:"Gifted Food Chart",subtitle:"View Gifted Foods",goTo:"/account",children:Object(u.jsxs)(Lc.a.Container,{defaultActiveKey:"daily",children:[Object(u.jsx)(Lc.a.Content,{children:Object(u.jsx)(Lc.a.Pane,{eventKey:"daily",title:"Daily",children:Object(u.jsx)(vl,{title:"Daily",chartType:Lt("Daily"),...e})})}),Object(u.jsx)(Lc.a.Content,{children:Object(u.jsx)(Lc.a.Pane,{eventKey:"weekly",title:"Weekly",children:Object(u.jsx)(vl,{title:"Weekly",chartType:Lt("Weekly"),...e})})}),Object(u.jsx)(Lc.a.Content,{children:Object(u.jsx)(Lc.a.Pane,{eventKey:"monthly",title:"Monthly",children:Object(u.jsx)(vl,{title:"Monthly",chartType:Lt("Monthly"),...e})})}),Object(u.jsxs)(ll.a,{justify:!0,variant:"pills",children:[Object(u.jsx)(ll.a.Item,{children:Object(u.jsx)(ll.a.Link,{eventKey:"daily",onClick:t,children:"Daily"})}),Object(u.jsx)(ll.a.Item,{children:Object(u.jsx)(ll.a.Link,{eventKey:"weekly",onClick:t,children:"Weekly"})}),Object(u.jsx)(ll.a.Item,{children:Object(u.jsx)(ll.a.Link,{eventKey:"monthly",onClick:t,children:"Monthly"})})]})]})})}));var Sl=Object(m.b)((e=>({auth:e.firebase.auth,profile:e.firebase.profile})),null)((e=>{const[t,a]=Object(s.useState)(e.auth.uid),[i,r]=Object(s.useState)(!1);Object(s.useEffect)((()=>{if(e.auth.uid&&r(!0),!e.auth.uid)return Object(u.jsx)(n.a,{to:"/landing"})}),[e.auth.uid]);const[l,d]=Object(s.useState)(!1),[b,j]=Object(s.useState)({title:"",body:"",image:""}),[h,m]=Object(s.useState)(!1);return(e=>{if(null!=Ze)return Ze.getToken().then((t=>{t?e(!0):(console.log("No registration token available. Request permission to generate one."),e(!1))})).catch((e=>{console.log("An error occurred while retrieving token. ",e)}));console.log("FCM Not supported")})(m),new Promise((e=>{null!=Ze&&Ze.onMessage((t=>{e(t)}))})).then((e=>{d(!0),j({image:e.notification.image,title:e.notification.title,body:e.notification.body})})).catch((e=>console.log("failed: ",e))),Object(u.jsxs)(c.a.Fragment,{children:[Object(u.jsx)(be.Notifications,{position:"top-right"}),Object(u.jsxs)(o.a,{children:[Object(u.jsxs)(nl.a,{onClose:()=>d(!1),show:l,delay:1e4,autohide:!0,animation:!0,style:{position:"absolute",top:70,right:20,width:300,zIndex:1},children:[Object(u.jsxs)(nl.a.Header,{children:[Object(u.jsx)("img",{src:b.image,className:"rounded me-2",alt:"",style:{width:20,height:20,margin:10}}),Object(u.jsx)("strong",{className:"mr-auto",children:b.title}),Object(u.jsx)("small",{children:"just now"})]}),Object(u.jsx)(nl.a.Body,{style:{backgroundColor:"white"},children:b.body})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)(As.MobileView,{children:Object(u.jsx)(n.b,{exact:!0,path:"/",render:()=>i?Object(u.jsx)(n.a,{to:"/account"}):Object(u.jsx)(n.a,{to:"/landing"})})}),Object(u.jsx)(As.BrowserView,{children:Object(u.jsx)(n.b,{exact:!0,path:"/",render:()=>Object(u.jsx)(n.a,{to:"/landing"})})}),Object(u.jsxs)(n.d,{children:[Object(u.jsx)(n.b,{path:"/login",exact:!0,component:f}),Object(u.jsx)(n.b,{path:"/admin",exact:!0,component:bs}),Object(u.jsx)(n.b,{path:"/landing",exact:!0,component:se}),Object(u.jsx)(n.b,{path:"/about-us",exact:!0,component:Re}),Object(u.jsx)(n.b,{path:"/signup",exact:!0,component:Pt}),Object(u.jsx)(n.b,{path:"/settings",exact:!0,component:va}),Object(u.jsx)(n.b,{path:"/questionnaire",exact:!0,component:wa}),Object(u.jsx)(n.b,{path:"/contact",exact:!0,component:Be}),Object(u.jsx)(n.b,{path:"/forgot-password",exact:!0,component:Ta}),Object(u.jsx)(n.b,{exact:!0,path:"/consultants",component:Ge}),Object(u.jsx)(n.b,{path:"/consultants/question2",exact:!0,component:He}),Object(u.jsx)(n.b,{path:"/consultants/onboard",exact:!0,component:Ve}),Object(u.jsx)(n.b,{path:"/consultant-login",exact:!0,component:ze}),Object(u.jsx)(n.b,{path:"/consultant-account",exact:!0,component:st}),Object(u.jsx)(n.b,{path:"/consultant-settings",exact:!0,component:at}),Object(u.jsx)(n.b,{path:"/account",exact:!0,component:rl}),Object(u.jsx)(n.b,{path:"/pts",exact:!0,component:Ma}),Object(u.jsx)(n.b,{path:"/change-password",exact:!0,component:Ba}),Object(u.jsx)(n.b,{path:"/view-map",exact:!0,component:Ka}),Object(u.jsx)(n.b,{path:"/food-waste",exact:!0,component:ms}),Object(u.jsx)(n.b,{path:"/gift-food",exact:!0,component:Os}),Object(u.jsx)(n.b,{path:"/food-loss",exact:!0,component:ys}),Object(u.jsx)(n.b,{path:"/food-wasteBusiness",exact:!0,component:Ss}),Object(u.jsx)(n.b,{path:"/food-intake",exact:!0,component:Ns}),Object(u.jsx)(n.b,{path:"/table",component:Ms}),Object(u.jsx)(n.b,{path:"/chart",exact:!0,component:pl}),Object(u.jsx)(n.b,{path:"/gift-chart",exact:!0,component:wl}),Object(u.jsx)(n.b,{path:"/food-reduction",component:Ps}),Object(u.jsx)(n.b,{path:"/product-listing",component:Vs}),Object(u.jsx)(n.b,{path:"/reserve-items",component:ic}),Object(u.jsx)(n.b,{path:"/farm-plan",component:xc,children:!e.profile.isSeller&&Object(u.jsx)(n.a,{to:"/farm-plan"})}),Object(u.jsx)(n.b,{path:"/farm-auth",component:Pc,children:e.profile.isSeller&&Object(u.jsx)(n.a,{to:"/farm-plan"})}),Object(u.jsx)(n.b,{path:"/cons-auth",component:Ac}),Object(u.jsx)(n.b,{path:"/meal-plan",component:_n}),Object(u.jsx)(n.b,{path:"/nutrient-gap",component:Rn}),Object(u.jsx)(n.b,{path:"/view-products",component:Mn}),Object(u.jsx)(n.b,{path:"/food-wasteAcademic",component:Ln}),Object(u.jsx)(n.b,{path:"/food-intakeAcademic",component:qn}),Object(u.jsx)(n.b,{path:"/food-surplusAcademic",component:Kn}),Object(u.jsx)(n.b,{path:"/restaurant-shopping-list",component:Qn}),Object(u.jsx)(n.b,{path:"/restaurant-inventory",component:Zn}),Object(u.jsx)(n.b,{path:"/restaurant-dashboard",component:so}),Object(u.jsx)(n.b,{path:"/restaurant-meal-plan",component:uo}),Object(u.jsx)(n.b,{component:Ca})]})]})]})]})}));var Cl=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,1086)).then((t=>{let{getCLS:a,getFID:s,getFCP:c,getLCP:i,getTTFB:r}=t;a(e),s(e),c(e),i(e),r(e)}))},kl=a(221);const Nl={authError:null};var El=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),{...e,authError:"Login failed"};case"LOGIN_SUCCESS":return console.log("login success"),{...e,authError:null};case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),{...e,authError:null};case"SIGNUP_ERROR":case"CREATE_SUBACCOUNT_ERROR":case"DELETE_SUBACCOUNT_ERROR":return{...e,authError:t.err.message};case"CREATE_SUBACCOUNT":return console.log("subaccount success"),{...e,authError:null};case"DELETE_SUBACCOUNT":return console.log("delete subaccount success"),{...e,authError:null};case"CHANGE_ERROR":return console.log("change password error"),{...e,authError:"Changing password failed"};case"CHANGE_SUCCESS":return console.log("change password success"),{...e,authError:null};case"CHANGE_EMAIL_ERROR":return console.log("change email error"),{...e,authError:"Changing email failed"};case"CHANGE_EMAIL_SUCCESS":return console.log("change email success"),{...e,authError:null};case"CHANGE_PROFILE_ERROR":return console.log("change email error"),{...e,authError:"Changing profile failed"};case"CHANGE_PROFILE_SUCCESS":return console.log("change profile success"),{...e,authError:null};case"RESET_ERROR":return console.log("reset password error"),{...e,authError:"Resetting password failed"};case"RESET_SUCCESS":return console.log("reset password success"),{...e,authError:null};case"SELLER_ERROR":return console.log("become seller error"),{...e,authError:"Become seller failed"};case"SELLER_SUCCESS":return console.log("Successfully became a seller."),{...e,authError:null};case"CONSUMER_ERROR":return console.log("become consumer error"),{...e,authError:"Please accept the terms and conditions"};case"CONSUMER_SUCCESS":return console.log("Successfully became a consumer."),{...e,authError:null};default:return e}};const Tl={};var _l=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tl};const Dl={authError:null,getData:[],purchaseData:[]};var Fl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_DATA_ERROR":return console.log("create data error "+t.err.message),{...e,authError:"Create failed"};case"CREATE_DATA":return console.log("create data success"),{...e,authError:null};case"GET_DATA_ERROR":return console.log("get data error "+t.err.message),{...e,authError:"Get failed"};case"GET_DATA":return console.log("get data success"),{...e,getData:t.payload,authError:null};case"GET_PURCHASE_DATA_ERROR":return console.log("get purchase error "+t.err.message),{...e,authError:"Get failed"};case"GET_PURCHASE_DATA":return console.log("get purchase success",t.payload),{...e,purchaseData:t.payload,authError:null};case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),{...e,authError:null};case"SIGNUP_ERROR":return console.log("signup error"),{...e,authError:t.err.message};case"CHANGE_ERROR":return console.log("change password error"),{...e,authError:"Changing password failed"};case"CHANGE_SUCCESS":return console.log("change password success"),{...e,authError:null};case"RESET_ERROR":return console.log("reset password error"),{...e,authError:"Resetting password failed"};case"RESET_SUCCESS":return console.log("reset password success"),{...e,authError:null};default:return e}};const Rl={authError:null,meals:[],mealDiary:[],singleMealDiary:[],savedMeals:[],shoppingList:[],newShoppingList:[],shopItems:[],inventory:[],giftedFood:[],purchaseInfo:[]};var Pl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MEAL":return console.log("meal created",t.mealPlan),{...e,authError:null};case"CREATE_MEAL_ERROR":return console.log("error, meal not created",t.err),{...e,authError:"Create meal failed"};case"GET_MEALS":return console.log("get meals success",t.payload),{...e,meals:t.payload,authError:null};case"GET_MEALS_ERROR":return console.log("error, couldn't fetch meals",t.err),{...e,authError:"Get meals failed"};case"GET_MEAL_DIARY":return console.log("get meal diary success",t.payload),{...e,mealDiary:t.payload,authError:null};case"GET_MEAL_DIARY_ERROR":return console.log("error, couldn't fetch diary meals",t.err),{...e,authError:"Get meal diary failed"};case"GET_SINGLE_MEAL_DIARY":return console.log("get single meal diary success",t.payload),{...e,singleMealDiary:t.payload,authError:null};case"GET_SINGLE_MEAL_DIARY_ERROR":return console.log("error, couldn't fetch single diary meals",t.err),{...e,authError:"Get single meal diary failed"};case"EDIT_MEAL":return console.log("successfully edited",t.mealPlan),{...e,authError:null};case"EDIT_MEAL_ERROR":return console.log("error, couldn't edit meal",t.err),{...e,authError:"Edit meal failed"};case"EDIT_DIARY_MEAL":return console.log("successfully edited diary meal",t.mealPlan),{...e,authError:null};case"EDIT_DIARY_MEAL_ERROR":return console.log("error, couldn't edit diary meal",t.err),{...e,authError:"Edit diary meal failed"};case"DELETE_MEAL":case"DELETE_INVENTORY_ITEM":return console.log("successfully deleted",t.mealPlan),{...e,authError:null};case"DELETE_MEAL_ERROR":return console.log("error, couldn't delete meal",t.err),{...e,authError:"delete meal failed"};case"CREATE_RECIPE":return console.log("recipe saved",t.recipe),{...e,authError:null};case"CREATE_RECIPE_ERROR":return console.log("error, recipe not saved",t.err),{...e,authError:"Create recipe failed"};case"GET_RECIPES":return console.log("get meals success",t.payload),{...e,savedMeals:t.payload,authError:null};case"GET_RECIPES_ERROR":return console.log("error, couldn't fetch recipes",t.err),{...e,authError:"Get recipe failed"};case"DELETE_RECIPE":return console.log("successfully deleted",t.recipe),{...e,authError:null};case"DELETE_RECIPE_ERROR":return console.log("error, couldn't delete meal",t.err),{...e,authError:"delete recipe failed"};case"GET_SHOPPING_LIST":case"GET_RESTAURANT_SHOPPING_LIST":return console.log("get shopping list success",t.payload),{...e,shoppingList:t.payload,authError:null};case"GET_SHOPPING_LIST_ERROR":case"GET_NEW_SHOPPING_LIST_ERROR":case"GET_RESTAURANT_SHOPPING_LIST_ERROR":return console.log("error, couldn't get shopping list",t.err),{...e,authError:"Get shoppiung list failed"};case"GET_NEW_SHOPPING_LIST":return console.log("get shopping list success",t.payload),{...e,newShoppingList:t.payload,authError:null};case"CREATE_SHOP":case"CREATE_NEW_SHOP":case"CREATE_SHOP_ITEMS":case"CREATE_RESTAURANT_SHOP":return console.log("added to shop",t.ingr),{...e,authError:null};case"CREATE_SHOP_ERROR":case"CREATE_NEW_SHOP_ERROR":case"CREATE_SHOP_ITEMS_ERROR":case"CREATE_RESTAURANT_SHOP_ERROR":return console.log("error, couldn't add to shopping list",t.err),{...e,authError:"Add to shop failed"};case"ADD_PURCHASE_ITEM":return console.log("added to purchases",t.data),{...e,authError:null};case"ADD_PURCHASE_ITEM_ERROR":return console.log("error, couldn't add to purchase list",t.err),{...e,authError:"Add to purchase failed"};case"SEND_TO_USER":return{...e,authError:null};case"SEND_TO_USER_ERROR":return console.log("error, couldn't send to user collection",t.err),{...e,authError:"send to user failed"};case"GET_PURCHASE_INFO":return console.log("sent to user",t.payload),{...e,purchaseInfo:t.payload,authError:null};case"GET_PURCHASE_INFO_ERROR":return console.log("error, couldn't get purchase info",t.err),{...e,authError:"fetch purchase info failed"};case"EDIT_SHOPPING_LIST":return console.log("succesfully editted shoping list",t.payload),{...e,authError:null};case"EDIT_SHOPPING_LIST_ERROR":return console.log("error, couldn't edit shopping list",t.err),{...e,authError:"Add to shop failed"};case"EDIT_PURCHASE_STATUS":return console.log("succesfully editted status",t.payload),{...e,authError:null};case"EDIT_PURCHASE_STATUS_ERROR":return console.log("error, couldn't edit status",t.err),{...e,authError:"edit status failed"};case"DELETE_SHOP":case"DELETE_NEW_SHOP":case"DELETE_RESTAURANT_SHOP":return console.log("successfully deleted item"),{...e,authError:null};case"DELETE_SHOP_ERROR":case"DELETE_NEW_SHOP_ERROR":case"DELETE_RESTAURANT_SHOP_ERROR":return console.log("error, couldn't delete item",t.err),{...e,authError:"delete item failed"};case"GET_INVENTORY":return console.log("get inventory success",t.payload),{...e,inventory:t.payload,authError:null};case"GET_INVENTORY_ERROR":return console.log("error, couldn't fetch inventory",t.err),{...e,authError:"Get inventory failed"};case"CREATE_INVENTORY_ITEM":return console.log("inventory item created",t.mealPlan),{...e,authError:null};case"CREATE_INVENTORY_ITEM_ERROR":return console.log("error, inventory item not created",t.err),{...e,authError:"Create inventory item failed"};case"CREATE_GIFT_ITEM":return console.log("gifted item created",t.data),{...e,authError:null};case"CREATE_GIFT_ITEM_ERROR":return console.log("error, gifted item not created",t.err),{...e,authError:"Create inventory item failed"};case"CREATE_WASTE_ITEM":return console.log("waste item added",t.data),{...e,authError:null};case"CREATE_WASTE_ITEM_ERROR":return console.log("error, waste item not created",t.err),{...e,authError:"Create inventory item failed"};case"DELETE_INVENTORY_ITEM_ERROR":return console.log("error, couldn't delete inventory item",t.err),{...e,authError:"Edit inventory item failed"};case"EDIT_INVENTORY":return console.log("edit inventory success",t.payload),{...e,authError:null};case"EDIT_INVENTORY_ERROR":return console.log("error, couldn't edit inventory",t.err),{...e,authError:"Get inventory failed"};default:return e}};const Il={authError:null,meals:[],savedMeals:[],shoppingList:[],inventory:[],plans:[],items:[],newPlans:[],weekPlans:[],allItems:[],singleMealPlan:[]};var Ml=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Il,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MEAL_PLAN":return console.log("meal planner created",t.mealPlanner),{...e,authError:null};case"CREATE_MEAL_PLANNER_ERROR":return console.log("error, meal plan not created",t.err),{...e,authError:"Create meal failed"};case"GENERATE_MEAL_PLAN":return console.log("meal planner generated",t.plan),{...e,authError:null};case"GENERATE_MEAL_PLANNER_ERROR":return console.log("error, meal plan not generated",t.err),{...e,authError:"Create meal failed"};case"REMOVE_ALL_MEAL_PAN":return console.log("successfully removed all meal plan",t.mealPlan),{...e,authError:null};case"REMOVE_ALL_MEAL_PLAN_ERROR":return console.log("error, couldn't remove all meal plan",t.err),{...e,authError:"delete meal failed"};case"GET_MEAL_PLANS":return console.log("get meals plans success",t.payload),{...e,plans:t.payload,authError:null};case"GET_MEAL_PLANS_ERROR":case"GET_WEEK_PLANS_ERROR":return console.log("error, couldn't fetch meals",t.err),{...e,authError:"Get meals failed"};case"GET_WEEK_PLANS":return console.log("get week plans success",t.payload),{...e,weekPlans:t.payload,authError:null};case"GET_NEW_PLANS":return console.log("get meal new plan success",t.payload),{...e,newPlans:t.payload,authError:null};case"GET_NEW_PLANS_ERROR":return console.log("error, couldn't fetch new plan",t.err),{...e,authError:"Get meals failed"};case"GET_SINGLE_MEAL_PLAN":return console.log("get single meal from plan success",t.payload),{...e,singleMealPlan:t.payload,authError:null};case"GET_SINGLE_MEAL_PLAN_ERROR":return console.log("error, couldn't fetch single  meals from plan",t.err),{...e,authError:"Get single meal plan failed"};case"EDIT_NEW_PLAN":case"EDIT_INVENTORY":return console.log("successfully edited",t.data),{...e,authError:null};case"EDIT_NEW_PLAN_ERROR":return console.log("error, couldn't edit meal",t.err),{...e,authError:"Edit meal failed"};case"DELETE_MEAL_PLAN":return console.log("successfully deleted item"),{...e,authError:null};case"DELETE_MEAL_PLAN_ERROR":return console.log("error, couldn't delete item",t.err),{...e,authError:"delete item failed"};case"GET_ALL_MEAL_PLAN":return console.log("getting all meal panner items",t.plan),{...e,allItems:t.plan,authError:null};case"EDIT_INVENTORY_ERROR":return console.log("error, couldn't edit inventory item",t.err),{...e,authError:"Edit inventory item failed"};default:return e}};var Al=Object(We.c)({auth:El,map:_l,data:Fl,mealPlan:Pl,mealPlanner:Ml,firebase:da.firebaseReducer,firestore:kl.firestoreReducer}),Wl=a(592);const Ll=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||We.d,Bl=Object(We.e)(Al,{},Ll(Object(We.a)(Wl.a.withExtraArgument({getFirebase:da.getFirebase,getFirestore:kl.getFirestore})))),Gl={firebase:p.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:Bl.dispatch,createFirestoreInstance:kl.createFirestoreInstance,RealtimeDB:Xe},Ul=e=>{let{children:t}=e;const a=Object(m.c)((e=>e.firebase.auth));return Object(da.isLoaded)(a)?t:Object(u.jsx)("div",{})};r.a.render(Object(u.jsx)(m.a,{store:Bl,children:Object(u.jsx)(da.ReactReduxFirebaseProvider,{...Gl,children:Object(u.jsx)(Ul,{children:Object(u.jsx)(Sl,{})})})}),document.getElementById("root")),Cl()}},[[936,1,2]]]);
//# sourceMappingURL=main.823ed577.chunk.js.map